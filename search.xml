<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>AbstractQueuedSynchronizer</title>
      <link href="/sunshine-carroll.github.io/2020/12/15/AbstractQueuedSynchronizer/"/>
      <url>/sunshine-carroll.github.io/2020/12/15/AbstractQueuedSynchronizer/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util.concurrent.locks;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯èƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ç‹¬å çš„åŒæ­¥å™¨ï¼Œ  è¿™ä¸ªç±»æä¾›åˆ›å»ºå¯èƒ½éœ€è¦æ‰€æœ‰æ¦‚å¿µçš„é”å’ŒåŒæ­¥å™¨çš„åŸºç¡€ã€‚  </span></span><br><span class="line"><span class="comment"> * AbstractOwnableSynchronizer ç±»è‡ªèº«å¹¶ä¸ç®¡ç†æˆ–è€…ä½¿ç”¨è¿™ä¸ªä¿¡æ¯ã€‚ i</span></span><br><span class="line"><span class="comment"> * ä¸ç®¡æ€æ ·ï¼Œå­ç±»æˆ–è€…å·¥å…·ç±»å¯èƒ½é€‚å½“çš„ç»´æŠ¤ä¸€ä¸ªå€¼,æœ‰åŠ©äºæ§åˆ¶å’Œç›‘è§†è®¿é—®å¹¶æä¾›è¯Šæ–­ </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Doug Lea</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractOwnableSynchronizer</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Use serial ID even though all fields transient. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">3737899427754241961L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»™å­ç±»ä½¿ç”¨çš„ç©ºæ„é€ å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">AbstractOwnableSynchronizer</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç‹¬å åŒæ­¥æ¨¡å¼ä¸‹å½“å‰çš„æŒæœ‰é”çš„çº¿ç¨‹çº¿ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Thread exclusiveOwnerThread;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®å½“å‰ç‹¬å è®¿é—®çš„çº¿ç¨‹ï¼Œå‚æ•°ä¸ºnullä»£è¡¨æ²¡æœ‰çº¿ç¨‹å¯ä»¥ç‹¬å è®¿é—®ã€‚</span></span><br><span class="line"><span class="comment">     * This method does not otherwise impose any synchronization or</span></span><br><span class="line"><span class="comment">     * volatile field accesses.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> thread the owner thread</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setExclusiveOwnerThread</span><span class="params">(Thread thread)</span> </span>&#123;</span><br><span class="line">        exclusiveOwnerThread = thread;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æœ€æ–°çš„é€šè¿‡setExclusiveOwnerThreadæ–¹æ³•è®¾ç½®çš„çš„çº¿ç¨‹ï¼Œæˆ–è€…åœ¨ä»æœªè®¾ç½®è¿‡çš„æƒ…å†µä¸‹è¿”å›null</span></span><br><span class="line"><span class="comment">     * This method does not otherwise impose any synchronization or volatile field accesses.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the owner thread</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> Thread <span class="title">getExclusiveOwnerThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> exclusiveOwnerThread;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> concurrent </category>
          
      </categories>
      
      
        <tags>
            
            <tag> synchronizer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£æ¦‚ç‡æ¦‚å¿µæ€»ç»“</title>
      <link href="/sunshine-carroll.github.io/2020/12/05/%E7%A6%BB%E6%95%A3%E6%A6%82%E7%8E%87%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93/"/>
      <url>/sunshine-carroll.github.io/2020/12/05/%E7%A6%BB%E6%95%A3%E6%A6%82%E7%8E%87%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h2 id="Finite-Probability"><a href="#Finite-Probability" class="headerlink" title="Finite Probability"></a>Finite Probability</h2><ul><li><code>experiment</code>: an experiment is a procedure yield one of given set of possible outcomes</li><li><code>sample space</code>: the sample space of experiment is the set of possible outcomes</li><li><code>event</code>: an event is subset of sample space</li></ul><blockquote><p>DEFINITION 1 <br>if S is a finite nonempty set sample space of equally likely outcomes , and E is an event ,that is an subset of S , then the probability of E is $P(E) = \frac{|E|}{|S|}$</p></blockquote><h2 id="Probabilities-of-Complements-and-Unions-of-Events"><a href="#Probabilities-of-Complements-and-Unions-of-Events" class="headerlink" title="Probabilities of Complements and Unions of Events"></a>Probabilities of Complements and Unions of Events</h2><blockquote><p>Theorem 1<br>Let $E$ be an event in a sample space $S$. The probability of the event $\overline E  = S âˆ’ E$, the complementary event of E, is given by<br>$$<br>P(\overline{E}) = 1 - P(E)<br>$$</p></blockquote><blockquote><p>Theorem 2<br>Let $E_1$ and $E_2$ be events in the sample space S. Then<br>$$<br>p(E_1 âˆª E_2 ) = p(E_1 ) + p(E_2 ) âˆ’ p(E_1 âˆ© E_2 ).<br>$$</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> discrete mathematics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> discrete probability </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CAP Paper</title>
      <link href="/sunshine-carroll.github.io/2020/11/27/CAP-Paper/"/>
      <url>/sunshine-carroll.github.io/2020/11/27/CAP-Paper/</url>
      
        <content type="html"><![CDATA[<p>çº¯å±ä¸ªäººå­¦ä¹ æ—¶ç¿»è¯‘ï¼Œè‹±è¯­æ°´å¹³æœ‰é™,å¯èƒ½ä¼šæœ‰ç”¨è¯è¯­æ„ä¸å‡†çš„æƒ…å†µï¼Œå¯çœ‹åŸæ–‡ã€‚</p><p><a href="https://users.ece.cmu.edu/~adrian/731-sp04/readings/GL-cap.pdf" target="_blank" rel="noopener">Brewerâ€™s Conjecture and the Feasibility of Consistent, Available, Partition-Tolerant Web Services</a></p><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><blockquote><p>When designing distributed web services, there are three properties that are commonly desired: consistency, availability, and partition tolerance. It is impossible to achieve all three. In this note, we prove this conjecture in the asynchronous network model, and then discuss solutions to this dilemma in the partially synchronous model.</p></blockquote><p>å½“è®¾è®¡åˆ†å¸ƒå¼webæœåŠ¡æ—¶ï¼Œé€šå¸¸æœ‰ä¸‰ä¸ªç‰¹æ€§æ˜¯è¢«æ¸´æœ›çš„:ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§ä»¥åŠåˆ†åŒºå®¹é”™æ€§ã€‚åŒæ—¶å®ç°è¿™ä¸‰ä¸ªç‰¹æ€§æ˜¯ä¸å¯èƒ½çš„ï¼Œæˆ‘ä»¬åœ¨å¼‚æ­¥ç½‘ç»œæ¨¡å‹ä¸­è¯æ˜è¿™ä¸ªçŒœæƒ³ï¼Œç„¶ååœ¨éƒ¨åˆ†åŒæ­¥æ¨¡å‹ä¸­ï¼Œè®¨è®ºè¿™ç§çª˜å¢ƒçš„è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><blockquote><p>At PODC 2000, Brewer  , in an invited talk , made the following conjecture: it is impossible for a web service to provide the following three guarantees:</p><ul><li><p>Consistency</p></li><li><p>Availability</p></li><li><p>Partition-tolerance</p></li></ul><p>All three of these properties are desirable â€“ and expected â€“ from real-world web services. In this note, we will ï¬rst discuss what Brewer meant by the conjecture; next we will formalize these concepts and prove the conjecture;ï¬nally, we will describe and attempt to formalize some real-world solutions to this practical diï¬ƒculty.</p><p>Most web services today attempt to provide strongly consistent data. There has been signiï¬cant research designing ACID databases, and most of the new frameworks for building distributed web services depend on these databases. Interactions with web services are expected to behave in a transactional manner: operations commit or fail in their entirety (atomic), committed transactions are visible to all future transactions (consistent), uncommitted transactions are isolated from each other (isolated), and once a transaction is committed it is permanent (durable). It is clearly important, for example, that billing information and commercial transaction records be handled with this type of strong consistency.</p><p>Web services are similarly expected to be highly available. Every request should succeed and receive a response. When a service goes down, it may well create signiï¬cant real-world problems; the classic example of this is the potential legal diï¬ƒculties should the E-Trade web site go down. This problem is exacerbated by the fact that a web-site is most likely to be unavailable when it is most needed. The goal of most web services today is to be as available as the network on which they run: if any service on the network is available, then the web service should be accessible.</p><p>Finally, on a highly distributed network, it is desirable to provide some amount of fault-tolerance. When some nodes crash or some communication links fail, it is important that the service still perform as expected. One desirable fault tolerance property is the ability to survive a network partitioning into multiple components. In this note we will not consider stopping failures, though in some cases a stopping failure can be modeled as a node existing in its own unique component of a partition.</p></blockquote><p>åœ¨ PODC 2000 ,<code>Brewer</code>åœ¨ä¸€æ¬¡å—é‚€è®²æ¼”ä¸­åšäº†å¦‚ä¸‹çš„çŒœæƒ³:å¯¹äºä¸€ä¸ªwebæœåŠ¡æ¥è¯´æä¾›ä¸‹é¢ä¸‰ä¸ªä¿è¯æ˜¯ä¸å¯èƒ½çš„</p><ul><li>ä¸€è‡´</li><li>å¯ç”¨</li><li>åˆ†åŒºå®¹é”™</li></ul><p>æ‰€æœ‰çš„è¿™ä¸‰ä¸ªç‰¹æ€§éƒ½è¢«ç°å®ä¸–ç•Œä¸­çš„webæœåŠ¡æ‰€æ¸´æ±‚å¹¶æœŸæœ›ã€‚åœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè®¨è®ºBrewerçŒœæƒ³çš„å«ä¹‰ï¼Œç„¶åå½¢å¼åŒ–è¿™äº›æ¦‚å¿µå¹¶ä¸”è¯æ˜è¿™ä¸ªçŒœæƒ³ï¼Œæœ€åæˆ‘ä»¬ä¼šæè¿°å¹¶å°è¯•å¯¹è¿™ä¸€å®é™…çš„å›°éš¾ç»™å‡ºä¸€ä¸ªç°å®ä¸–ç•Œä¸­çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ç°åœ¨çš„å¤§éƒ¨åˆ†webæœåŠ¡éƒ½è¯•å›¾æä¾›å¼ºä¸€è‡´çš„æ•°æ®ï¼Œåœ¨è®¾è®¡ACIDæ•°æ®åº“æ–¹é¢å·²ç»æœ‰äº†é‡è¦çš„ç ”ç©¶ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æ–°çš„æ„å»ºåˆ†å¸ƒå¼webæœåŠ¡çš„æ¡†æ¶ä¾èµ–äºè¿™äº›æ•°æ®åº“ã€‚webæœåŠ¡ä¹‹é—´çš„äº¤äº’è¢«æœŸæœ›ä»¥äº‹åŠ¡çš„å½¢å¼è¡¨ç°:æ“ä½œè¦ä¹ˆå…¨éƒ¨æäº¤è¦ä¹ˆå…¨éƒ¨å¤±è´¥(åŸå­æ€§)ï¼Œå·²æäº¤çš„äº‹åŠ¡å¯¹å°†æ¥çš„äº‹åŠ¡æ¥è¯´éƒ½æ˜¯å¯è§çš„(ä¸€è‡´æ€§)ï¼Œæœªæäº¤çš„äº‹åŠ¡å’Œå…¶ä»–çš„æ¯ä¸ªäº‹åŠ¡éƒ½éš”ç¦»(éš”ç¦»æ€§),ä¸€æ—¦äº‹åŠ¡å·²æäº¤ï¼Œå°±ä¸å˜åŒ–(æŒä¹…æ€§)ã€‚è¿™äº›ç‰¹æ€§æ˜¾ç„¶å¾ˆé‡è¦ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ•°äº¿ä¿¡æ¯å’Œå•†ä¸šäº¤æ˜“è®°å½•éƒ½åœ¨è¿™ç§å¼ºä¸€è‡´çš„æƒ…å†µä¸‹è¢«å¤„ç†ã€‚</p><p>WebæœåŠ¡åŒæ ·è¢«æœŸæœ›é«˜å¯ç”¨ã€‚ä»»æ„ä¸€ä¸ªè¯·æ±‚éƒ½åº”è¯¥æˆåŠŸå¹¶æ¥æ”¶åˆ°å“åº”ã€‚ä¸€ä¸ªæœåŠ¡å½“æœºå¯èƒ½ä¼šäº§ç”Ÿæœ‰æ˜¾è‘—å½±å“çš„ç°å®ä¸–ç•Œé—®é¢˜ï¼Œå…¸å‹ä¾‹å­æ˜¯ç”µå­è´¸æ˜“ç½‘ç«™å®•æœºå¯èƒ½å¸¦æ¥çš„æ³•å¾‹é—®é¢˜ã€‚å½“ä¸€ä¸ªç½‘ç«™åœ¨æœ€éœ€è¦webæœåŠ¡çš„æ—¶å€™ï¼Œå®ƒå¾ˆå¯èƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™ä¸€äº‹å®åŠ å‰§äº†è¿™ä¸ªé—®é¢˜ã€‚å½“ä»Šå¤§å¤šæ•°webæœåŠ¡çš„ç›®æ ‡æ˜¯ä¸å®ƒä»¬è¿è¡Œçš„ç½‘ç»œä¸€æ ·å¯ç”¨:å¦‚æœç½‘ç»œä¸Šæœ‰ä»»ä½•æœåŠ¡å¯ç”¨ï¼Œé‚£ä¹ˆwebæœåŠ¡åº”è¯¥æ˜¯å¯è®¿é—®çš„ã€‚</p><p>æœ€åï¼Œåœ¨ä¸€ä¸ªé«˜åº¦åˆ†å¸ƒçš„ç½‘ç»œä¸­ï¼Œæä¾›ä¸€å®šç¨‹åº¦å®¹é”™æ˜¯ç†æƒ³çš„ã€‚å½“ä¸€äº›ç»“ç‚¹å½“æœºæˆ–è€…ä¸€äº›é€šä¿¡é“¾è·¯å¤±æ•ˆï¼ŒæœåŠ¡çš„å¦‚æœŸè¿è¡Œæ˜¯é‡è¦çš„ã€‚ä¸€ä¸ªç†æƒ³çš„å®¹é”™ç‰¹æ€§æ˜¯åœ¨ç½‘ç»œåˆ’åˆ†å¤šä¸ªç»„ä»¶æ—¶ç”Ÿå­˜ä¸‹æ¥çš„èƒ½åŠ›ã€‚åœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸è€ƒè™‘<code>stopping failures</code>,é€šè¿‡ä¸€äº›æƒ…æ™¯ä¸€ä¸ª<code>stopping failure</code>å¯ä»¥å»ºæ¨¡ä¸ºèŠ‚ç‚¹å­˜åœ¨åœ¨åˆ†åŒºä¸­å”¯ä¸€çš„ä¸€ä¸ªç»„ä»¶ä¸­ã€‚</p><h2 id="Formal-Model"><a href="#Formal-Model" class="headerlink" title="Formal Model"></a>Formal Model</h2><blockquote><p>In this section, we will formally deï¬ne what is meant by the terms <em>consistent</em>, <em>available</em>, and <em>partition tolerant</em>.</p></blockquote><p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬æ­£å¼å®šä¹‰æœ¯è¯­<code>consistent</code>,<code>available</code>å’Œ<code>partition tolerant</code>çš„å«ä¹‰</p><h3 id="Atomic-Data-Objects"><a href="#Atomic-Data-Objects" class="headerlink" title="Atomic Data Objects"></a>Atomic Data Objects</h3><blockquote><p>The most natural way of formalizing the idea of a consistent service is as an atomic data object. Atomic , or linearizable, consistency is the condition expected by most web services today. Under this consistency guarantee, there must exist a total order on all operations such that each operation looks as if it were completed at a single instant. This is equivalent to requiring requests of the distributed shared memory to act as if they were executing on a single node, responding to operations one at a time. One important property of an atomic read/write shared memory is that any read operation that begins after a write operation completes must return that value, or the result of a later write operation. This is the consistency guarantee that generally provides the easiest model for users to understand, and is most convenient for those attempting to design a client application that uses the distributed service. See for a more complete deï¬nition of atomic consistency.</p></blockquote><p>æŠŠä¸€è‡´æœåŠ¡çš„æ¦‚å¿µä½œä¸º <code>atomic data object</code>ï¼Œæ˜¯æœ€è‡ªç„¶çš„å½¢å¼åŒ–æ–¹å¼ã€‚åŸå­æ€§æˆ–å¯ä¸²è¡Œæ€§ï¼Œä¸€è‡´æ€§è¢«å¤§éƒ¨åˆ†ç°ä»Šçš„webæœåŠ¡æ‰€æœŸæœ›ã€‚åœ¨ä¸€è‡´æ€§çš„ä¿è¯ä¸‹ï¼Œthere must exist a total order on all operations such that each operation looks as if it were completed at a single instantã€‚è¿™ç­‰ä»·äºè¦æ±‚åˆ†å¸ƒå¼å…±äº«å†…å­˜ä¸­çš„è¯·æ±‚è¡¨ç°çš„å°±åƒåœ¨ä¸€ä¸ªç»“ç‚¹ä¸Šæ‰§è¡Œä¸€æ ·,ä¸€æ¬¡å“åº”ä¸€ä¸ªæ“çºµã€‚å…±äº«å†…å­˜ä¸­ä¸€ä¸ªåŸå­çš„è¯»/å†™çš„ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§æ˜¯ä»»æ„ä¸€ä¸ªåœ¨å†™æ“ä½œå®Œæˆåçš„è¯»æ“ä½œéƒ½å¿…é¡»è¿”å›é‚£ä¸ªå€¼æˆ–è€…åç»­çš„å†™æ“ä½œçš„ç»“æœã€‚è¿™æ˜¯ä¸€è‡´æ€§ä¿è¯ï¼Œé€šå¸¸ä¸ºç”¨æˆ·æä¾›äº†æœ€å®¹æ˜“ç†è§£çš„æ¨¡å‹ï¼Œå¯¹äºé‚£äº›è¯•å›¾è®¾è®¡ä½¿ç”¨åˆ†å¸ƒå¼æœåŠ¡çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„äººæ¥è¯´ï¼Œè¿™æ˜¯æœ€æ–¹ä¾¿çš„ã€‚</p><h3 id="Available-Data-Objects"><a href="#Available-Data-Objects" class="headerlink" title="Available Data Objects"></a>Available Data Objects</h3><blockquote><p>For a distributed system to be continuously available, every request received by a non-failing node in the system must result in a response. That is, any algorithm used by the service must eventually terminate. In some ways this is a weak deï¬nition of availability: it puts no bound on how long the algorithm may run before terminating, and therefore allows unbounded computation. On the other hand, when qualiï¬ed by the need for partition tolerance, this can be seen as a strong deï¬nition of availability: even when severe network failures occur, every request must terminate.</p></blockquote><p>å¯¹äºä¸€ä¸ªæŒç»­å¯ç”¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ¯ä¸€ä¸ªè¢«æ²¡æœ‰æ•…éšœç»“ç‚¹æ¥æ”¶åˆ°çš„è¯·æ±‚å¿…é¡»æœ‰å“åº”ç»“æœã€‚æ„æ€å°±æ˜¯ä»»ä½•æœåŠ¡ä½¿ç”¨çš„ç®—æ³•æœ€ç»ˆéƒ½èƒ½ç»ˆæ­¢ã€‚åœ¨æŸäº›æ–¹é¢ï¼Œè¿™æ˜¯å¯ç”¨æ€§çš„å¼±å®šä¹‰ï¼Œå®ƒæ²¡æœ‰å®šä¹‰ç®—æ³•åœ¨ç»ˆæ­¢ä¹‹å‰çš„è¿è¡Œæ—¶é—´çš„è¾¹ç•Œï¼Œå› æ­¤å…è®¸æ— è¾¹ç•Œçš„è®¡ç®—ã€‚åœ¨å…¶ä»–æ–¹é¢ï¼Œå½“ç¬¦åˆåˆ†åŒºå®¹é”™è¦æ±‚æ—¶ï¼Œè¿™å¯ä»¥è§†ä¸ºå¯ç”¨æ€§çš„å¼ºå®šä¹‰ï¼Œç”šè‡³å½“å‘ç”ŸæœåŠ¡çš„ç½‘ç»œå¤±è´¥æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚å¿…é¡»ç»ˆæ­¢ã€‚</p><h3 id="Partition-Tolerance"><a href="#Partition-Tolerance" class="headerlink" title="Partition Tolerance"></a>Partition Tolerance</h3><blockquote><p>The above deï¬nitions of availability and atomicity are qualiï¬ed by the need to tolerate partitions. In order to model partition tolerance, the network will be allowed to lose arbitrarily many messages sent from one node to another. When a network is partitioned, all messages sent from nodes in one component of the partition to nodes in another component are lost. (And any pattern of message loss can be modeled as a temporary partition separating the communicating nodes at the exact instant the message is lost.)The atomicity requirement ( Â§ 2.1) therefore implies that every response will be atomic, even though arbitrary messages sent as part of the algorithm might not be delivered. The availability requirement ( Â§ 2.2) implies that every node receiving a request from a client must respond, even though arbitrary messages that are sent may be lost. Note that this is similar to wait-free termination in a pure shared-memory system: even if every other node in the network fails (i.e. the node is in its own unique component of the partition), a valid (atomic) response must be generated. No set of failures less than total network failure is allowed to cause the system to respond incorrectly.5</p></blockquote><p>ä¸Šè¿°å®šä¹‰çš„å¯ç”¨æ€§å’ŒåŸå­æ€§ç¬¦åˆåˆ†åŒºå®¹é”™çš„è¦æ±‚ã€‚ä¸ºäº†å»ºæ¨¡åˆ†åŒºå®¹é”™ï¼Œç½‘ç»œè¢«å…è®¸ä»»æ„çš„ä¸¢å¼ƒä»ä¸€ä¸ªèŠ‚ç‚¹å‘é€åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å¤šä¸ªæ¶ˆæ¯ã€‚å½“ç½‘ç»œæ˜¯åˆ†åŒºçš„ï¼Œä¸€ä¸ª</p>]]></content>
      
      
      <categories>
          
          <category> distributed </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
            <tag> cap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMap(ä¸‰)</title>
      <link href="/sunshine-carroll.github.io/2020/11/27/HashMap-%E4%B8%89/"/>
      <url>/sunshine-carroll.github.io/2020/11/27/HashMap-%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>HashMap ä¸­ä½¿ç”¨äº†çº¢é»‘æ ‘å¢å¼ºäº†åœ¨æ•£åˆ—åˆ†é…ä¸æ˜¯ç‰¹åˆ«åˆç†çš„æƒ…å½¢ä¸‹HashMapçš„æ€§èƒ½ã€‚è¿™ç¯‡åšå®¢å…³æ³¨äºHashMapä¸­å…³äºçº¢é»‘æ ‘çš„éƒ¨åˆ†åŒ…æ‹¬ä½†ä¸é™äºçº¢é»‘æ ‘çš„insert,delete,searchæ“ä½œå®ç°ã€‚</p><h2 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h2><p>é¦–å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Œçº¢é»‘æ ‘æ˜¯æ»¡è¶³ä¸‹åˆ—çº¢é»‘æ€§è´¨çš„äºŒå‰æœç´¢æ ‘(nullæ˜¯é»‘è‰²çš„ï¼Œnullä¹Ÿç®—ç»“ç‚¹)</p><blockquote><ol><li>æ‰€æœ‰ç»“ç‚¹ä¸æ˜¯çº¢è‰²çš„å°±æ˜¯é»‘è‰²çš„</li><li>æ ¹ç»“ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¶å­ç»“ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¦‚æœä¸€ä¸ªç»“ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆä»–çš„å·¦å³å­©å­æ˜¯é»‘è‰²çš„</li><li>ä»»æ„ä¸€ä¸ªçº¢é»‘æ ‘çš„ç»“ç‚¹ï¼Œä»è¯¥ç»“ç‚¹å‡ºå‘åˆ°å¶å­ç»“ç‚¹çš„æ‰€æœ‰çš„ç®€å•è·¯å¾„ä¸Šå…·æœ‰ç›¸åŒçš„é»‘è‰²ç»“ç‚¹æ•°</li></ol></blockquote><p>å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ€§è´¨è¯æ˜ çº¢é»‘æ ‘çš„ç»“ç‚¹æ•°nä¸é«˜åº¦hæ»¡è¶³ä¸‹é¢å…³ç³»(è¿™é‡Œåªæ˜¯ä½¿ç”¨ç»“è®ºï¼Œå¯ä»¥å‚é˜…ç®—æ³•å¯¼è®º)<br>$$<br>hâ‰¤2lg(n+1)<br>$$<br>çº¢é»‘æ ‘æ˜¯ä¸€ç§ç›¸å¯¹å¹³è¡¡çš„æ ‘ï¼Œå¯¹äºä»»æ„ä¸¤æ¡ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„ä¸¤æ¡ç®€å•è·¯å¾„ï¼Œä¸å¯èƒ½å­˜åœ¨ä¸€æ¡è·¯å¾„é•¿åº¦æ˜¯å¦ä¸€æ¡çš„ä¸¤å€</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMap(äºŒ)</title>
      <link href="/sunshine-carroll.github.io/2020/11/26/HashMap-%E4%BA%8C/"/>
      <url>/sunshine-carroll.github.io/2020/11/26/HashMap-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<p>æ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿è¯„è®ºäº¤æµ</p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>HashMap(ä¸€) ä¸­ç®€å•ä»‹ç»äº†ç›´æ¥å¯»å€æ³•å’Œæ•£åˆ—å¯»å€æ³•ï¼Œå¹¶ä»‹ç»äº†é“¾æ¥æ³•è§£å†³æ•£åˆ—å†²çªçš„æ•£åˆ—è¡¨ï¼Œå’ŒHashMapä¸­åœ¨æŸäº›æ¡ä»¶ä¸‹ä¼šä½¿ç”¨äº†çº¢é»‘æ ‘ä½œä¸ºæ•£åˆ—è¡¨çš„æ§½ä½ã€‚è¿™ç¯‡åšå®¢ä»‹ç»HashMapä¸­çš„æ•°æ®ç»“æ„å’Œ3ä¸ªçš„åŠ¨æ€é›†åˆæ“ä½œï¼Œinsertï¼Œdeleteï¼Œsearch</p><h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><p>å…³äºæ•£åˆ—è¡¨ï¼ŒHashMapä¸­ä½¿ç”¨ä¸€ä¸ªNodeæ•°ç»„ç»´æŠ¤æ•£åˆ—è¡¨ç»“æ„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªä½ç½®åœ¨HashMapä¸­è¢«ç§°ä¸ºbinæˆ–è€…bucket</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">k</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">Serializable</span></span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»“ç‚¹ç»“æ„"><a href="#ç»“ç‚¹ç»“æ„" class="headerlink" title="ç»“ç‚¹ç»“æ„"></a>ç»“ç‚¹ç»“æ„</h2><p>Nodeå’ŒTreeNodeæ˜¯HashMapä¸­ä½¿ç”¨çš„åŸºæœ¬å­˜å‚¨ç»“æ„ï¼Œå¦‚ä¸‹å›¾</p><img src="/sunshine-carroll.github.io/2020/11/26/HashMap-%E4%BA%8C/node.png" alt="node" style="zoom:50%;"><h3 id="Node-lt-K-V-gt"><a href="#Node-lt-K-V-gt" class="headerlink" title="Node&lt;K,V&gt;"></a>Node&lt;K,V&gt;</h3><p>æˆ‘ä»¬çŸ¥é“Mapæ¥å£ä¸­ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨æ¥å£å«Entry,è¡¨ç¤ºæ˜ å°„å½“ä¸­çš„æ¡ç›®ã€‚Nodeç±»é™¤äº†å®ç°äº†æ¥å£Entryä¹‹å¤–ï¼Œå†…éƒ¨è¿˜æœ‰å››ä¸ªæˆå‘˜å˜é‡</p><ul><li>hash ä¿å­˜ç€keyçš„æ•£åˆ—å€¼ï¼Œ</li><li>key</li><li>value</li><li>next  nextå˜é‡ä½¿å¾—Nodeå¯ä»¥æˆä¸ºä¸€ä¸ªå•é“¾è¡¨</li></ul><p>å›çœ‹ä¸€ä¸‹ï¼Œç®—æ³•å¯¼è®ºä¸­æåˆ°çš„é“¾æ¥æ³•è§£å†³æ•£åˆ—å†²çªçš„æ•£åˆ—è¡¨çš„åˆ é™¤ç®—æ³•ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-delete(T,x)</span><br><span class="line">delete x from  list T[h(x.key)]</span><br></pre></td></tr></table></figure><p>ç®—æ³•çš„è¾“å…¥æ˜¯æ•£åˆ—è¡¨å’Œè¦è¢«åˆ é™¤çš„ç»“ç‚¹ã€‚åœ¨ç®—æ³•å¯¼è®ºä¸­ï¼Œä½œè€…å»ºè®®ä½¿ç”¨åŒé“¾è¡¨ä½œä¸ºæ•£åˆ—è¡¨çš„æ§½ï¼Œå…¶ç†ç”±æ˜¯è®¤ä¸ºå¦‚æœä½¿ç”¨åŒé“¾è¡¨ï¼Œåˆ é™¤ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯$O(1)$,åªéœ€è¦å°†xå‰é©±çš„åç»§æ”¹æˆxçš„åç»§ï¼Œxåç»§çš„å‰é©±æ”¹æˆxçš„å‰é©±å°±è¡Œäº†ï¼Œä»è€Œé¿å…å•é“¾è¡¨çš„æœç´¢ã€‚ä½†æ˜¯å¯¹äºHashMapçš„ä½¿ç”¨è€…æ¥è¯´ï¼Œåˆ é™¤ç»“ç‚¹åªæ˜¯è¾“å…¥æ³›å‹ç±»å‹K,å¹¶ä¸ç›´æ¥è¾“å…¥ç»“ç‚¹ï¼Œä¾æ—§éœ€è¦åœ¨é“¾è¡¨ä¸­æœç´¢å¯¹åº”ç»“ç‚¹ï¼Œä¸ªäººè®¤ä¸ºè¿™æ˜¯HashMapä½¿ç”¨å•é“¾è¡¨çš„åŸå› ä¹‹ä¸€ã€‚</p><h3 id="TreeNode-lt-K-V-gt"><a href="#TreeNode-lt-K-V-gt" class="headerlink" title="TreeNode&lt;K,V&gt;"></a>TreeNode&lt;K,V&gt;</h3><p>TreeNodeç›´æ¥ç»§æ‰¿LinkedHashMap.Entryé—´æ¥ç»§æ‰¿è‡ªHashMap.Node .  LinkedHashMap.Entryä¸­æœ‰ä¸¤ä¸ªå˜é‡beforeï¼Œafterå› æ­¤å¯ä»¥ä½œä¸ºå¸¸è§„ç»“ç‚¹æ‰©å±•ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºé“¾å¼ç»“ç‚¹æ‰©å±•ã€‚</p><p>TreeNodeåŒ…å«äº†çº¢é»‘æ ‘ç»“ç‚¹ç»“æ„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œ</p><ul><li>parentæŒ‡å‘çˆ¶ç»“ç‚¹æˆ–è€…nullã€‚åªæœ‰åœ¨ä¸€é¢—çº¢é»‘æ ‘ä¸­åªæœ‰æ ¹ç»“ç‚¹æ‰å›å‡ºç°parentä¸ºnullçš„æƒ…å†µ</li><li>leftæŒ‡å‘å·¦å­©å­æˆ–è€…null</li><li>rightæŒ‡å‘å³å­©å­æˆ–è€…null</li><li>redè¡¨æ˜ç»“ç‚¹æ˜¯å¦ä¸ºçº¢è‰²ã€‚</li></ul><p>çº¢é»‘æ ‘çš„é«˜åº¦hå’Œç»“ç‚¹æ•°næ»¡è¶³$hâ‰¤2\ lg\ (n+1)$ï¼Œæ­£å¦‚HashMap(ä¸€)ä¸­æ‰€è¯´çº¢é»‘æ ‘çš„åŸºæœ¬æ“ä½œçš„æœ€åæƒ…å½¢å¤æ‚åº¦ä¸º$O(lg\ n)$è¿™èƒ½å¤Ÿåœ¨æ•£åˆ—è¡¨å¤„äºç³Ÿç³•çš„æ•£åˆ—åˆ†é…çš„æƒ…å†µä¸‹ï¼Œæä¾›æ¯”é“¾è¡¨æ›´å¿«çš„æ“ä½œã€‚</p><p>çº¢é»‘æ ‘ä»»æ„ä¸€æ¡ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„ç®€å•è·¯å¾„é•¿åº¦ä¸å¯èƒ½å¤§äºå¦ä¸€æ¡çš„ä¸¤å€ã€‚</p><h2 id="åŠ¨æ€é›†åˆæ“ä½œ"><a href="#åŠ¨æ€é›†åˆæ“ä½œ" class="headerlink" title="åŠ¨æ€é›†åˆæ“ä½œ"></a>åŠ¨æ€é›†åˆæ“ä½œ</h2><p>åœ¨å¯¹äºä¸€ä¸ªmapæ¥è¯´ï¼Œget,putï¼Œremoveæ˜¯HashMapåŸºæœ¬çš„æ–¹æ³•ï¼Œå…¶ä»–è¯¸å¦‚getOrDefaultï¼ŒputAll ç­‰æ–¹æ³•(ä½†ä¸æ˜¯æ‰€æœ‰æ–¹æ³•)ç›´æ¥æˆ–é—´æ¥çš„ä¾èµ–get,putï¼Œremoveæ–¹æ³•ã€‚getNode ï¼ŒputVal ï¼ŒremoveNodeè¿™ä¸‰ä¸ªæ–¹æ³•æ˜¯Hashmapå†…éƒ¨çš„æ–¹æ³•ï¼Œä¸å¯è¢«é‡å†™ï¼Œå…·æœ‰åŒ…è®¿é—®æƒé™ã€‚</p><p>æŸ¥çœ‹HashMapçš„æºä»£ç ï¼Œå¯ä»¥çœ‹åˆ°get,put,delete åŸºæœ¬ä¸Šåªæ˜¯è°ƒç”¨äº†getNode ï¼ŒputVal ï¼ŒremoveNodeä¸‰ä¸ªå†…éƒ¨æ–¹æ³•ï¼Œå¹¶ä¸ä¼šç›´æ¥æ“ä½œæ•£åˆ—è¡¨çš„ç»“æ„ã€‚getNode ï¼ŒputVal ï¼ŒremoveNodeæ–¹æ³•æ˜¯HashMapå†…éƒ¨æ•£åˆ—è¡¨çš„åŠ¨æ€é›†åˆæ“ä½œinsert,delete,searchã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">   Node&lt;K,V&gt; e;</span><br><span class="line">   <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">return</span> (e = removeNode(hash(key), key, <span class="keyword">null</span>, <span class="keyword">false</span>, <span class="keyword">true</span>)) == <span class="keyword">null</span> ?<span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ€ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•å†…éƒ¨éƒ½è°ƒç”¨hash(key)ï¼Œè¿™æ˜¯HashMapä½¿ç”¨çš„æ•£åˆ—å‡½æ•°ï¼Œè¿™ä¸ªæ•£åˆ—å‡½æ•°ä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡æ•£åˆ—è¡¨çš„å¤§å°<code>n</code>å’Œè®¡ç®—å‡ºæ¥çš„æ•£åˆ—å€¼<code>hash</code>é€šè¿‡è®¡ç®—å¾—åˆ°å¯¹åº”çš„æ•£åˆ—æ¡¶çš„ä½ç½®å…¶è®¡ç®—æ–¹å¼å¦‚ä¸‹<br>$$<br>(n-1)\ &amp;\ hash<br>$$<br>å°†n-1å’Œhashè¿›è¡ŒæŒ‰ä½ä¸ã€‚å…¶åŸç†ä¸åœ¨è¿™ç¯‡åšå®¢çš„ä¸»æ—¨ä¸­(æ›´å…³é”®çš„æ˜¯ï¼Œä¹Ÿæ²¡ç ”ç©¶è¿‡è¿™ä¸ªï¼Œå¯èƒ½åœ¨åç»­åšå®¢ä¸“é—¨å†™)ã€‚é¡ºå¸¦æä¸€ä¸‹ï¼ŒHashMapä½¿ç”¨2çš„éè´Ÿæ•´æ•°æ¬¡å¹‚ä½œä¸ºæ•£åˆ—è¡¨çš„å¤§å°ï¼Œn-1å°±æ˜¯ä¸€ä¸ªæ¢…æ£®æ•°(ä¸ä¸€å®šæ˜¯æ¢…æ£®ç´ æ•°)ï¼Œè½¬æˆ2è¿›å€¼å°±æ˜¯$log_2{n}ä¸ª1$</p></blockquote><p>HashMapå†…éƒ¨å®ç°äº†çº¢é»‘æ ‘çš„ç»“æ„å’Œç›¸å…³ç®—æ³•ï¼Œå†…å®¹å¤æ‚ï¼Œæ’å…¥åˆ é™¤æ—¶éœ€è¦ç»´æŠ¤çº¢é»‘æ€§è´¨ï¼Œè¿™ä¼šåœ¨HashMap(ä¸‰)å•ç‹¬åˆ†æã€‚</p><h3 id="getNode"><a href="#getNode" class="headerlink" title="getNode"></a>getNode</h3><p>getNode æ–¹æ³•èƒ½è¾…åŠ©HashMapä¸­çš„getæˆ–è€…å…¶ä»–æ–¹æ³•ä»æ•£åˆ—è¡¨ä¸­è·å–ä¸€ä¸ªç»“ç‚¹ã€‚</p><p>getNode é¦–å…ˆæ‰¾åˆ°æ•£åˆ—æ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ firstï¼Œå¦‚æœå­˜åœ¨åˆ™ç»§ç»­æ“ä½œï¼Œä¸å­˜åœ¨å°±ç›´æ¥è¿”å›nullã€‚æ‰¾åˆ°firståï¼Œé¦–å…ˆæ£€æŸ¥ç¬¬ä¸€ä¸ªç»“ç‚¹æ˜¯å¦ä¸ºè¦æ‰¾çš„ç»“ç‚¹ï¼Œå¦‚æœæ˜¯çš„è¯ç›´æ¥è¿”å›ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆæ ¹æ®ç»“ç‚¹ç±»å‹æ‰§è¡Œæœç´¢æ“ä½œã€‚å¦‚æœæ˜¯é“¾å¼ç»“ç‚¹ï¼Œé‚£ä¹ˆåšå•é“¾è¡¨çš„æœç´¢ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘åˆ™åšçº¢é»‘æ ‘çš„æœç´¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;<span class="comment">//tab:æ•£åˆ—è¡¨;first æ•£åˆ—æ¡¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ;n æ•£åˆ—æ¡¶å¤§å°;k é”®</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">            ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ€ getNode,putVal,removeNode ç±»ä¼¼çš„éƒ½ä¼šæ£€æŸ¥æ•£åˆ—æ¡¶çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚ç¬”è€…çš„çœ‹æ³•æ˜¯ï¼Œä¸ç®¡ç»“ç‚¹æ˜¯é“¾å¼ç»“ç‚¹è¿˜æ˜¯çº¢é»‘æ ‘ç»“ç‚¹ï¼Œéƒ½æ˜¯HashMapä¸ºäº†è§£å†³æ•£åˆ—å†²çªä½¿ç”¨çš„ç»“æ„ï¼Œç„¶è€Œä¸€ä¸ªå¥½çš„è®¾è®¡ä¸ç®¡æ˜¯HashMapçš„å†…éƒ¨ç»“æ„è¿˜æ˜¯ç¨‹åºå‘˜è‡ªå·±å†™çš„hashCodeæ–¹æ³•éƒ½åº”è¯¥å‡å°‘å†²çªçš„å‘ç”Ÿï¼Œå› æ­¤æ€»æ˜¯æ£€æŸ¥ç¬¬ä¸€ä¸ªç»“ç‚¹å¯ä»¥é¿å…åç»­çš„å¤æ‚æ“ä½œã€‚</p></blockquote><h3 id="removeNode"><a href="#removeNode" class="headerlink" title="removeNode"></a>removeNode</h3><p>getNode æ–¹æ³•èƒ½è¾…åŠ©HashMapä¸­çš„getæˆ–è€…å…¶ä»–æ–¹æ³•ä»æ•£åˆ—è¡¨ä¸­åˆ é™¤ä¸€ä¸ªç»“ç‚¹ã€‚removeNodeå¯ä»¥å’ŒgetNodeç»“åˆçœ‹ï¼Œå› ä¸ºè¦åˆ é™¤ä¸€ä¸ªç»“ç‚¹å¿…é¡»å…ˆæ‰¾åˆ°é‚£ä¸ªç»“ç‚¹ï¼ŒremoveNodeçš„å‰åŠéƒ¨åˆ†å’ŒgetNodeç±»ä¼¼ï¼ŒååŠéƒ¨åˆ†æ ¹æ®æ¡ä»¶çš„ä¸åŒå†³å®šæ˜¯å¦åˆ é™¤ç»“ç‚¹ã€‚</p><p>å¦‚æœmatchvalue ä¸ºtrue ï¼Œåˆ™ä»…å½“ç»“ç‚¹çš„valueå’Œå‚æ•°valueç›¸ç­‰æ—¶æ‰ä¼šå‘ç”Ÿåˆ é™¤ã€‚</p><p>å¦‚æœmovable ä¸ºfalse é‚£ä¹ˆåœ¨ç§»é™¤ç»“ç‚¹æ—¶ä¸ä¼šç§»é™¤å…¶ä»–ç»“ç‚¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">removeNode</span><span class="params">(<span class="keyword">int</span> hash, Object key, Object value,</span></span></span><br><span class="line"><span class="function"><span class="params">                               <span class="keyword">boolean</span> matchValue, <span class="keyword">boolean</span> movable)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, index;<span class="comment">// tab æ•£åˆ—è¡¨ pæ•£åˆ—æ¡¶çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ n æ•£åˆ—è¡¨çš„å¤§å°</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">            (p = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Node&lt;K,V&gt; node = <span class="keyword">null</span>, e; K k; V v;</span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                node = p;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((e = p.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="comment">// å³ä½¿ç»“ç‚¹æ˜¯çº¢é»‘æ ‘ç»“ç‚¹ï¼Œä½†æ˜¯HashMapçš„çº¢é»‘æ ‘ç»“ç‚¹ä¾æ—§ä¼šç»´æŠ¤ä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œä¸Šé¢çš„åˆ¤æ–­ä¸ä¼šç©ºæŒ‡é’ˆ</span></span><br><span class="line">                <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                            ((k = e.key) == key ||</span><br><span class="line">                             (key != <span class="keyword">null</span> &amp;&amp; key.equals(k)))) &#123;</span><br><span class="line">                            node = e;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        p = e;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node != <span class="keyword">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</span><br><span class="line">                                 (value != <span class="keyword">null</span> &amp;&amp; value.equals(v)))) &#123;</span><br><span class="line">                <span class="keyword">if</span> (node <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)node).removeTreeNode(<span class="keyword">this</span>, tab, movable);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (node == p)</span><br><span class="line">                    tab[index] = node.next;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    p.next = node.next;</span><br><span class="line">                ++modCount;</span><br><span class="line">                --size;</span><br><span class="line">                afterNodeRemoval(node);</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°åœ¨24è¡Œä¹‹å‰ï¼ŒremoveNodeç±»ä¼¼äºgeiNodeéƒ½åœ¨å¯»æ‰¾è¦åˆ é™¤çš„ç»“ç‚¹ã€‚ä¸»è¦çš„ä¸€äº›ä¸åŒçš„æ˜¯</p><ul><li>æ‰¾åˆ°ç»“ç‚¹åè®©nodeæŒ‡å‘ç»“ç‚¹è€Œä¸æ˜¯return</li><li>è®°å½•äº†æ•£åˆ—æ¡¶çš„ä½ç½®ï¼Œå› ä¸ºåˆ é™¤ç»“ç‚¹å¯èƒ½ä¼šåˆ é™¤æ•£åˆ—æ¡¶çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ”¹å˜æ•£åˆ—è¡¨ä¸­çš„æŒ‡å‘çš„æ ¹ç»“ç‚¹ã€‚</li></ul><p>å¦‚æœnodeçš„å€¼æ»¡è¶³ç§»é™¤çš„æ¡ä»¶åˆ™ç»§ç»­ç§»é™¤æ“ä½œï¼Œæ­¤æ—¶å¯ä»¥åˆ†ä¸º3ç§æƒ…å†µ</p><ul><li><p>æƒ…å†µä¸€ ç»“ç‚¹æ˜¯çº¢é»‘æ ‘ç»“ç‚¹</p><p>â€‹    ç›´æ¥è°ƒç”¨çº¢é»‘æ ‘çš„åˆ é™¤ç®—æ³• ï¼Œè¿™é‡Œä¹Ÿä¼šæœ‰æ•£åˆ—æ¡¶çš„ä½ç½®æ—¶çº¢é»‘æ ‘çš„æ ¹ç»“ç‚¹çš„æƒ…å†µï¼Œåœ¨ç®—æ³•å†…éƒ¨è§£å†³çš„è¿™ä¸ªé—®é¢˜</p></li><li><p>æƒ…å†µäºŒ ç»“ç‚¹æ˜¯é“¾å¼ç»“ç‚¹ï¼Œå¹¶ä¸”æ˜¯å¤´ç»“ç‚¹</p><p>â€‹    å°†æ•£åˆ—è¡¨å¯¹åº”çš„æ•£åˆ—æ¡¶ä½ç½®æŒ‡å‘nodeçš„ä¸‹ä¸€ä¸ªç»“ç‚¹</p></li><li><p>æƒ…å†µä¸‰ ç»“ç‚¹æ˜¯é“¾å¼ç»“ç‚¹ï¼Œå¹¶ä¸”ä¸æ˜¯å¤´ç»“ç‚¹</p><p>â€‹    ä½¿ç”¨å•é“¾è¡¨çš„åˆ é™¤</p></li></ul><p>ç„¶åå°±æ˜¯ä¿®æ”¹ ++modCountï¼ŒæŠŠè®°å½•çš„æ•£åˆ—è¡¨å¤§å°å‡ä¸€ï¼Œè°ƒç”¨ç»™å­ç±»çš„æ–¹æ³• afterNodeRemoval(node) å¹¶è¿”å›è¢«åˆ é™¤çš„ç»“ç‚¹</p><h3 id="putVal"><a href="#putVal" class="headerlink" title="putVal"></a>putVal</h3><p>putValæ–¹æ³•èƒ½å¤Ÿè¾…åŠ©HashMapä¸­çš„putæ–¹æ³•åŠå…¶ä»–æ–¹æ³•å‘æ•£åˆ—è¡¨ä¸­æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼Œå…¶ä¸­hashæ˜¯keyçš„æ•£åˆ—å€¼ï¼Œkeyï¼Œvalueä¸åšè§£é‡Šï¼ŒonlyIfAbsent ç”¨æ¥å®ç°è‹¥æ²¡æœ‰åˆ™æ·»åŠ çš„è¯­ä¹‰ï¼Œå¦‚æœä¸ºtrueï¼Œé‚£ä¹ˆåªæœ‰åœ¨keyæ²¡æœ‰æ˜ å°„å€¼æˆ–è€…æ˜ å°„äº†nullæ‰ä¼šæ‰§è¡Œæ·»åŠ æ“ä½œï¼Œevictæ˜¯ä¸ºHashMapå­ç±»çš„è®¾è®¡çš„ã€‚</p><p>putVal åœ¨æ‰§è¡Œæ’å…¥å‰ä¼šæ£€æŸ¥æ•£åˆ—è¡¨ï¼Œå¦‚æœè¡¨ä¸ºç©ºæˆ–è€…è¡¨çš„å¤§å°ç­‰äº0ï¼Œå°±ä¼šé€šè¿‡resize()æ–¹æ³•ç»™å‡ºä¸€ä¸ªåˆé€‚å¤§å°çš„æ•£åˆ—æ¡¶ã€‚</p><p>æ¥ä¸‹æ¥çš„æ“ä½œå¯ä»¥åŸºæœ¬å¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µ</p><ul><li><p>æƒ…å†µä¸€ï¼šhashå¯¹åº”çš„æ•£åˆ—æ¡¶ä¸å­˜åœ¨</p><p>æ­¤æ—¶åªéœ€è¦åœ¨æ•£åˆ—è¡¨å¯¹åº”ä½ç½®å­˜æ”¾ä¸€ä¸ªé“¾å¼ç»“ç‚¹å°±è¡Œ(å¯¹åº”çš„æ•£åˆ—æ¡¶ä¸å­˜åœ¨å°±å¯ä»¥è®¤ä¸ºkeyæ²¡æœ‰æ˜ å°„åˆ°value,ç¬¦åˆonlyIfAbsentè¯­ä¹‰)</p></li><li><p>æƒ…å†µäºŒï¼šhashå¯¹åº”çš„ç»“ç‚¹på­˜åœ¨</p><p>æ‰¾åˆ°å¯¹åº”keyçš„ç»“ç‚¹ï¼Œæ ¹æ®onlyIfAbsent å†³å®šæ˜¯å¦æ’å…¥å€¼ã€‚æ‰¾åˆ°ç»“ç‚¹å¯ä»¥åˆ†ä¸‰ç§å°æƒ…å†µï¼Œæ­¤æ—¶å®šä¹‰å¼•ç”¨eä»£è¡¨æœç´¢åˆ°çš„ç»“ç‚¹</p><ul><li><p>på°±æ˜¯å¯¹åº”keyçš„ç»“ç‚¹</p></li><li><p>pä¸æ˜¯å¯¹åº”keyçš„ç»“ç‚¹ï¼Œä½†æ˜¯pæ˜¯çº¢é»‘æ ‘ç»“ç‚¹</p><p>æ­¤æ—¶åœ¨çº¢é»‘æ ‘ä¸­æœç´¢å¯¹åº”keyçš„ç»“ç‚¹ï¼Œæ‰¾åˆ°äº†eèµ‹å€¼ä¸ºå¯¹åº”keyçš„ç»“ç‚¹ï¼Œå¦åˆ™æ‰§è¡Œçº¢é»‘æ ‘çš„æ’å…¥</p></li><li><p>pä¸æ˜¯å¯¹åº”keyçš„ç»“ç‚¹ï¼Œæ˜¯é“¾å¼ç»“ç‚¹</p><p>æ­¤æ—¶é“¾å¼æœç´¢å¯¹åº”keyçš„ç»“ç‚¹ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œeèµ‹å€¼ä¸ºå¯¹åº”keyç»“ç‚¹çš„ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±åªæ‰§è¡Œæ’å…¥ï¼Œæ‰§è¡Œæ’å…¥çš„æ—¶å€™æ£€æŸ¥æ˜¯å¦éœ€è¦å°†é“¾è¡¨æ ‘åŒ–</p></li></ul></li></ul><p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ—§çš„Node,å°±ä¼šèµ°åˆ°ä»£ç çš„æœ€åå‡ è¡Œï¼Œè‡ªå¢modCountï¼Œå¦‚æœå¤§å°è¶…è¿‡é™åº¦å€¼thresholdï¼Œåˆ™è¿›è¡Œresizeæ“ä½œï¼Œæ­¤æ—¶è¿”å›<br>nullã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">               <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//tabæŒ‡å‘æ•£åˆ—è¡¨ï¼Œåœ¨åé¢ä¼šèµ‹å€¼ä¸ºæ•£åˆ—è¡¨çš„å¤§å°ï¼Œhashå¯¹åº”çš„æ•£åˆ—æ¡¶(bucket)çš„ä½ç½®</span></span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i; </span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ€ resize()èƒ½å¤Ÿæ ¹æ®å½“å‰æ•£åˆ—è¡¨çš„æƒ…å†µç»™å‡ºä¸€ä¸ªåˆé€‚çš„æ•£åˆ—è¡¨ç»“æ„ï¼Œå¯èƒ½æ˜¯ç”±äºæ•£åˆ—è¡¨ä¸­å…ƒç´ è¿‡å¤šï¼Œæˆ–è€…æ˜¯æ•£åˆ—è¡¨è¿˜æ²¡æœ‰åˆå§‹åŒ–</p><p>afterNodeAccess(e)ï¼ŒafterNodeInsertion(evict) æ˜¯ç»™å­ç±»æä¾›çš„æ–¹æ³•ï¼ŒHashMapè‡ªèº«ä¸åšæ“ä½œã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMap(ä¸€)</title>
      <link href="/sunshine-carroll.github.io/2020/11/25/HashMap-%E4%B8%80/"/>
      <url>/sunshine-carroll.github.io/2020/11/25/HashMap-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>â€“ å‚è€ƒè‡ªç®—æ³•å¯¼è®ºç¬¬11ç« æ•£åˆ—è¡¨</p><p>â€“ HashMapç³»åˆ—åšå®¢ä¸ä¼šéå¸¸å…¨é¢çš„å…³æ³¨HashMapä½œä¸ºMapçš„è¡Œä¸º(Mapçš„æ‰€æœ‰æ–¹æ³•),æ›´å¤šçš„å…³æ³¨çš„æ˜¯ç»“æ„ï¼Œå®ç°ä¸Šçš„å†…å®¹ã€‚</p><p>â€“ å³æ˜¯åšå®¢ä¹Ÿæ˜¯å­¦ä¹ ç¬”è®°ï¼Œæ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿è¯„è®ºäº¤æµ</p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>åœ¨ç¼–å†™Javaç¨‹åºæ—¶ï¼Œé€šå¸¸éƒ½ä¼šç›´æ¥æˆ–è€…é—´æ¥çš„ç”¨åˆ°Javaæä¾›å®¹å™¨ç±»åº“å¦‚Collection,List,Set,Mapç­‰ã€‚HashMapæ˜¯Javaå®¹å™¨ç±»åº“ä¸­çš„ä¸€å‘˜ï¼Œå…¶å®ç°äº†Mapæ¥å£ã€‚åœ¨æä¾›Mapæ¥å£å®šä¹‰çš„åŠŸèƒ½çš„åŒæ—¶ï¼ŒHashMapä½¿ç”¨äº†æ•£åˆ—å¯»å€æŠ€æœ¯è®©ç¨‹åºä½¿ç”¨HashMapæ—¶å¯ä»¥å¿«é€Ÿçš„æœç´¢å…ƒç´ ã€‚è¿‡æ—©çš„çœ‹æºç å®¹æ˜“è¿·å¤±åœ¨æºä»£ç ä¸­ï¼Œè¿™ç¯‡åšå®¢å…ˆæ’‡å¼€å…·ä½“çš„Javaä»£ç ï¼Œä»‹ç»ä¸€äº›ç›´æ¥å¯»å€ï¼Œæ•£åˆ—å¯»å€çš„å†…å®¹ã€‚</p><blockquote><p>ğŸ€ è¿™ç¯‡åšå®¢ä¸ä¼šè§£é‡Šé“¾è¡¨ï¼Œçº¢é»‘æ ‘çš„å…·ä½“ç»“æ„å’ŒåŸç†ï¼Œè¿™ä¸æ˜¯æœ¬æ–‡çš„ä¸»æ—¨ï¼Œä¹Ÿä¸å½±å“é˜…è¯»ã€‚åªéœ€è¦çŸ¥é“é“¾è¡¨å’Œçº¢é»‘æ ‘éƒ½å¯ä»¥æä¾›åŸºæœ¬çš„æ’å…¥,æœç´¢,åˆ é™¤æ“ä½œå°±ğŸ‘Œ</p></blockquote><h2 id="ç›´æ¥å¯»å€è¡¨"><a href="#ç›´æ¥å¯»å€è¡¨" class="headerlink" title="ç›´æ¥å¯»å€è¡¨"></a>ç›´æ¥å¯»å€è¡¨</h2><p>è™½ç„¶åœ¨HashMapä½¿ç”¨äº†æ•£åˆ—å¯»å€æŠ€æœ¯ï¼Œä½†åœ¨ä»‹ç»æ•£åˆ—è¡¨ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸‹ç›´æ¥å¯»å€è¡¨ã€‚å¯¹æ¯”ç›´æ¥å¯»å€è¡¨å’Œæ•£åˆ—è¡¨ï¼Œä¼šæ›´æ˜ç™½ä¸ºä»€ä¹ˆåœ¨æŸäº›æƒ…å†µä¸‹è¦ç”¨æ•£åˆ—å¯»å€ã€‚ç›´æ¥å¯»å€è¡¨å’Œæ•£åˆ—è¡¨éƒ½æ”¯æŒä¸€äº›åŠ¨æ€é›†åˆæ“ä½œ (insert,delete,search),ä½†ä»ç»“æ„ä¸Šè¯´ç›´æ¥å¯»å€è¡¨æ›´ç®€å•ï¼Œå¿«é€Ÿã€‚</p><p>å‡å¦‚è¯´æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåŠ¨æ€é›†åˆS,$S âŠ† U$,å…¶ä¸­$U={1,2,\cdots m-1}$æ˜¯å…¨åŸŸï¼Œé›†åˆ$S$çš„æ¯ä¸ªå…ƒç´ éƒ½å–è‡ªå…¨åŸŸ$U$ä¸­çš„ä¸€ä¸ªå…³é”®å­—ã€‚ç›´æ¥å¯»å€è¡¨å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„ã€‚$T[0..m-1]$,æ•°ç»„ä¸­æ¯ä¸ªä½ç½®ç§°ä¸ºæ§½ã€‚å¯¹äºä¸€ä¸ªæ§½$T<a href="0%E2%89%A4k%3Cm">k</a>$ï¼Œ$T[k]$è¦ä¹ˆæŒ‡å‘å…¨åŸŸä¸­å…³é”®å­—ä¸ºkçš„ä¸€ä¸ªå…ƒç´ ï¼Œè¦ä¹ˆæŒ‡å‘NIL(è¡¨ç¤ºç©º,åŒnull)ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºç›´æ¥å¯»å€è¡¨çš„insert,delete,search</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure direct-address-search(T,k)</span><br><span class="line">return T[k];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure direct-address-insert(T,x)</span><br><span class="line">T[x.key] &#x3D; x</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure direct-address-delete(T,x)</span><br><span class="line">T[x.key] &#x3D; NIL</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸‰ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯$O(1)$ã€‚ç›´æ¥å¯»å€è¡¨çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯è¡¨çš„å¤§å°ç­‰äºåŠ¨æ€é›†åˆçš„å…¨åŸŸçš„å¤§å°ï¼Œåœ¨$ï½œUï½œ$è¾ƒå°çš„æ—¶å€™ï¼Œèƒ½å¤Ÿç®€æ´ç®€å•çš„æä¾›insert,delete,searchæ“ä½œã€‚ä½†å½“å…¨åŸŸUè¾ƒå¤§æ—¶ï¼Œç›´æ¥å¯»å€è¡¨çš„åŠ£åŠ¿å°±éå¸¸æ˜æ˜¾,ä½¿ç”¨ç›´æ¥å¯»å€è¡¨ï¼Œè¡¨çš„å¤§å°éœ€è¦å’Œå…¨åŸŸä¸€æ ·,è®¡ç®—æœºå¯èƒ½æ²¡æœ‰è¿™ä¹ˆå¤§çš„å†…å­˜æˆ–è€…ä¸åº”è¯¥ç”¨è¿™ä¹ˆå¤§çš„å†…å­˜ï¼Œè€Œä¸”åŠ¨æ€é›†åˆä¸­å‡ºç°çš„å…ƒç´ å¯èƒ½è¿œå°äºå…¨åŸŸçš„å¤§å°ï¼Œä¼šé€ æˆç©ºé—´çš„æµªè´¹ã€‚è¿™ä¸ªæ—¶å€™æ•£åˆ—è¡¨å°±èƒ½åº”å¯¹å…¨åŸŸæ¯”è¾ƒå¤§ï¼Œä½†è‡ªèº«å¤§å°ç›¸å¯¹è¾ƒå°çš„åŠ¨æ€é›†åˆã€‚</p><blockquote><p>ğŸ€ ç®—æ³•å¯¼è®ºæœ‰é“ä¹ é¢˜æ˜¯è¦æ±‚å†™å‡ºå…¨åŸŸå¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨ç›´æ¥å¯»å€çš„æ–¹å¼å®ç°ä¸€ä¸ªå­—å…¸ï¼Œé¿å…ä½¿ç”¨Â·å¾ˆå¤§çš„æ•°ç»„</p></blockquote><h2 id="æ•£åˆ—è¡¨"><a href="#æ•£åˆ—è¡¨" class="headerlink" title="æ•£åˆ—è¡¨"></a>æ•£åˆ—è¡¨</h2><p>æ•£åˆ—è¡¨ä½¿ç”¨æ•£åˆ—å¯»å€çš„æ–¹å¼ç¡®å®šå…ƒç´ å­˜æ”¾çš„ä½ç½®ï¼Œåœ¨ä½¿ç”¨ç›´æ¥å¯»å€æ–¹å¼æ—¶ï¼Œå…·æœ‰å…³é”®å­—kçš„å…ƒç´ è¢«æ”¾åœ¨T[k]ä¸­ï¼Œä½†åœ¨æ•£åˆ—å¯»å€æ–¹å¼ä¸‹ï¼Œå…·æœ‰å…³é”®å­—kçš„å…ƒç´ è¢«å­˜æ”¾åœ¨T[h(k)]ä¸­,hæ˜¯ä¸€ä¸ªæ•£åˆ—å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º<br>$$<br>h:U â†’ (1,2,\cdots,m-1)<br>$$<br>è¿™ä¸ªæ•£åˆ—å‡½æ•°å°†å…¨åŸŸUæ˜ å°„åˆ°æ•£åˆ—è¡¨$T[0..m-1]$ä¸Šã€‚ç›¸å¯¹ç›´æ¥å¯»å€æ–¹å¼ï¼Œè¿™ç§æ•£åˆ—å¯»å€æ–¹å¼åœ¨é¿å…ä½¿ç”¨å¤§æ•°ç»„çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†åˆ«çš„é—®é¢˜â€“æ•£åˆ—å†²çªã€‚å‡è®¾æœ‰ä¸¤ä¸ªå…³é”®å­—$k_1,k_2,h(k_1)=h(k_2)$è¿™ä¸ªæ—¶å€™å¸¦æœ‰å…³é”®å­—$k_1,k_2$çš„å…ƒç´ å°±ä¸çŸ¥åˆ°è¯¥æ”¾åœ¨å“ªäº†ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ•£åˆ—è¡¨çš„æ—¶å€™è¿˜éœ€è¦æœ‰è§£å†³æ•£åˆ—å†²çªçš„æ–¹æ¡ˆã€‚è§£å†³æ•£åˆ—å†²çªçš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæœ‰é“¾æ¥æ³•å’Œå¼€æ”¾å¯»å€æ³•ç­‰ï¼Œå…³äºå¼€å‘å¯»å€æ³•ï¼Œè¿™ä¸ªä¸æ˜¯HashMapé€‰æ‹©çš„æ–¹å¼ï¼Œä¹Ÿä¸åœ¨è¿™ç¯‡åšå®¢çš„ç›®çš„ä¹‹ä¸­ï¼Œå¯ä»¥å‚è€ƒç®—æ³•å¯¼è®º11.4èŠ‚ã€‚Javaä¹‹å‰ä½¿ç”¨é“¾æ¥æ³•è§£å†³æ•£åˆ—å†²çªï¼Œæ•£åˆ—å€¼ä¸€æ ·çš„å…³é”®å­—ä»£è¡¨çš„å…ƒç´ ä¼šå­˜æ”¾åœ¨åŒä¸€ä¸ªé“¾è¡¨ä¸­ã€‚Java8 ä¹‹åï¼Œåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶ï¼Œæ•£åˆ—è¡¨çš„æ§½ä½ä¼šå˜æ¢å­˜å‚¨ç»“æ„åœ¨çº¢é»‘æ ‘å’Œé“¾è¡¨ä¹‹é—´è½¬æ¢ã€‚</p><h3 id="ä½¿ç”¨é“¾æ¥æ³•è§£å†³å†²çªçš„ä¼ªä»£ç "><a href="#ä½¿ç”¨é“¾æ¥æ³•è§£å†³å†²çªçš„ä¼ªä»£ç " class="headerlink" title="ä½¿ç”¨é“¾æ¥æ³•è§£å†³å†²çªçš„ä¼ªä»£ç "></a>ä½¿ç”¨é“¾æ¥æ³•è§£å†³å†²çªçš„ä¼ªä»£ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-search(T,k)</span><br><span class="line">return search element from list T[h(k)] with key k;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-insert(T,x)</span><br><span class="line">insert at head of list T[h(x.key)]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-delete(T,x)</span><br><span class="line">delete x from  list T[h(x.key)]</span><br></pre></td></tr></table></figure><p>æ’å…¥æ—¶ï¼Œåªéœ€è¦æ ¹æ®å…ƒç´ xçš„å…³é”®å­—çš„æ•£åˆ—å€¼æ‰¾åˆ°ç›¸åº”çš„é“¾è¡¨ï¼Œç„¶åæ’å…¥åˆ°è¡¨å¤´å°±å¯ä»¥äº†ï¼Œæœç´¢ä¹Ÿæ˜¯åŒæ ·çš„æ–¹å¼æ‰¾åˆ°é“¾è¡¨ç„¶ååœ¨é“¾è¡¨ä¸­æœç´¢å…ƒç´ xã€‚åˆ é™¤æ—¶ç®—æ³•å¯¼è®ºå»ºè®®ä½¿ç”¨åŒé“¾è¡¨ï¼Œè¿™æ ·å…ƒç´ xçš„åˆ é™¤åªéœ€è¦$O(1)$çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ˜¯å®ç°æœ‰æ—¶å€™å¹¶ä¸å®Œå…¨æŒ‰ç…§ç®—æ³•æ‰€å»ºè®®çš„æ¥ã€‚HashMapä½¿ç”¨äº†å•é“¾è¡¨ä½œä¸ºæ•£åˆ—è¡¨çš„æ§½ã€‚</p><h3 id="æ•£åˆ—è¡¨çš„è´Ÿè½½å› å­-load-factor"><a href="#æ•£åˆ—è¡¨çš„è´Ÿè½½å› å­-load-factor" class="headerlink" title="æ•£åˆ—è¡¨çš„è´Ÿè½½å› å­(load factor)"></a>æ•£åˆ—è¡¨çš„è´Ÿè½½å› å­(load factor)</h3><p>æ•£åˆ—è¡¨æœ‰ä¸€ä¸ªè¡¡é‡æŒ‡æ ‡å«è´Ÿè½½å› å­ï¼Œå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸Šååº”æ•£åˆ—è¡¨çš„æ€§èƒ½ã€‚å‡è®¾æœ‰ä¸€ä¸ªå­˜æ”¾ç€nä¸ªå…ƒç´ ï¼Œå¤§å°ä¸ºmçš„æ•£åˆ—è¡¨Tï¼ŒTçš„è´Ÿè½½å› å­$\alpha = \frac{n}{m}$</p><p>é“¾æ¥æ³•è§£å†³å†²çªçš„æ•£åˆ—è¡¨æŸ¥æ‰¾æ€§èƒ½çš„æœ€åæƒ…å½¢æ˜¯æ‰€æœ‰åŠ¨æ€é›†åˆä¸­çš„å…ƒç´ è¢«æ•£åˆ—åˆ°äº†ä¸€ä¸ªæ§½ä¸­ï¼Œåœ¨è¿™ä¸ªæ§½ä¸­ç”Ÿæˆäº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ çš„é“¾è¡¨ï¼Œè¿™ä¸ªæ—¶å€™å°±æ•£åˆ—è¡¨çš„æŸ¥è¯¢é€Ÿåº¦ç›¸å½“äºåœ¨é“¾è¡¨ä¸­æŸ¥è¯¢ä¸€ä¸ªå…ƒç´ çš„é€Ÿåº¦ï¼Œé“¾è¡¨æŸ¥æ‰¾å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$</p><p>ä¸‹é¢ä»‹ç»ä¸¤ä¸ªæœ‰ç”¨çš„å®šç†ï¼Œå®ƒä»¬èƒ½å¤Ÿè¡¨ç¤ºè´Ÿè½½å› å­$\alpha$å¯¹æ•£åˆ—è¡¨æ€§èƒ½çš„å½±å“ï¼Œè¿™é‡Œå‡è®¾æ•£åˆ—å‡½æ•°æ˜¯$O(1)$çš„ï¼Œç®€å•å‡åŒ€æ•£åˆ—æ˜¯æŒ‡ç»™å®šä»»æ„ä¸€ä¸ªå…ƒç´ ï¼Œè¯¥å…ƒç´ èƒ½å¤Ÿç­‰å¯èƒ½çš„æ•£åˆ—åœ¨mä¸ªæ§½ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´å…ƒç´ å‡ºç°åœ¨äººä¸€ä¸ªæ§½ä¸­çš„æ¦‚ç‡éƒ½æ˜¯ç›¸ç­‰çš„ã€‚</p><blockquote><p>åœ¨ç®€å•å‡åŒ€æ•£åˆ—çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨é“¾æ¥æ³•è§£å†³å†²çªçš„æ•£åˆ—è¡¨ï¼Œä¸€æ¬¡æˆåŠŸæŸ¥æ‰¾æ‰€éœ€çš„å¹³å‡æ—¶é—´ä¸º$\Theta(1+\alpha)$</p><p>åœ¨ç®€å•å‡åŒ€æ•£åˆ—çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨é“¾æ¥æ³•è§£å†³å†²çªçš„æ•£åˆ—è¡¨ï¼Œå¤±è´¥æˆåŠŸæŸ¥æ‰¾æ‰€éœ€çš„å¹³å‡æ—¶é—´ä¸º$\Theta(1+\alpha)$</p></blockquote><blockquote><p>ğŸ€ æ¯”è¾ƒç›´æ¥å¯»å€è¡¨å’Œæ•£åˆ—è¡¨æ—¶ï¼Œæœ‰ä¸¤ä¸ªå› ç´ ï¼Œ$\frac{åŠ¨æ€é›†åˆå¤§å°}{å…¨åŸŸå¤§å°}å’Œå…¨åŸŸå¤§å°$ å½“åŠ¨æ€é›†åˆçš„å¤§å°æ¥è¿‘å…¨åŸŸçš„å¤§å°æ—¶ï¼Œæ•£åˆ—è¡¨çš„å®é™…å­˜å‚¨å¼€é”€ä¼šæ¯”ç›´æ¥å¯»å€è¡¨å¤§(ç”±äºä¸åŒçš„å­˜å‚¨ç»“æ„)ã€‚æ•£åˆ—è¡¨å¯ä»¥ä¸€å¼€å§‹é€‰ç”¨åˆé€‚çš„å¤§å°ï¼Œç„¶ååœ¨åŠ¨æ€é›†åˆä¸­å…ƒç´ è¿‡å¤šæ—¶åˆç†å¢åŠ æ•£åˆ—è¡¨çš„å¤§å°ï¼Œç„¶åå¯¹åŠ¨æ€é›†åˆä¸­çš„å…ƒç´ å†æ•£åˆ—ã€‚</p></blockquote><h3 id="ä½¿ç”¨çº¢é»‘æ ‘"><a href="#ä½¿ç”¨çº¢é»‘æ ‘" class="headerlink" title="ä½¿ç”¨çº¢é»‘æ ‘"></a>ä½¿ç”¨çº¢é»‘æ ‘</h3><p>å¦‚ä¸Šæ‰€è¿°ï¼Œé“¾æ¥æ³•è§£å†³å†²çªçš„æ•£åˆ—è¡¨æœ€åæƒ…å½¢å¤æ‚åº¦ç›¸å½“äºåœ¨é“¾è¡¨ä¸­æŸ¥æ‰¾,å…¶æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ã€‚å‡ºç°æœ€åæƒ…å½¢æ—¶ï¼Œæ‰€æœ‰å…ƒç´ éƒ½è¢«æ•£åˆ—åˆ°ä¸€ä¸ªæ§½ä¸­ï¼Œè¿™ä¸ªæ—¶å€™çš„æ•£åˆ—è¡¨çš„æŸ¥è¯¢æ€§èƒ½ä¾èµ–äºæ§½çš„ç»“æ„ã€‚ä¸ºäº†è®©æœ€åæƒ…å½¢ä¸‹æ•£åˆ—è¡¨ä¹Ÿèƒ½æœ‰è¾ƒå¥½çš„æ€§èƒ½ï¼Œå¯ä»¥é€‰æ‹©åˆé€‚æ§½çš„ç»“æ„ã€‚HashMapé€‰æ‹©åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶å°†æ§½ä»é“¾è¡¨è½¬å˜ä¸ºçº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘åœ¨æœ€åæƒ…å½¢ä¸‹ï¼Œä¹Ÿèƒ½ä¿è¯åŠ¨æ€é›†åˆçš„åŸºæœ¬æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º$O(lg\ n)$, HashMapä¸­çš„æ•£åˆ—è¡¨æ§½å¯èƒ½æ˜¯é“¾è¡¨ä¹Ÿå¯èƒ½æ˜¯çº¢é»‘æ ‘ï¼Œè¿™ç¯‡åšå®¢ä¸æè¿°æ··å’Œçš„æƒ…å†µã€‚ä¸‹é¢æ˜¯å®Œå…¨ä½¿ç”¨çº¢é»‘æ ‘è§£å†³å†²çªçš„æ•£åˆ—è¡¨çš„ä¼ªä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-search(T,k)</span><br><span class="line">return search element from red-black-tree T[h(k)] with key k;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-insert(T,x)</span><br><span class="line">insert at head of red-black-tree T[h(x.key)]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">procedure chained-address-delete(T,x)</span><br><span class="line">delete x from  red-black-tree T[h(x.key)]</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ€ ä»»æ„ä¸€ç§èƒ½å¤Ÿæä¾›insert,delete,search åŠ¨æ€é›†åˆç»“æ„éƒ½å¯ä»¥ä½œä¸ºæ•£åˆ—è¡¨çš„æ§½,çœ‹æ•£åˆ—è¡¨åº”ç”¨åœ¨ä»€ä¹ˆåœºæ™¯é‡Œï¼Œé€‚ä¸é€‚åˆï¼Œå¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¢é»‘æ ‘</title>
      <link href="/sunshine-carroll.github.io/2020/11/17/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
      <url>/sunshine-carroll.github.io/2020/11/17/%E7%BA%A2%E9%BB%91%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>çº¢é»‘æ ‘æ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ï¼Œå®ƒåœ¨æ¯ä¸ªç»“ç‚¹ä¸ŠåŠ ä¸Šä¸€ä¸ªå­˜å‚¨ä½è¡¨ç¤ºæ ‘çš„é¢œè‰²çº¢æˆ–è€…é»‘ã€‚è™½ç„¶éšæœºæ„å»ºäºŒå‰æœç´¢æ ‘çš„æœŸæœ›é«˜åº¦æ˜¯$O(lgn)$ï¼ŒäºŒå‰æœç´¢çš„åŸºæœ¬æ“ä½œsearch,insert,delete,predecessor,successor,maximum,minimum çš„è¿è¡Œæ—¶é—´æ˜¯$O(h)$ï¼ˆhæ˜¯æ ‘é«˜ï¼‰ï¼Œä½†æ˜¯äºŒå‰æœç´¢æ ‘å¹¶ä¸ä¸€å®šæ€»æ˜¯éšæœºæ„å»ºçš„ï¼Œè€Œä¸”éšç€æ’å…¥å’Œåˆ é™¤ï¼Œæ ‘é«˜çš„å˜åŒ–å¤æ‚ã€‚åœ¨æœ€åæƒ…å½¢ä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å’Œé“¾è¡¨çš„ä¸€æ ·ã€‚çº¢é»‘æ ‘å¯ä»¥ä¿è¯åœ¨æœ€è¯æƒ…å½¢ä¸‹åŸºæœ¬åŠ¨æ€é›†åˆæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(lgn)$</p><h2 id="çº¢é»‘æ ‘çš„æ€§è´¨"><a href="#çº¢é»‘æ ‘çš„æ€§è´¨" class="headerlink" title="çº¢é»‘æ ‘çš„æ€§è´¨"></a>çº¢é»‘æ ‘çš„æ€§è´¨</h2><h3 id="ç»“ç‚¹"><a href="#ç»“ç‚¹" class="headerlink" title="ç»“ç‚¹"></a>ç»“ç‚¹</h3><p>çº¢é»‘æ ‘çš„ç»“ç‚¹é™¤äº†leftï¼Œright,p,keyå››ä¸ªå±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰ç¬¬äº”ä¸ªå±æ€§colorï¼Œå®ƒå¯ä»¥æ˜¯red,æˆ–è€…blackã€‚å¦‚æœä¸€ä¸ªç»“ç‚¹æ²¡æœ‰å­ç»“ç‚¹ï¼Œæˆ–è€…çˆ¶ç»“ç‚¹ï¼Œé‚£ä¹ˆç»“ç‚¹æŒ‡é’ˆå±æ€§çš„å€¼ä¸ºNILã€‚è¿™é‡ŒæŠŠNILçœ‹ä½œçº¢é»‘æ ‘çš„å¶å­ç»“ç‚¹,æŠŠå¸¦æœ‰keyçš„ç»“ç‚¹çœ‹ä½œçº¢é»‘æ ‘çš„å†…éƒ¨ç»“ç‚¹ã€‚</p><h3 id="çº¢é»‘æ€§è´¨"><a href="#çº¢é»‘æ€§è´¨" class="headerlink" title="çº¢é»‘æ€§è´¨"></a>çº¢é»‘æ€§è´¨</h3><ol><li>æ¯ä¸ªç»“ç‚¹æˆ–è€…æ˜¯çº¢è‰²æˆ–è€…æ˜¯é»‘è‰²ï¼Œæ²¡æœ‰å…¶ä»–é¢œè‰²</li><li>æ ¹ç»“ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¶å­ç»“ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¦‚æœä¸€ä¸ªç»“ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆè¯¥ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¯¹äºæ¯ä¸ªç»“ç‚¹ï¼Œè¯¥ç»“ç‚¹åˆ°åä»£å¶å­ç»“ç‚¹çš„æ¯ä¸€æ¡ç®€å•è·¯å¾„å‡æœ‰ç›¸åŒçš„é»‘è‰²ç»“ç‚¹</li></ol><blockquote><p>ğŸ€ ç®—æ³•å¯¼è®ºä¸­å®šä¹‰T.nilï¼Œè¡¨ç¤ºå…¬ç”¨çš„å¶å­ç»“ç‚¹ï¼Œå› ä¸ºçº¢é»‘æ ‘å¶å­ç»“ç‚¹é™¤äº†å…¶colorå±æ€§ï¼Œå…¶ä½™å±æ€§éƒ½ä¸é‡è¦ã€‚ç±»ä¼¼é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„æƒ¯ç”¨æ³•ï¼Œå®šä¹‰ç©ºå¯¹è±¡æ¥ä»£æ›¿nullã€‚</p></blockquote><h3 id="é»‘é«˜"><a href="#é»‘é«˜" class="headerlink" title="é»‘é«˜"></a>é»‘é«˜</h3><blockquote><p>ä»æŸä¸ªç»“ç‚¹å‡ºå‘(ä¸åŒ…å«è¯¥ç»“ç‚¹),åˆ°å¶å­ç»“ç‚¹çš„ä»»æ„ä¸€æ¡ç®€å•è·¯å¾„ä¸Šçš„é»‘è‰²ç»“ç‚¹æ•°ã€‚ç”±äºçº¢é»‘æ ‘çš„æ€§è´¨ï¼Œå¯¹äºæ¯ä¸ªç»“ç‚¹ï¼Œè¯¥ç»“ç‚¹åˆ°åä»£å¶å­ç»“ç‚¹çš„æ¯ä¸€æ¡ç®€å•è·¯å¾„å‡æœ‰ç›¸åŒçš„é»‘è‰²ç»“ç‚¹ã€‚æ‰€ä»¥ä¸€ä¸ªç»“ç‚¹çš„é»‘é«˜æ—¶ç¡®å®šçš„ï¼Œçº¢é»‘æ ‘çš„é»‘é«˜å®šä¹‰ä¸ºæ ¹ç»“ç‚¹çš„é»‘é«˜</p></blockquote><h3 id="å¼•ç†1"><a href="#å¼•ç†1" class="headerlink" title="å¼•ç†1"></a>å¼•ç†1</h3><blockquote><p>ä¸€é¢—å…·æœ‰nä¸ªç»“ç‚¹çš„çº¢é»‘æ ‘ï¼Œå…¶é«˜åº¦æœ€å¤šä¸º2lg(n+1)ã€‚ </p></blockquote><p>è¯æ˜ï¼š</p><p>å…ˆè¯æ˜ä»»æ„ä¸€é¢—ä»¥xä¸ºæ ¹çš„å­æ ‘è‡³å°‘åŒ…å«$2^{bh(x)}-1$ä¸ªå†…éƒ¨ç»“ç‚¹ã€‚è¿™é‡Œç”¨pè¡¨ç¤ºå†…éƒ¨ç»“ç‚¹æ ‘</p><p>åŸºç¡€æ­¥éª¤: xæ˜¯å¶å­ç»“ç‚¹(NIL)çš„æ—¶å€™ï¼Œ$bh(x) = 0,p=0 .\  y&lt;=2^0-1æˆç«‹$</p><p>å½’çº³æ­¥éª¤: å¦‚æœ$x_1,x_2$æ˜¯çº¢é»‘æ ‘å­æ ‘çš„æ ¹ç»“ç‚¹,xæ˜¯$x_1,x_2$çš„çˆ¶ç»“ç‚¹ $p_1 &lt;= 2^{bh(x_1)}-1$,,$p_2 &lt;= 2^{bh(x_2)}-1$</p><p>æ ¹ç»“ç‚¹çš„é»‘é«˜ä¸º$bh(x)$ï¼Œxæ¯ä¸ªå­ç»“ç‚¹çš„é»‘é«˜ä¸º$bh(x)$(å½“è¯¥å­ç»“ç‚¹ä¸ºçº¢)æˆ–è€…$bh(x)-1$(å½“è¯¥å­ç»“ç‚¹ä¸ºé»‘)<br>$$<br>\begin{align}<br>p&amp;=p_1+p_2+1\<br>&amp;â‰¤2^{bh(x_1)}-1 + 2^{bh(x_2)}-1+1 \<br>&amp;â‰¤2^{bh(x)-1}-1+2^{bh(x)-1}-1+1 \tag{è¿™æ­¥ä¹Ÿæ²¡çœ‹æ‡‚ï¼Œåé¢çœ‹}\<br>&amp;=2^{bh(x)}-1<br>\end{align}<br>$$<br>æ‰€ä»¥ä»»æ„ä¸€é¢—ä»¥xä¸ºæ ¹çš„å­æ ‘è‡³å°‘åŒ…å«$2^{bh(x)}-1$ä¸ªå†…éƒ¨ç»“ç‚¹</p><p>æ ¹æ®æ€§è´¨4ï¼Œå¦‚æœä¸€ä¸ªç»“ç‚¹ä¸ºçº¢ï¼Œé‚£ä¹ˆè¯¥ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹ä¸ºé»‘ã€‚è€ƒè™‘çº¢é»‘æ ‘ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„ä»»æ„ä¸€æ¡ç®€å•è·¯å¾„ï¼Œæ ¹ç»“ç‚¹ï¼Œå¶å­ç»“ç‚¹å¿…å®šä¸ºé»‘è‰²ï¼Œå¦‚æœè¯¥ç®€å•è·¯å¾„æœ‰nä¸ªçº¢è‰²ç»“ç‚¹ï¼Œé‚£ä¹ˆè‡³å°‘æœ‰nä¸ªé»‘è‰²ç»“ç‚¹ã€‚æ‰€ä»¥çº¢é»‘æ ‘çš„æ ‘é«˜$hâ‰¤2bh(x)$</p><p>æ‰€ä»¥<br>$$<br>\begin{align}<br>n&amp;â‰¥2^{h/2}-1\<br>h&amp;â‰¤2lg(n+1)<br>\end{align}<br>$$</p><h2 id="äºŒå‰æœç´¢æ ‘çš„æ—‹è½¬"><a href="#äºŒå‰æœç´¢æ ‘çš„æ—‹è½¬" class="headerlink" title="äºŒå‰æœç´¢æ ‘çš„æ—‹è½¬"></a>äºŒå‰æœç´¢æ ‘çš„æ—‹è½¬</h2><p>ä¸‹é¢æè¿°èƒ½å¤Ÿä¿æŒäºŒå‰æœç´¢æ ‘æ€§è´¨çš„å±€éƒ¨æ“ä½œï¼Œå·¦æ—‹å’Œå³æ—‹ã€‚<br></p><p>ä¸‹å›¾æ˜¯å·¦æ—‹å³æ—‹çš„è½¬åŒ–å›¾ï¼Œå·¦æ—‹çš„æ—¶å€™å…¶ä¸­$\alpha,\beta,\gamma$æ˜¯ä»»æ„å­æ ‘ï¼Œx,yä¸ºäºŒå‰æœç´¢æ ‘ä¸­çš„ç»“ç‚¹ï¼Œxå¯ä»¥ä¸ºäºŒå‰æœç´¢æ ‘ä¸­ä»»æ„å³å­©å­ä¸ä¸ºNILçš„ç»“ç‚¹(å¦‚æœxçš„å³å­©å­æ˜¯NIL,é‚£ä¹ˆæ—‹è½¬åï¼Œyæˆä¸ºxçš„çˆ¶ç»“ç‚¹ï¼Œè¿åäºŒå‰æœç´¢æ ‘çš„åŸºæœ¬æ€§è´¨)ï¼Œå³æ—‹çš„æ—¶å€™ï¼Œyåº”è¯¥æ˜¯äºŒå‰æœç´¢æ ‘ä¸­ä»»æ„ä¸€ä¸ªå·¦å­©å­ä¸ä¸ºNILçš„ç»“ç‚¹</p><p><img src="/sunshine-carroll.github.io/2020/11/17/%E7%BA%A2%E9%BB%91%E6%A0%91/rotate.png" alt="rotate"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">procedure left-rotate(T,x)</span><br><span class="line">y &#x3D; x.right </span><br><span class="line">x.right &#x3D; y.left </span><br><span class="line">if y.left !&#x3D; NIL </span><br><span class="line">y.left.p &#x3D;  x</span><br><span class="line">y.p &#x3D; x.p</span><br><span class="line">if x.p &#x3D;&#x3D; NIL </span><br><span class="line">T.root &#x3D; y</span><br><span class="line">else if x &#x3D;&#x3D; x.p.left</span><br><span class="line">x.p.left &#x3D; y</span><br><span class="line">else</span><br><span class="line">x.p.right &#x3D; y</span><br><span class="line">x.p &#x3D; y</span><br><span class="line">y.left &#x3D; x</span><br></pre></td></tr></table></figure><p>ç¬¬2è¡Œ æ‰¾åˆ°xçš„å³ç»“ç‚¹y ã€‚ç¬¬3ï½5è¡Œå¤„ç†betaï¼Œé¦–å…ˆä¿®æ”¹xçš„å³ç»“ç‚¹ä¸ºbeta,ç„¶åæ ¹æ®betaæ˜¯ä¸æ˜¯NIL,å¤„ç†æ˜¯å¦ä¿®æ”¹betaçš„çˆ¶ç»“ç‚¹ã€‚ç¬¬6è¡Œå¤„ç†yçš„çˆ¶ç»“ç‚¹ã€‚ç¬¬7åˆ°12è¡Œæ ¹æ®xä¸x.pçš„å…³ç³»åšç›¸åº”å¤„ç†ï¼Œæœ€åä¸¤è¡Œåˆ†åˆ«ä¿®æ”¹xçš„çˆ¶ç»“ç‚¹ä¸ºy,yçš„å·¦å­æ ‘ä¸ºx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">procedure right-rotate(T,y)</span><br><span class="line">x &#x3D; y.left</span><br><span class="line">y.left &#x3D; x.right</span><br><span class="line">if x.right !&#x3D; NIL</span><br><span class="line">x.right.p &#x3D; y</span><br><span class="line">x.p &#x3D; y.p</span><br><span class="line">if y.p &#x3D; NIL</span><br><span class="line">T.root &#x3D; x</span><br><span class="line">else if y &#x3D;&#x3D; y.p.left</span><br><span class="line">y.p.left &#x3D; x</span><br><span class="line">else </span><br><span class="line">y.p.right &#x3D; y</span><br><span class="line">y.p &#x3D; x</span><br><span class="line">x.left &#x3D; y</span><br></pre></td></tr></table></figure><h2 id="çº¢é»‘æ ‘çš„æ’å…¥"><a href="#çº¢é»‘æ ‘çš„æ’å…¥" class="headerlink" title="çº¢é»‘æ ‘çš„æ’å…¥"></a>çº¢é»‘æ ‘çš„æ’å…¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">procedure rb-insert(T,z)</span><br><span class="line">y &#x3D; NIL</span><br><span class="line">x &#x3D; T.root</span><br><span class="line">while x !&#x3D; NIL</span><br><span class="line">y &#x3D; x</span><br><span class="line">if z.key â‰¤ x.key</span><br><span class="line">x &#x3D; x.left</span><br><span class="line">else</span><br><span class="line">x &#x3D; x.right</span><br><span class="line">if y &#x3D; NIL</span><br><span class="line">T.root &#x3D; z</span><br><span class="line">else if z.key &lt; y.key</span><br><span class="line">y.left &#x3D; z</span><br><span class="line">else</span><br><span class="line">y.right &#x3D; z</span><br><span class="line">z.left &#x3D; NIL</span><br><span class="line">z.right &#x3D; NIL</span><br><span class="line">z.color &#x3D; red</span><br><span class="line">rb-insert-fixup(T,z)</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥ç»“ç‚¹æ—¶çº¢é»‘æ€§è´¨çš„ç»´æŠ¤"><a href="#æ’å…¥ç»“ç‚¹æ—¶çº¢é»‘æ€§è´¨çš„ç»´æŠ¤" class="headerlink" title="æ’å…¥ç»“ç‚¹æ—¶çº¢é»‘æ€§è´¨çš„ç»´æŠ¤"></a>æ’å…¥ç»“ç‚¹æ—¶çº¢é»‘æ€§è´¨çš„ç»´æŠ¤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">procedure rb-insert-fixup(T,z)</span><br><span class="line">while z.p.color &#x3D;&#x3D; red</span><br><span class="line">if z.p &#x3D; z.p.p.left</span><br><span class="line">y &#x3D; y.p.p.right</span><br><span class="line">if y.color &#x3D;&#x3D; red</span><br><span class="line">z.p.color &#x3D; black</span><br><span class="line">y.color &#x3D; black</span><br><span class="line">z.p.p.color &#x3D; red</span><br><span class="line">z &#x3D; z.p.p</span><br><span class="line">else </span><br><span class="line">if z &#x3D; z.p.right</span><br><span class="line">z &#x3D; z.p</span><br><span class="line">left-rotate(T,z)</span><br><span class="line">z.p.color &#x3D; black</span><br><span class="line">z.p.p.color &#x3D; red</span><br><span class="line">right-rotate(T,z.p.p)</span><br><span class="line">else</span><br><span class="line">y &#x3D; z.p.p.left</span><br><span class="line">if y.color &#x3D;&#x3D; red</span><br><span class="line">z.p.color &#x3D; black</span><br><span class="line">y.color &#x3D; black</span><br><span class="line">z.p.p.color &#x3D;  red</span><br><span class="line">z &#x3D; z.p.p</span><br><span class="line">else </span><br><span class="line">if z &#x3D; z.p.left </span><br><span class="line"> z &#x3D; z.p</span><br><span class="line"> right-rotate(T,z)</span><br><span class="line">      z.p.color &#x3D; black</span><br><span class="line">      z.p.p.color &#x3D; red</span><br><span class="line">      left-rotate(T,z.p.p)</span><br><span class="line">T.root.color &#x3D; black</span><br></pre></td></tr></table></figure><p>è¯æ˜ $rb-insert-fixup(T,z)$ åœ¨æ¯æ¬¡å¾ªç¯ä¹‹å‰éƒ½æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªå¾ªç¯ä¸å˜å¼ï¼Œå¹¶ä¸”å¾ªç¯ç»“æŸåï¼Œæ ‘Tä¿æŒçº¢é»‘æ€§è´¨</p><ul><li>ç»“ç‚¹zæ—¶çº¢è‰²çš„              $(1)$</li><li>å¦‚æœz.pæ˜¯æ ¹ç»“ç‚¹ï¼Œé‚£ä¹ˆz.pæ˜¯é»‘è‰²çš„         $(2)$</li><li>å¦‚æœæœ‰ä»»ä½•çº¢é»‘æ€§è´¨è¢«ç ´åï¼Œåˆ™åšå¤šåªæœ‰ä¸€æ¡è¢«ç ´åï¼Œæˆ–è€…æ˜¯æ€§è´¨2.æˆ–è€…æ˜¯æ€§è´¨4ã€‚æ€§è´¨2è¢«ç ´åçš„åŸå› æ˜¯ï¼Œzæ˜¯æ ¹ç»“ç‚¹ä¸”æ˜¯çº¢è‰²ç»“ç‚¹ï¼Œå¦‚æœæ€§è´¨4è¢«ç ´åé‚£ä¹ˆæ˜¯å› ä¸ºzï¼Œz.péƒ½æ˜¯çº¢è‰²çš„ ã€‚         $(3)$</li></ul><blockquote><p>ğŸ€ ç”±äºæ•´ä¸ªæ’å…¥ç®—æ³•ä¸ä¼šæ’å…¥éçº¢é»‘è‰²ä¹‹å¤–çš„ç»“ç‚¹ï¼Œå¶å­ç»“ç‚¹æ˜¯NILé»‘è‰²çš„ï¼Œæ€§è´¨1ï¼Œ3æ˜¾ç„¶æˆç«‹</p></blockquote><p>è¯æ˜</p><p>è¯æ˜å¾ªç¯ä¸å˜å¼ä¸ºçœŸå¯ä»¥åˆ†ä¸¤æ­¥ï¼Œä¸€æ˜¯è¯æ˜å¾ªç¯å¼€å§‹å‰ï¼Œå¾ªç¯ä¸å˜å¼ä¸ºçœŸï¼Œæ‰§è¡Œsä¹‹åï¼Œå¾ªç¯ä¸å˜å¼ä¸ºçœŸã€‚</p><ul><li><p>å¼€å§‹å‰</p><p>åœ¨è°ƒç”¨æ–°æ’å…¥çš„ç»“ç‚¹æ€»æ˜¯çº¢è‰²çš„ã€‚æ¡ä»¶$(1)$æˆç«‹</p><p>å¦‚æœz.pä¸ºæ ¹ï¼Œç”±äºåœ¨è°ƒç”¨$rb-insert-fixup(T,z)$ ä¹‹å‰ï¼Œz.pæ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥æ¡ä»¶$(2)$æˆç«‹</p><p>å¦‚æœçº¢é»‘æ ‘çš„æ€§è´¨2 æ ¹ç»“ç‚¹æ˜¯é»‘è‰²çš„ è¢«è¿åï¼Œé‚£ä¹ˆåªå¯èƒ½æ˜¯å› ä¸ºæ’å…¥çš„çº¢è‰²ç»“ç‚¹zæ˜¯æ ¹ç»“ç‚¹ã€‚è¿™ä¸ªæ—¶å€™</p><p>å¦‚æœè¿åäº†æ€§è´¨4ï¼Œç”±äºzç»“ç‚¹çš„å·¦å³å­ç»“ç‚¹éƒ½æ˜¯NILé»‘è‰²çš„ï¼Œé‚£ä¹ˆåªå¯èƒ½æ˜¯z.pæ˜¯çº¢è‰²çš„ã€‚</p><p>æ’å…¥çº¢è‰²ç»“ç‚¹ä¸ä¼šæ”¹å˜ä»»æ„è·¯å¾„çš„é»‘é«˜ï¼Œæ‰€ä»¥æ€§è´¨5æ˜¯æˆç«‹çš„</p><p>æ‰€ä»¥æ¡ä»¶$(3)$æˆç«‹</p></li><li><p>å¾ªç¯ç»“æŸå</p><p>å¾ªç¯åœ¨z.p.color == black æ—¶ç»ˆæ­¢ï¼Œæ­¤æ—¶ä¸å¯èƒ½æ˜¯æ€§è´¨4è¢«ç ´åï¼Œé‚£ä¹ˆè¢«ç ´åçš„æ€§è´¨åªèƒ½æ˜¯æ€§è´¨2ï¼Œç®—æ³•çš„æœ€åä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ‰€ä»¥åœ¨å¾ªç¯ç»“æŸåæ ‘Tç»´æŠ¤çº¢é»‘æ€§è´¨</p></li><li><p>å¾ªç¯æ‰§è¡Œæ—¶:</p><p>è¿™é‡Œå¯ä»¥åˆ†6ä¸­æƒ…å†µï¼ŒæŒ‰ç…§zçš„çˆ¶ç»“ç‚¹æ˜¯ç¥–çˆ¶ç»“ç‚¹çš„å·¦ç»“ç‚¹è¿˜æ˜¯å³ç»“ç‚¹å¯ä»¥åˆ†ä¸ºä¸¤ç±»å¯¹ç§°3ä¸­æƒ…å†µã€‚ç®—æ³•å¯¼è®ºè®¨è®ºäº†zçš„çˆ¶ç»“ç‚¹æ˜¯ç¥–çˆ¶ç»“ç‚¹çš„å·¦å­©å­ã€‚è¿™é‡Œè®¨è®ºzçš„çˆ¶ç»“ç‚¹æ˜¯ç¥–çˆ¶ç»“ç‚¹çš„å³å­©å­ï¼Œå½“ç„¶æ²¡æœ‰ç®—æ³•å¯¼è®ºå®Œç¾ï¼Œå¯¼è®ºçš„å›¾æ›´å…¨ï¼Œå»ºè®®çœ‹ç®—æ³•å¯¼è®ºã€‚</p><ul><li>å½“zçš„å”ç»“ç‚¹y(ä¹Ÿå°±æ˜¯z.pçš„å…„å¼Ÿç»“ç‚¹)ä¸ºçº¢è‰²æ—¶ï¼Œå°†z.på’Œyéƒ½ç€è‰²ä¸ºé»‘è‰²ï¼Œå¹¶æŠŠç¥–çˆ¶æ¥ç‚¹ç€è‰²ä¸ºçº¢ç»´æŠ¤æ€§è´¨5(ç¥–çˆ¶ç»“ç‚¹å¿…å®šæ˜¯é»‘è‰²çš„å¦åˆ™å°±è¿åæ€§è´¨4)ï¼Œç„¶åzæŒ‡å‘z.p.pè¿›è¡Œä¸‹ä¸€æ¬¡è¿­ä»£</li><li>å½“zçš„å”ç»“ç‚¹ä¸ºé»‘è‰²,ä¸”zæ˜¯çˆ¶ç»“ç‚¹çš„å·¦ç»“ç‚¹ï¼Œå¯¹z.pè¿›è¡Œä¸€æ¬¡å³æ—‹(è¿™ä¸ªæ“ä½œä¸ä¼šå¤šè¿åä¸€ä¸ªæ€§è´¨)å˜æˆä¸‹é¢ä¸€ç§æƒ…å†µ</li><li>å½“zçš„å”ç»“ç‚¹ä¸ºé»‘è‰²ï¼Œä¸”zæ—¶çˆ¶ç»“ç‚¹çš„å³ç»“ç‚¹ï¼Œå°†z.pç€è‰²ä¸ºé»‘è‰²ï¼Œè®²z.p.pç€è‰²ä¸ºçº¢è‰²ï¼Œç„¶åå¯¹z.p.påšä¸€æ¬¡å·¦æ—‹</li></ul></li></ul><blockquote><p>ğŸ€ å‡è®¾æœ‰ä¸‹è¿°ä¸€æ®µç¨‹åºï¼Œå¾ªç¯ä¸å˜å¼æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œç¨‹åºæ®µSæ—¶éƒ½ä¿æŒä¸ºçœŸçš„æ–­è¨€ã€‚æˆ–è€…è¯´å¦‚æœéœå°”ä¸‰å…ƒç»„$(p \and condition){s}p$ä¸ºçœŸæ—¶ï¼Œé‚£ä¹ˆè¿™é‡Œ$p$å°±æ˜¯ä¸‹è¿°ç¨‹åºæ®µçš„å¾ªç¯ä¸å˜å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">S</span><br></pre></td></tr></table></figure></blockquote><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2>]]></content>
      
      
      <categories>
          
          <category> data structure </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æœç´¢æ ‘</title>
      <link href="/sunshine-carroll.github.io/2020/11/16/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"/>
      <url>/sunshine-carroll.github.io/2020/11/16/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h2 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h2><p>äºŒå‰æœç´¢æ ‘æ˜¯ä¸€ç§äºŒå‰æ ‘ï¼Œä»–çš„ç»“ç‚¹é™¤äº†keyå’Œå«æ˜Ÿæ•°æ®ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬left,right,p,åˆ†åˆ«æŒ‡å‘ç»“ç‚¹çš„å·¦å­æ ‘ï¼Œå³å­æ ‘å’Œçˆ¶ç»“ç‚¹ï¼Œå¦‚æœå­æ ‘æˆ–è€…çˆ¶ç»“ç‚¹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå¯¹åº”çš„å±æ€§ä¸ºNILã€‚æ ¹èŠ‚ç‚¹æ˜¯å”¯ä¸€ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ä¸ºNILçš„ç»“ç‚¹ã€‚</p><p>äºŒå‰æœç´¢æ ‘çš„ä»»æ„åŠ¨æ€é›†åˆæ“ä½œ search,insert,delete,maximum,minimum,successor,predecessorçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º$O(h)$</p><p>ä¸€é¢—å…·æœ‰nä¸ªä¸åŒå…³é”®å­—éšæœºæ„å»ºçš„äºŒå‰æœç´¢æ ‘çš„æœŸæœ›é«˜åº¦ä¸ºO(lg n)ã€‚å…³é”®å­—é›†åˆçš„æ¯ä¸€ä¸ªç”Ÿæˆæ’åˆ—å‡ºç°çš„æ¦‚ç‡éƒ½æ˜¯ç­‰å¯èƒ½æ€§çš„</p><h2 id="äºŒå‰æœç´¢æ ‘çš„å…³é”®è¯å­˜å‚¨"><a href="#äºŒå‰æœç´¢æ ‘çš„å…³é”®è¯å­˜å‚¨" class="headerlink" title="äºŒå‰æœç´¢æ ‘çš„å…³é”®è¯å­˜å‚¨"></a>äºŒå‰æœç´¢æ ‘çš„å…³é”®è¯å­˜å‚¨</h2><p>å‡è®¾xæ˜¯äºŒå‰æœç´¢æ ‘ä¸­çš„ä¸€ä¸ªç»“ç‚¹ï¼Œå¦‚æœyæ˜¯xå·¦å­æ ‘çš„ä¸€ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆy.key &lt;= x.key,å¦‚æœyæ˜¯xçš„å³å­æ ‘çš„ä¸€ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆ<br>y.key&gt;=x.key</p><h2 id="äºŒå‰æœç´¢æ ‘Tçš„ä¸€äº›æ€§è´¨"><a href="#äºŒå‰æœç´¢æ ‘Tçš„ä¸€äº›æ€§è´¨" class="headerlink" title="äºŒå‰æœç´¢æ ‘Tçš„ä¸€äº›æ€§è´¨"></a>äºŒå‰æœç´¢æ ‘Tçš„ä¸€äº›æ€§è´¨</h2><ul><li>$h â‰¥ \lfloor n \rfloor$ hæ˜¯Tçš„é«˜åº¦ï¼Œnæ˜¯ç»“ç‚¹æ•°</li></ul><h2 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h2><p>äºŒå‰æœç´¢æ ‘m=2çš„æœ‰åºæ ¹æ ‘</p><p>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†å®šä¹‰ä¸º: å‡è®¾T æ˜¯ä»¥rä¸ºæ ¹çš„äºŒå‰æœç´¢æ ‘ï¼Œå¦‚æœTåªå«æ ‘æ ¹rï¼Œé‚£ä¹ˆræ˜¯Tçš„ä¸€ä¸ªä¸­åºéå†ã€‚å¦åˆ™è®¾$T_1,T_2$æ˜¯ä»å·¦åˆ°å³çš„å­æ ‘ï¼Œä¸­åºéå†$T_1$å†è®¿é—®r,ç„¶åä¸­åºéå†$T_2$ã€‚ä¸‹é¢æ˜¯äºŒå‰æœç´¢æ ‘ä¸­åºéå†çš„ä¼ªä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">procedure inorder-tree-work(x)</span><br><span class="line">if x !&#x3D; NIL</span><br><span class="line">inorder-tree-work(x.left)</span><br><span class="line">print(x.key)</span><br><span class="line">inorder-tree-work(x.right)</span><br></pre></td></tr></table></figure><h2 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h2><h3 id="é€’å½’ç‰ˆæœ¬"><a href="#é€’å½’ç‰ˆæœ¬" class="headerlink" title="é€’å½’ç‰ˆæœ¬"></a>é€’å½’ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">procedure tree-search(x,k)</span><br><span class="line">if x !&#x3D; NIL or k &#x3D; x.key</span><br><span class="line">return x</span><br><span class="line">if k &lt; x.key </span><br><span class="line">return tree-search(x.left,k)</span><br><span class="line">return tree-search(x.right,k)</span><br></pre></td></tr></table></figure><h3 id="è¿­ä»£ç‰ˆæœ¬"><a href="#è¿­ä»£ç‰ˆæœ¬" class="headerlink" title="è¿­ä»£ç‰ˆæœ¬"></a>è¿­ä»£ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">procedure iterative-tree-search(x,k)</span><br><span class="line">while x !&#x3D; NIL and k !&#x3D; x.key</span><br><span class="line">if k &lt; x.key</span><br><span class="line">x &#x3D; x.left</span><br><span class="line">else</span><br><span class="line">x &#x3D; x.right</span><br><span class="line">return x</span><br></pre></td></tr></table></figure><h2 id="æœ€å°å€¼"><a href="#æœ€å°å€¼" class="headerlink" title="æœ€å°å€¼"></a>æœ€å°å€¼</h2><p>###è¿­ä»£ç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">procedure iterative-tree-minimum(x)</span><br><span class="line">while x.left !&#x3D; NIL</span><br><span class="line">x &#x3D; x.left</span><br><span class="line">return x</span><br></pre></td></tr></table></figure><h3 id="é€’å½’ç‰ˆæœ¬-1"><a href="#é€’å½’ç‰ˆæœ¬-1" class="headerlink" title="é€’å½’ç‰ˆæœ¬"></a>é€’å½’ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">procedure tree-minimum(x)</span><br><span class="line">if x.left &#x3D; NIL</span><br><span class="line">return x</span><br><span class="line">else</span><br><span class="line">return tree-minimum(x.left)</span><br></pre></td></tr></table></figure><h2 id="æœ€å¤§å€¼"><a href="#æœ€å¤§å€¼" class="headerlink" title="æœ€å¤§å€¼"></a>æœ€å¤§å€¼</h2><h3 id="è¿­ä»£ç‰ˆæœ¬-1"><a href="#è¿­ä»£ç‰ˆæœ¬-1" class="headerlink" title="è¿­ä»£ç‰ˆæœ¬"></a>è¿­ä»£ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">procedure iterative-tree-maximum(x)</span><br><span class="line">while x.right !&#x3D; NIL</span><br><span class="line">x &#x3D; x.right</span><br><span class="line">return x</span><br></pre></td></tr></table></figure><h3 id="é€’å½’ç‰ˆæœ¬-2"><a href="#é€’å½’ç‰ˆæœ¬-2" class="headerlink" title="é€’å½’ç‰ˆæœ¬"></a>é€’å½’ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">procedure tree-maximum(x)</span><br><span class="line">if x.right &#x3D; NIL</span><br><span class="line">return x</span><br><span class="line">else</span><br><span class="line">return tree-right(x.left)</span><br></pre></td></tr></table></figure><h2 id="åç»§"><a href="#åç»§" class="headerlink" title="åç»§"></a>åç»§</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">procedure successor(x)</span><br><span class="line">if x.right !&#x3D; NIL</span><br><span class="line">return tree-mininum(x)</span><br><span class="line">y &#x3D; x.p</span><br><span class="line">while y !&#x3D; NIL and x &#x3D;&#x3D; y.right</span><br><span class="line">x &#x3D; y</span><br><span class="line">y &#x3D; y.p</span><br><span class="line">return y</span><br></pre></td></tr></table></figure><h2 id="å‰é©±"><a href="#å‰é©±" class="headerlink" title="å‰é©±"></a>å‰é©±</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">procedure predecessor(x)</span><br><span class="line">if x.left !&#x3D; NIL</span><br><span class="line">return tree-maximum(x)</span><br><span class="line">y &#x3D; x.p</span><br><span class="line">while y !&#x3D; NIL and x &#x3D;&#x3D; y.left</span><br><span class="line"> x &#x3D; y</span><br><span class="line"> y &#x3D;&#x3D; y.p</span><br><span class="line">return y</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">procedure tree-insert(T,z)</span><br><span class="line">x &#x3D; T.root &#x2F;&#x2F; è¿­ä»£æŒ‡é’ˆ</span><br><span class="line">y &#x3D; NIL &#x2F;&#x2F;è¿­ä»£åï¼Œyæ˜¯zçš„çˆ¶èŠ‚ç‚¹</span><br><span class="line">while x !&#x3D; NIL</span><br><span class="line">y &#x3D; x </span><br><span class="line">if z.key &lt; x.key</span><br><span class="line">x &#x3D; x.left</span><br><span class="line">else</span><br><span class="line">x &#x3D; x.right</span><br><span class="line">z.p &#x3D; y</span><br><span class="line"> if y &#x3D; NIL</span><br><span class="line"> T.root &#x3D; z</span><br><span class="line"> else if z.key &lt; x.key</span><br><span class="line"> y.left &#x3D; z</span><br><span class="line"> else</span><br><span class="line"> y.right &#x3D; z</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p>ä»äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤ä¸€ä¸ªç»“ç‚¹zæœ‰ä¸‰ç§æƒ…å†µ</p><ul><li>å¦‚æœzæ²¡æœ‰å­©å­ç»“ç‚¹ï¼Œé‚£ä¹ˆç›´æ¥åˆ é™¤åˆ é™¤è¯¥ç»“ç‚¹ï¼Œç„¶åä¿®æ”¹çˆ¶ç»“ç‚¹å¯¹åº”çš„å­©å­ç»“ç‚¹ä¸ºNIL</li><li>åªæœ‰ä¸€ä¸ªå­©å­ï¼Œå°†è¿™ä¸ªå­©å­æå‡åˆ°zï¼Œå¹¶ä¿®æ”¹çˆ¶ç»“ç‚¹å¯¹åº”çš„å­©å­ä¸ºzçš„å­©å­</li><li>æœ‰ä¸¤ä¸ªå­©å­ï¼Œæ‰¾åˆ°zçš„åç»§y(ç”±äºå­˜åœ¨ä¸¤ä¸ªå­©å­ï¼Œåç»§å¿…åœ¨zçš„å³å­æ ‘ä¸­)ï¼Œï¼Œzçš„å·¦å­æ ‘æˆä¸ºyçš„å·¦å­æ ‘ï¼Œå…³äºå³å­æ ‘æœ‰ä¸¤ç§æƒ…å†µ<ul><li>yæ˜¯zçš„å³å­©å­ï¼Œyä»£æ›¿zåï¼Œä¿ç•™yçš„å³å­æ ‘</li><li>yä¸æ˜¯zçš„å³å­©å­ï¼Œç”±äºyæ˜¯zçš„åç»§ï¼Œå…ˆåˆ é™¤y(yå¿…å®šæ²¡æœ‰å·¦å­©å­ï¼Œåˆ é™¤yå±äºç¬¬äºŒç§æƒ…å†µ),è®©yä»£æ›¿æ ‘ä¸­zçš„ä½ç½®ï¼Œzçš„å³å­æ ‘æˆä¸ºyçš„å³å­æ ‘</li></ul></li></ul><p>ä¸‹é¢æ˜¯åˆ é™¤äºŒå‰æœç´¢æ ‘çš„ç»“ç‚¹ç®—æ³•çš„å­è¿‡ç¨‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">procedure transplant(T,u,v) &#x2F;&#x2F; T æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œuï¼Œvæ˜¯Tä¸­çš„ç»“ç‚¹ï¼Œuæ˜¯è¢«æ›¿ä»£çš„ç»“ç‚¹ï¼Œvæ˜¯æ›¿ä»£uçš„ç»“ç‚¹</span><br><span class="line">if u.p &#x3D;&#x3D; NIL &#x2F;&#x2F; å¤„ç†uæ˜¯rootçš„æƒ…å†µ</span><br><span class="line">T.root &#x3D; v</span><br><span class="line">else if u &#x3D;&#x3D; u.p.left </span><br><span class="line">u.p.left &#x3D; v</span><br><span class="line">else</span><br><span class="line">u.p.right &#x3D; b</span><br><span class="line">if v !&#x3D; NIL &#x2F;&#x2F;å¦‚æœç§»æ¤çš„æ ‘vä¸æ˜¯NIL,é‚£ä¹ˆéœ€è¦æ›´æ–°v.p</span><br><span class="line">v.p &#x3D; u.p</span><br></pre></td></tr></table></figure><p>delete</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">procedure tree-delete(T,z)</span><br><span class="line">if z.left &#x3D;&#x3D; NIL</span><br><span class="line">transplant(T,z,z.right)</span><br><span class="line">else if z.right &#x3D;&#x3D; NIL</span><br><span class="line">transplant(T,z,z.left)</span><br><span class="line">else </span><br><span class="line">y &#x3D; tree-minimum(z)</span><br><span class="line">if y.p !&#x3D; z</span><br><span class="line">transplant(T,y,y.right)</span><br><span class="line">y.right &#x3D; z.right</span><br><span class="line">y.right.p &#x3D; y</span><br><span class="line">transplant(T,z,y)</span><br><span class="line">y.left &#x3D; z.left</span><br><span class="line">y.left.p &#x3D; y</span><br></pre></td></tr></table></figure><h2 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h2><p>å«æ˜Ÿæ•°æ®: åœ¨ç®—æ³•å¯¼è®ºé‡Œï¼ŒæŒ‡çš„æ˜¯ä¸€æ¡çºªå½•ï¼ˆä¸€ä¸ªå¯¹è±¡ä¸­ï¼‰ä¸­é™¤äº†å…³é”®å­—keyä»¥å¤–çš„å…¶ä»–æ•°æ®ã€‚</p><p>NIL:è¡¨ç¤ºç©ºï¼Œå’ŒJavaä¸­çš„nullä¸€æ ·</p>]]></content>
      
      
      <categories>
          
          <category> data structure </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tree </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tree</title>
      <link href="/sunshine-carroll.github.io/2020/11/16/tree/"/>
      <url>/sunshine-carroll.github.io/2020/11/16/tree/</url>
      
        <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>è¿™ä¸ªä¸æ˜¯ä»‹ç»æ€§çš„æ–‡ç« ï¼Œçº¯ç²¹æ˜¯ç¬”è®°ã€‚</p><h2 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h2><p>ä¸å«ç®€å•å›è·¯çš„è¿é€šå›¾</p><h2 id="æ ‘çš„æ€§è´¨"><a href="#æ ‘çš„æ€§è´¨" class="headerlink" title="æ ‘çš„æ€§è´¨"></a>æ ‘çš„æ€§è´¨</h2><p>ä¸€ä¸ªæ— å‘å›¾æ˜¯æ ‘ï¼Œå½“ä¸”ä»…å½“ä»–çš„æ¯å¯¹é¡¶ç‚¹ä¹‹é—´å­˜åœ¨å”¯ä¸€ç®€å•é€šè·¯</p><p>å«nä¸ªç»“ç‚¹çš„æ ‘å…·æœ‰n-1æ¡è¾¹</p><h2 id="æœ‰åºæ ¹æ ‘"><a href="#æœ‰åºæ ¹æ ‘" class="headerlink" title="æœ‰åºæ ¹æ ‘"></a>æœ‰åºæ ¹æ ‘</h2><h3 id="é€’å½’å®šä¹‰"><a href="#é€’å½’å®šä¹‰" class="headerlink" title="é€’å½’å®šä¹‰"></a>é€’å½’å®šä¹‰</h3><blockquote><p>åŸºç¡€æ­¥éª¤: å•ä¸ªé¡¶ç‚¹æ˜¯æ ¹æ ‘</p><p>å½’çº³æ­¥éª¤: å¦‚æœ$T_1,T_2,T_3,\cdots,T_n$æ˜¯æ ¹æ ‘ï¼Œåˆ†åˆ«å¸¦æœ‰æ ‘æ ¹$r_1,r_2,r_3,\cdots,r_n$,åˆ™å¦‚ä¸‹å½¢æˆçš„æ ‘ä¹Ÿæ˜¯æ ¹æ ‘ï¼šä»æ ‘æ ¹rå¼€å§‹(rä¸å±äº$T_1,T_2,T_3,\cdots,T_n$ä¸­çš„ä¸€ä¸ª),å¯¹äºæ¯ä¸ªé¡¶ç‚¹$r_1,r_2,r_3,\cdots,r_n$,éƒ½åŠ å…¥ä¸€æ¡råˆ°è¯¥é¡¶ç‚¹çš„è¾¹ã€‚</p></blockquote><h3 id="éé€’å½’å®šä¹‰"><a href="#éé€’å½’å®šä¹‰" class="headerlink" title="éé€’å½’å®šä¹‰"></a>éé€’å½’å®šä¹‰</h3><blockquote><p>æœ‰åºæ ¹æ ‘æ˜¯æŒ‡é¡¶ç‚¹ä½œä¸ºæ ¹å¹¶ä¸”æ¯æ¡è¾¹çš„æ–¹å‘éƒ½ç¦»å¼€æ ¹çš„æ ‘</p></blockquote><h3 id="må‰æ ‘"><a href="#må‰æ ‘" class="headerlink" title="må‰æ ‘"></a>må‰æ ‘</h3><blockquote><p>è‹¥æœ‰åºæ ¹æ ‘çš„æ¯ä¸ªå†…ç‚¹éƒ½æœ‰ä¸è¶…è¿‡mä¸ªå­©å­ï¼Œé‚£ä¹ˆç§°ä»–ä¸ºmå‰æ ‘ã€‚å¦‚æœæ¯ä¸ªå†…ç‚¹éƒ½å«mä¸ªå­©å­ï¼Œé‚£ä¹ˆç§°ä¹‹ä¸ºæ»¡må‰æ ‘ã€‚å½“m=2æ—¶çš„må‰æ ‘ä¹Ÿç§°2å‰æ ‘</p></blockquote><h2 id="æ‰©å±•äºŒå‰æ ‘"><a href="#æ‰©å±•äºŒå‰æ ‘" class="headerlink" title="æ‰©å±•äºŒå‰æ ‘"></a>æ‰©å±•äºŒå‰æ ‘</h2><blockquote><p>åŸºç¡€æ­¥éª¤: ç©ºé›†æ˜¯æ‰©å±•äºŒå‰æ ‘</p><p>å½’çº³æ­¥éª¤: å¦‚æœ$T_1,T_2$æ˜¯æ‰©å±•äºŒå‰æ ‘ï¼Œé‚£ä¹ˆå­˜åœ¨ä¸€ä¸ªæ‰©å±•äºŒå‰æ ‘$T_1Â·T_2$,ä»–åŒ…å«æ ‘æ ¹r,å’Œä»rè¿æ¥è¿™ä¸¤ä¸ªå­æ ‘çš„è¾¹(ä»…å½“å­æ ‘éç©ºæ—¶æ‰è¿æ¥è¾¹)</p></blockquote><h2 id="æ»¡äºŒå‰æ ‘-è¿™é‡Œæ˜¯ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ä¸Šæ»¡äºŒå‰æ ‘çš„å®šä¹‰"><a href="#æ»¡äºŒå‰æ ‘-è¿™é‡Œæ˜¯ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ä¸Šæ»¡äºŒå‰æ ‘çš„å®šä¹‰" class="headerlink" title="æ»¡äºŒå‰æ ‘(è¿™é‡Œæ˜¯ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ä¸Šæ»¡äºŒå‰æ ‘çš„å®šä¹‰)"></a>æ»¡äºŒå‰æ ‘(è¿™é‡Œæ˜¯ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ä¸Šæ»¡äºŒå‰æ ‘çš„å®šä¹‰)</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><blockquote><p>åŸºç¡€æ­¥éª¤: å­˜åœ¨åªå«å•ä¸ªé¡¶ç‚¹çš„æ»¡äºŒå‰æ ‘</p><p>å½’çº³æ­¥éª¤: å¦‚æœ$T_1,T_2$æ˜¯æ»¡äºŒå‰æ ‘ï¼Œé‚£ä¹ˆå­˜åœ¨ä¸€ä¸ªæ»¡äºŒå‰æ ‘$T_1Â·T_2$,ä»–åŒ…å«æ ‘æ ¹r,å’Œä»rè¿æ¥è¿™ä¸¤ä¸ªå­æ ‘çš„è¾¹</p></blockquote><h3 id="æ»¡äºŒå‰æ ‘çš„é«˜åº¦h-T"><a href="#æ»¡äºŒå‰æ ‘çš„é«˜åº¦h-T" class="headerlink" title="æ»¡äºŒå‰æ ‘çš„é«˜åº¦h(T)"></a>æ»¡äºŒå‰æ ‘çš„é«˜åº¦h(T)</h3><blockquote><p>åŸºç¡€æ­¥éª¤ï¼šåªå«æ ‘æ ¹çš„æ»¡äºŒå‰æ ‘é«˜åº¦$h(T)=0$</p><p>å½’çº³æ­¥éª¤: å¦‚æœ$T_1,T_2$æ˜¯æ»¡äºŒå‰æ ‘ï¼Œé‚£ä¹ˆæ»¡äºŒå‰æ ‘$T=T_1Â·T_2$çš„é«˜åº¦$h(T)=max(h(T_1),h(T_2))+1$</p></blockquote><h2 id="æ»¡äºŒå‰æ ‘çš„é¡¶ç‚¹æ•°n-T"><a href="#æ»¡äºŒå‰æ ‘çš„é¡¶ç‚¹æ•°n-T" class="headerlink" title="æ»¡äºŒå‰æ ‘çš„é¡¶ç‚¹æ•°n(T)"></a>æ»¡äºŒå‰æ ‘çš„é¡¶ç‚¹æ•°n(T)</h2><blockquote><p>åŸºç¡€æ­¥éª¤ï¼šåªå«æ ‘æ ¹çš„æ»¡äºŒå‰æ ‘é«˜åº¦$n(T)=1</p><p>å½’çº³æ­¥éª¤: å¦‚æœ$T_1,T_2$æ˜¯æ»¡äºŒå‰æ ‘ï¼Œé‚£ä¹ˆæ»¡äºŒå‰æ ‘$T=T_1Â·T_2$çš„é¡¶ç‚¹æ•°$n(T)=n(T_1)+n(T_2)+1$</p></blockquote><h3 id="å…³äºæ»¡äºŒå‰æ ‘çš„ä¸€äº›ç»“è®ºåŠå…¶è¯æ˜"><a href="#å…³äºæ»¡äºŒå‰æ ‘çš„ä¸€äº›ç»“è®ºåŠå…¶è¯æ˜" class="headerlink" title="å…³äºæ»¡äºŒå‰æ ‘çš„ä¸€äº›ç»“è®ºåŠå…¶è¯æ˜"></a>å…³äºæ»¡äºŒå‰æ ‘çš„ä¸€äº›ç»“è®ºåŠå…¶è¯æ˜</h3><blockquote><p>å®šç†ä¸€ å‡è®¾Tæ˜¯æ»¡äºŒå‰æ ‘ï¼Œn(T)æ˜¯Tçš„é¡¶ç‚¹æ•°ï¼Œh(T)æ˜¯Tçš„é«˜åº¦,é‚£ä¹ˆ$n(T)&lt;= 2^{h(T)+1}-1$</p></blockquote><p>è¯æ˜:</p><p>åŸºç¡€æ­¥éª¤: å½“Tæ˜¯åªå«æ ‘æ ¹çš„æ»¡äºŒå‰æ ‘çš„æ—¶å€™ï¼Œn(T) = 1,h(T)=0ï¼Œ$1&lt;=2^{0+1}-1$ å®šç†ä¸€æˆäº†</p><p>å½’çº³æ­¥éª¤:å¦‚æœ$T_1,T_2$æ˜¯æ»¡äºŒå‰æ ‘,$n(T_1)&lt;=2^{h(T_1)+1}-1$,$n(T_2)&lt;=2^{h(T_2)+1}-1$<br>$$<br>\begin{align}<br>n(T)&amp;=n(T_1)+n(T_2)+1\<br>&amp;&lt;=2^{h(T_1)+1}-1 + 2^{h(T_2)+1}-1 +1\<br>&amp;&lt;=2^{max(h(T_1)+1,h(T_2)+1)+1} -1\<br>&amp;=2^{h(T)+1}-1<br>\end{align}<br>$$<br>å®šç†ä¸€ä¹Ÿæˆç«‹</p><blockquote><p>æ»¡äºŒå‰æ ‘çš„æ‰€æœ‰éå¶èŠ‚ç‚¹éƒ½æœ‰åº¦æ•°éƒ½ä¸º2</p></blockquote><h2 id="å¹³è¡¡æ ‘"><a href="#å¹³è¡¡æ ‘" class="headerlink" title="å¹³è¡¡æ ‘"></a>å¹³è¡¡æ ‘</h2><p>ä»»æ„å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1çš„æ ‘</p><h2 id="å®Œç¾äºŒå‰æ ‘-Perfect-Binary-Tree"><a href="#å®Œç¾äºŒå‰æ ‘-Perfect-Binary-Tree" class="headerlink" title="å®Œç¾äºŒå‰æ ‘(Perfect Binary Tree )"></a>å®Œç¾äºŒå‰æ ‘(Perfect Binary Tree )</h2><p>é«˜åº¦ä¸ºhï¼Œä¸”å…·æœ‰$2^{h+1}-1$ä¸ªç»“ç‚¹çš„æ ‘</p><h2 id="å®Œå…¨äºŒå‰æ ‘-Complete-Binary-Tree"><a href="#å®Œå…¨äºŒå‰æ ‘-Complete-Binary-Tree" class="headerlink" title="å®Œå…¨äºŒå‰æ ‘(Complete Binary Tree)"></a>å®Œå…¨äºŒå‰æ ‘(Complete Binary Tree)</h2><p>æ ¹ç»“ç‚¹åˆ°å€’æ•°ç¬¬äºŒå±‚éƒ½æ˜¯å®Œç¾äºŒå‰æ ‘ï¼Œåªæœ‰æœ€åä¸€å±‚å¯ä»¥ä¸å®Œå…¨å¡«å……ï¼Œä¸”èŠ‚ç‚¹é å·¦</p><h2 id="æœ‰åºæ ¹æ ‘çš„å‰åºéå†"><a href="#æœ‰åºæ ¹æ ‘çš„å‰åºéå†" class="headerlink" title="æœ‰åºæ ¹æ ‘çš„å‰åºéå†"></a>æœ‰åºæ ¹æ ‘çš„å‰åºéå†</h2><blockquote><p>è®¾Tæ˜¯å¸¦æœ‰æ ‘æ ¹rçš„æœ‰åºæ ¹æ ‘ï¼Œå¦‚æœTåªå«æ ‘æ ¹rï¼Œåˆ™ræ˜¯Tçš„å‰åºéå†ã€‚å¦åˆ™ï¼Œè®¾$T_1,T_2,T_3,\cdots,T_n$æ˜¯Tä»¥rä¸ºæ ¹çš„ä»å·¦åˆ°å³çš„å­æ ‘ï¼Œå‰åºéå†å…ˆè®¿é—®rï¼Œå†ä»å·¦åˆ°å³å‰åºéå†$T_1,T_2,T_3,\cdots,T_n$</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">procedure preorder(T:æœ‰åºæ ¹æ ‘)</span><br><span class="line">r &#x3D; Tçš„æ ¹</span><br><span class="line">visit(r)</span><br><span class="line">for ä»å·¦åˆ°å³çš„rçš„å­æ ‘c</span><br><span class="line">preorder(c)</span><br></pre></td></tr></table></figure><h2 id="æœ‰åºæ ¹æ ‘çš„ä¸­åºéå†"><a href="#æœ‰åºæ ¹æ ‘çš„ä¸­åºéå†" class="headerlink" title="æœ‰åºæ ¹æ ‘çš„ä¸­åºéå†"></a>æœ‰åºæ ¹æ ‘çš„ä¸­åºéå†</h2><blockquote><p>è®¾Tæ˜¯å¸¦æœ‰æ ‘æ ¹rçš„æœ‰åºæ ¹æ ‘ï¼Œå¦‚æœTåªå«æ ‘æ ¹rï¼Œåˆ™ræ˜¯Tçš„ä¸­åºéå†ã€‚å¦åˆ™ï¼Œè®¾$T_1,T_2,T_3,\cdots,T_n$æ˜¯Tä»¥rä¸ºæ ¹çš„ä»å·¦åˆ°å³çš„å­æ ‘ï¼Œå…ˆä¸­åºéå†$T_1$,ç„¶åè®¿é—®rï¼Œæ¥ç€ä¸­åºéå†$T_2,T_3,\cdots,T_n$</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">procedure inorder(T:æœ‰åºæ ¹æ ‘)</span><br><span class="line">r &#x3D; Tçš„æ ¹</span><br><span class="line">if r æ˜¯æ ‘å¶ then visit(r)</span><br><span class="line">else</span><br><span class="line">l æ˜¯rä»å·¦åˆ°å³çš„ç¬¬ä¸€ä¸ªå­æ ‘</span><br><span class="line">inorder(l)</span><br><span class="line">visit(r)</span><br><span class="line">for ä»å·¦åˆ°å³çš„rçš„å­æ ‘c(ä¸åŒ…å«l)</span><br><span class="line">inorder(c)</span><br></pre></td></tr></table></figure><h2 id="æœ‰åºæ ¹æ ‘çš„ååºéå†"><a href="#æœ‰åºæ ¹æ ‘çš„ååºéå†" class="headerlink" title="æœ‰åºæ ¹æ ‘çš„ååºéå†"></a>æœ‰åºæ ¹æ ‘çš„ååºéå†</h2><blockquote><p>è®¾Tæ˜¯å¸¦æœ‰æ ‘æ ¹rçš„æœ‰åºæ ¹æ ‘ï¼Œå¦‚æœTåªå«æ ‘æ ¹rï¼Œåˆ™ræ˜¯Tçš„ååºéå†ã€‚å¦åˆ™ï¼Œè®¾$T_1,T_2,T_3,\cdots,T_n$æ˜¯Tä»¥rä¸ºæ ¹çš„ä»å·¦åˆ°å³çš„å­æ ‘ï¼Œå…ˆååºéå†$T_1,T_2,T_3,\cdots,T_n$,ç„¶åè®¿é—®rã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">procedure postorder(T:æœ‰åºæ ¹æ ‘)</span><br><span class="line">r &#x3D; Tçš„æ ¹</span><br><span class="line">for ä»å·¦åˆ°å³çš„rçš„å­æ ‘c</span><br><span class="line">postorder(c)</span><br><span class="line">visit(r)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> data structure </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mapæ¥å£åˆ†æ</title>
      <link href="/sunshine-carroll.github.io/2020/10/29/Map%E6%8E%A5%E5%8F%A3%E5%88%86%E6%9E%90/"/>
      <url>/sunshine-carroll.github.io/2020/10/29/Map%E6%8E%A5%E5%8F%A3%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><code>Map</code>,åœ¨æ•°å­¦ä¸­æ—¶æ˜ å°„çš„æ„æ€ï¼Œ</p><p>ä¸ºäº†ä¾¿äºç†è§£ä¸è¡¨è¿°ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„Mapæ¨¡å‹æ¥åˆ†æ,è¿™ä¸ªæ¨¡å‹ç”±ä¸€äº›ä½œè€…å’Œä½œå“æ„æˆ</p><p>$$<br>\begin{align}</p><p>&amp;f:authorâ†’book \<br>å”å®¶ä¸‰å°‘&amp;ï½œä½™å \ |Jostein Gaarder \tag {author}\<br>æ–—ç½—å¤§é™†&amp;ï½œæ´»ç€ \ |è‹è²çš„ä¸–ç•Œ\tag {book}\</p><p>\end{align}<br>$$</p><h2 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h2><p>ä»$f:authorâ†’book$ä¸­å¯ä»¥çœ‹å‡ºä¸€ä¸ªæ˜ å°„(Map)å¯ä»¥ç”±ä¸€ä¸ªä¸ªç”±<code>[ä½™å-æ´»ç€)]</code>è¿™æ ·çš„æ¡ç›®(Entry)ç»„æˆã€‚Entry å°±æ˜¯Mapæ›´ç»†è‡´çš„æ¦‚å¿µï¼Œåœ¨Mapæ¥å£ä¸­çš„è¡¨ç°å½¢å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ªå†…éƒ¨æ¥å£Entryï¼Œ</p><p>è¿™ä¸ªæ¥å£å®šä¹‰äº†Mapå®ç°ä¸­çš„å†…éƒ¨ç±»entryçš„ç±»å‹ï¼Œå†…éƒ¨ç±»ä½œç”¨ä¹‹ä¸€å°±æ˜¯åœ¨é¢å¯¹æ¦‚å¿µå®½æ³›ï¼Œæˆ–è€…è¯´å¤æ‚çš„ç±»å‹å»ºæ¨¡çš„æ—¶å€™ï¼Œå»è¯†åˆ«å¤æ‚ç±»å‹ä¸­å†…éƒ¨çš„ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// Â·Â·Â·</span></span><br><span class="line">  <span class="class"><span class="keyword">interface</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">  <span class="function">K <span class="title">getKey</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function">V get <span class="title">Value</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">V <span class="title">setValue</span><span class="params">(V value)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//Â·Â·Â· some static methods</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mapä»¥åŠEntryä¸­çš„æ³›å‹å‚æ•°ä¸­çš„Kæ˜¯Mapä¸­é”®çš„ç±»å‹(author),Væ˜¯å€¼çš„ç±»å‹(book)ï¼ŒEntry ç±»å‹çš„è¡Œä¸ºå¹¶ä¸å¤š,ä¸¾ä¸ªä¾‹å­ å¯¹äºã€å”å®¶ä¸‰å°‘-æ–—ç½—å¤§é™†ã€‘è¿™æ ·ä¸€ä¸ªæ¡ç›®ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæƒ³è¦è·å–ä»–çš„ä½œè€…å”å®¶ä¸‰å°‘(getKey),æˆ–è€…è·å–ä½œå“(getValue)ï¼Œæˆ–è€…æ›¿æ¢ä½œå“ä¸ºå¤©ç å˜(setValue),ä»¥åŠä¸ä¸€ä¸ªEntryæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚åœ¨è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ä¸ç®¡æ˜¯ç®€å•ç±»å‹æˆ–è€…å¤æ‚ç±»å‹ï¼Œéƒ½æœ‰å…¶ç­‰ä»·æ€§ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è®¤ä¸ºã€‚ã€å”å®¶ä¸‰å°‘-æ–—ç½—å¤§é™†ã€‘å’Œã€banana-appleã€‘æ˜¯ç­‰ä»·çš„ï¼Œä»–ä»¬åŒæ˜¯è¯­è¨€çš„ç¬¦å·ã€‚hashCode() å’Œ equals()æ˜¯ç›¸å…³çš„(å½“ç„¶ä¹Ÿå¯ä»¥å®ç°æˆæ— å…³)ï¼Œä¸€èˆ¬å¯¹äºä»»æ„ä¸¤ä¸ªå¯¹è±¡a,b å¦‚æœa,bç­‰ä»·ï¼Œé‚£ä¹ˆä»–ä»¬çš„hashCode()è¿”å›ä¹Ÿåº”è¯¥ä¸€æ ·ã€‚</p><p>ç­‰ä»·æ€§æ˜¯å»ºç«‹åœ¨æŸç§å‰æä¸Šçš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºäººä¸å¯ä»¥è¸å…¥åŒä¸€æ¡æ²³æµä¸¤æ¬¡ï¼Œå› ä¸ºæ²³æ°´æ˜¯æµåŠ¨çš„ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºäººå¯ä»¥è¸å…¥åŒä¸€æ¡æ²³æµä¸­ä¸¤æ¬¡ï¼Œå› ä¸ºåªå…³å¿ƒæ²³æµçš„åœ°ç†ä½ç½®ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªæ‹“å±•å†…å®¹</p><blockquote><p>ğŸ€ å…³äºequals å’Œ hashCode çš„è¯¦ç»†è§£é‡Šä»¥åŠå¯¹å®¹å™¨ç±»åº“ä¸­å®¹å™¨è¡Œä¸ºçš„å½±å“å¯ä»¥å‚è€ƒ<a href="https://lingcoder.gitee.io/onjava8/#/book/Appendix-Understanding-equals-and-hashCode?id=%E9%99%84%E5%BD%95%E7%90%86%E8%A7%A3equals%E5%92%8Chashcode%E6%96%B9%E6%B3%95" target="_blank" rel="noopener">On java 8-ç†è§£equalså’Œhashcodeæ–¹æ³• </a>æˆ–è€…Effective Java ç¬¬<a href="https://jiapengcai.gitbooks.io/effective-java/content/di-3-zhang-dui-suo-you-dui-xiang-du-tong-yong-de-fang-fa/di-10-tiao-ff1a-fu-gai-equals-fang-fa-shi-qing-zun-shou-tong-yong-yue-ding.html" target="_blank" rel="noopener">10,11</a>æ¡å»ºè®®<br></p></blockquote><h2 id="Mapçš„è¡Œä¸º"><a href="#Mapçš„è¡Œä¸º" class="headerlink" title="Mapçš„è¡Œä¸º"></a>Mapçš„è¡Œä¸º</h2><p>éšç€Javaè¯­è¨€çš„å‘å±•ï¼Œç±»åº“çš„å®Œå–„ï¼Œæ–°ç‰¹æ€§çš„å¢åŠ Mapæ¥å£çš„è¡Œä¸ºä¹Ÿè¶Šæ¥è¶Šä¸°å¯Œã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€ä¸ªç±»å‹çš„æ—¶å€™ï¼Œé€šå¸¸åªå…³å¿ƒè¯¥ç±»å‹å¯¹å¤–è¡¨ç°çš„è¡Œä¸ºï¼Œå¹¶ä¸”ä¸å¤ªä¼šæ¶‰åŠåˆ°è¿™ä¸ªç±»å‹çš„æ‰€æœ‰è¡Œä¸ºã€‚è¿™äº›å†…å®¹æœ‰æ—¶å€™ä¼šæ˜¯ååˆ†å¤æ‚çš„ï¼Œä¸ç®¡æ˜¯äº†è§£ä¸€ä¸ªç±»å‹è¿˜æ˜¯å»è®¾è®¡ä¸€ä¸ªç±»å‹ï¼Œè¿‡æ—©çš„æ¶‰åŠè¿™äº›å¤æ‚æ€§æ˜¯ä¸å¤ªæœ‰å¿…è¦çš„ï¼Œè€Œä¸”å¯èƒ½ä¼šè¿·å¤±åœ¨è¿™äº›å¤æ‚æ€§ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæœè£…è®¾è®¡å¸ˆåœ¨å°çš„æ—¶å€™å¯èƒ½å¯¹æœè£…çš„è®¾è®¡ä¸€çªä¸é€šï¼Œæœè£…æ˜¯æ€ä¹ˆåˆ¶ä½œçš„ï¼Œè¯¥æ€ä¹ˆè®¾è®¡ï¼Œç”¨ä»€ä¹ˆææ–™ï¼Œä½†æ˜¯ä»–èƒ½å¯¹æœè£…ç»™äººæä¾›çš„é®è¡£è”½ä½“ï¼Œä¿®èº«ç­‰åŠŸèƒ½å»ºç«‹èµ·è®¤è¯†ï¼Œéšç€å­¦ä¹ å’Œè¿›ä¿®æ…¢æ…¢äº†è§£åˆ°æœè£…è®¾è®¡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å­¦ä¼šè®¾è®¡ã€‚Javaç±»åº“ä¸­å®ç°Mapæ¥å£çš„ç±»å‹æœ‰å¾ˆå¤š,HashMapï¼ŒLinkedHashMap,TreeMapç­‰ç­‰ï¼Œä»–ä»¬å„è‡ªçš„å®ç°å’Œè¡Œä¸ºéƒ½æœ‰ä¸åŒï¼Œä½†æ˜¯ä»–ä»¬çš„å…±åŒç‰¹å¾éƒ½æ˜¯Mapï¼Œæœ‰æ—¶å€™å°†è¡Œä¸ºå’Œå®ç°æ‹†åˆ†çš„çœ‹å¯ä»¥å¾ˆå¥½çš„å»è®¤è¯†ä¸€ä¸ªç±»åº“ï¼Œæ¡†æ¶ã€‚Mapæ¥å£ä¸€å…±å®šä¹‰äº†25ä¸ªè¡Œä¸º(æ–¹æ³•),è¿™25ç§è¡Œä¸ºå¯ä»¥åˆ’åˆ†ä¸º6ä¸ªç±»åˆ«ã€‚</p><blockquote><p>ğŸ€ æœ‰æ—¶å€™å¯¹è±¡çš„ç‰¹å¾æ˜¯ç›´è§‚çš„,ä½†æ˜¯è¡Œä¸ºå´æœ‰å¾ˆå¤šï¼Œè¿™äº›è¡Œä¸ºè¯´å‡ºæ¥æŒºå®¹æ˜“ç†è§£ï¼Œå…¨éƒ¨è®°ä½ä¹Ÿæ²¡å¿…è¦ã€‚æ­£å¦‚ä¹‹å‰çš„æ¨¡å‹ï¼Œå¾ˆå®¹æ˜“åœ¨è„‘æµ·ä¸­ç•™ä¸‹å°è±¡å¹¶å¤è¿°å†…å®¹ã€‚mapæè¿°çš„25ç§è¡Œä¸ºéƒ½å¯ä»¥åº”ç”¨åœ¨æ¨¡å‹ä¸­ï¼Œä½†æ˜¯è®©äººå‡­ç©ºè¯´å´æŒºéº»çƒ¦ã€‚ä¸¾ä¸ªåˆ«çš„ä¾‹å­è¯´æ•´æ•°ï¼Œæ•´æ•°å¤§å®¶å°æ—¶å€™å°±è®¤è¯†ï¼Œä½†æ˜¯æ•´æ•°èƒ½è¡¨ç°çš„è¡Œä¸ºå´å¾ˆå¤šã€‚æ•´æ•°å¯ä»¥è¿›è¡Œæ¨¡æŒ‡æ•°è¿ç®—(è¿™åœ¨RSAåŠ å¯†ç®—æ³•æœ‰å…³é”®çš„ä½œç”¨ï¼Œè€ŒRSAåŠ å¯†ç®—æ³•æ˜¯æ•°æ®åœ¨é€šè¿‡Httpså®‰å…¨ä¼ è¾“æ—¶çš„ä¸€ä¸ªé‡è¦ç¯èŠ‚)ï¼Œå¯ä»¥åˆ¤æ–­æ•´æ•°æ˜¯å¦ä¸ºæ¢…æ£®ç´ æ•°ï¼Œç½‘ç»œä¸­æœ‰ä¸€ä¸ªåºå¤§çš„åˆ†å¸ƒå¼ç³»ç»Ÿ<a href="https://www.mersenne.org/" target="_blank" rel="noopener">gimps</a> EFFå…³äºå¥–é‡‘è®¾ç«‹çš„è§„å®šï¼Œä»»ä½•ä¸€ä½æ–°æ¢…æ£®ç´ æ•°çš„å‘ç°è€…éƒ½å°†è·å¾—3000ç¾å…ƒçš„ç ”ç©¶å‘ç°å¥–ã€‚</p></blockquote><p>ä¸‹é¢æ˜¯Java8ä¸­ java.Util.Map æ¥å£çš„éƒ¨åˆ†å†…å®¹ï¼Œè¿™é‡Œçœç•¥äº†å…·ä½“çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// Query Operations æŸ¥è¯¢å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€çš„æ“ä½œ</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line">  <span class="comment">// Modification Operations æ”¹å˜å¯¹è±¡å†…éƒ¨çŠ¶æ€çš„æ“ä½œ</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line">  <span class="comment">// Bulk Operations æ‰¹é‡æ“ä½œ</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line">  <span class="comment">// views è¿”å›è§†å›¾</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line">  <span class="comment">// Comparison and hashing æ¯”è¾ƒå’Œæ•£åˆ—</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line">  <span class="comment">//Defaultable methods é»˜è®¤æ–¹æ³•ï¼ˆå¯ä»¥ç”±ä¹‹å‰çš„æ–¹æ³•ç»„åˆå®ç°ï¼‰</span></span><br><span class="line">  Â·Â·Â·</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Query-Operations"><a href="#Query-Operations" class="headerlink" title="Query Operations"></a>Query Operations</h3><p>æŸ¥è¯¢æ“ä½œï¼Œä¸€ä¸ªæŸ¥è¯¢æ“ä½œä»…ä»…è¿”å›å¹¶ä¸”ä¸ä¼šä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ã€‚ä¸€ä¸ªæ— çŠ¶æ€å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸€ä¸ªä¸ä¼šä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹æ³•ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸ä¼šå¯¼è‡´å¯¹è±¡å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ä¸‹(ç†ç”±å°±å¾ˆç®€å•ï¼Œå› ä¸ºæ ¹æœ¬ä¸æ”¹å˜çŠ¶æ€)ã€‚</p><blockquote><p>ğŸ€ æŸ¥è¯¢æ“ä½œæ—¶çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å¯¹æŸ¥è¯¢å‡ºæ¥çš„å¯¹è±¡çš„æ“ä½œå´ä¸ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// Query Operations æŸ¥è¯¢å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€çš„æ“ä½œ</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(Object key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(Object value)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">get</span><span class="params">(Object key)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>java 1.8 Mapæ¥å£ ä¸€å…±æœ‰5ä¸ªquery æ–¹æ³•ï¼ŒæŸ¥çœ‹mapçš„å¤§å°ï¼Œåˆ¤æ–­mapæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦å­˜åœ¨æŸä¸ªkeyï¼Œæ˜¯å¦å­˜åœ¨æŸä¸ªvalueï¼Œè·å–keyå¯¹åº”çš„valueã€‚è¿™äº›æ–¹æ³•çš„åŠŸèƒ½è§åçŸ¥æ„ï¼Œä»åŠŸèƒ½æ€§ä¸Šè€ƒè™‘å¯¹äºå„ä¸ªmapçš„å®ç°ï¼Œè¿™äº›æ¥å£å¤§åŒå°å¼‚ã€‚æœ‰æ—¶ä¾¯ä¸€äº›å°å·®å¼‚å®¹æ˜“å¯¼è‡´æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œå¦‚æŠ›å‡ºNullPointExceptionçš„æŠ›å‡ºã€‚åœ¨HashMapä¸­ get æ–¹æ³•å…è®¸å‚æ•°ä¸ºnull,ä½†åœ¨TreeMapçš„ä¸€äº›æƒ…å†µä¸‹ï¼Œä¸å…è®¸ä¸ºç©ºã€‚è¿™äº›ä¸æ˜¯æœ¬æ–‡çš„ä¸»æ—¨ï¼Œå…·ä½“çš„è¿˜è¯·çœ‹æ–¹æ³•æ–‡æ¡£</p><blockquote><p>ğŸ€ TreeMap ä¼šåœ¨ä½¿ç”¨è‡ªç„¶åºï¼Œæˆ–è€…Comparatorä¸å…è®¸ç©ºé”®çš„æ—¶å€™æŠ›å‡ºNullPointException</p></blockquote><h3 id="Modification-Operations"><a href="#Modification-Operations" class="headerlink" title="Modification Operations"></a>Modification Operations</h3><p>ä¿®æ”¹æ“ä½œï¼Œè¢«Mapæ¥å£åˆ’åˆ†ä¸ºä¿®æ”¹æ“ä½œåªæœ‰ä¸¤ä¸ªput(å‘mapä¸­æ”¾å…¥ä¸€ä¸ªæ¡ç›®)ï¼Œremove(æ ¹æ®é”®ç§»é™¤ä¸€ä¸ªæ¡ç›®)ã€‚äº‹å®ä¸Šä¸‹é¢å±äºBulkç±»åˆ«çš„æ“ä½œä¹Ÿä¼šä¿®æ”¹å†…éƒ¨çš„çŠ¶æ€(å…¶å®è¿˜æœ‰defaultableæ–¹æ³• åé¢ä¼šæ)ã€‚Mapæ¥å£çš„è®¾è®¡è€…æŠŠä»–ä»¬æŒ‰ç…§æ“ä½œå¯¹è±¡çš„æ•°é‡ç»†åˆ†äº†ã€‚ä¿®æ”¹æ“ä½œæ˜¯å¯¹åº”æŸ¥è¯¢æ“ä½œçš„,ä¸€ä¸ªä¿®æ”¹æ“ä½œä¸ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨ä½¿ç”¨ä¿®æ”¹æ“ä½œæ˜¯éœ€è¦è€ƒè™‘å…¶Mapå®ç°çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line"><span class="function">V <span class="title">put</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">remove</span><span class="params">(Object key)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Bulk-Operations"><a href="#Bulk-Operations" class="headerlink" title="Bulk Operations"></a>Bulk Operations</h2><p>Bulk(n : å¤§å¤šæ•°ï¼Œå¤§éƒ¨åˆ†ï¼›å¤§å—) æ“ä½œï¼Œæ“ä½œçš„å¯¹è±¡ä¸æ­¢Mapä¸­çš„ä¸€ä¸ªæ¡ç›®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">putAll</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>clear()å°±æ˜¯æ¸…ç©ºMap, putAll èƒ½å°†å¦ä¸€ä¸ªMapä¸­çš„æ¡ç›®åˆå¹¶åˆ°è¿™ä¸ªæ¡ç›®</p><h2 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h2><p>è§†å›¾: å¯¹å¤–å±•ç¤ºMapçš„è§†å›¾ï¼Œè¿™äº›Mapå†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šååº”åœ¨è¿™äº›è§†å›¾ä¸­ï¼ŒMapæ¥å£è§„å®šå¯ä»¥é€šè¿‡è¿™äº›è§†å›¾å»ç§»é™¤(ä¸èƒ½æ·»åŠ )Mapçš„å†…éƒ¨å…ƒç´ ã€‚å› æ­¤åœ¨è¿­ä»£è¿™äº›Mapï¼Œæˆ–è€…è§†å›¾çš„æ—¶å€™ï¼Œå¦‚æœé€šè¿‡è§†å›¾æˆ–è€…mapçš„æ–¹æ³•ä¿®æ”¹äº†Mapï¼Œå°±ä¼šæŠ›å‡ºConcurrentModificationExceptionã€‚å¦‚æœè¦é¿å…æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œå¯ä»¥æ‹·è´ä¸€ä»½è§†å›¾ï¼Œç„¶ååšåˆ«çš„æ“ä½œã€‚</p><blockquote><p>â—ï¸è¿™é‡Œçš„è§†å›¾å’Œä¸€äº›åœ°æ–¹è¯´çš„ä¸ä¸€æ ·ï¼Œè¿™é‡ŒæŒ‡å¯¹è±¡å¯¹å¤–è¿”å›çš„å†…éƒ¨çŠ¶æ€ã€‚ä¸€äº›åœ°æ–¹æŠŠè¿”å›çš„ä¸èƒ½æ”¹å˜å†…éƒ¨çŠ¶æ€çš„å¯¹è±¡å«è§†å›¾ï¼Œèƒ½æ”¹å˜å†…éƒ¨çŠ¶æ€çš„å«å¥æŸ„ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line"><span class="function">Set&lt;K&gt; <span class="title">keySet</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">Collection&lt;V&gt; <span class="title">values</span><span class="params">()</span></span>;</span><br><span class="line">Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ€ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è¿”å›çš„è§†å›¾èƒ½å¤Ÿå®æ—¶çš„ååº”å†…éƒ¨çŠ¶æ€ï¼Œä½†ä¸å…è®¸ä½¿ç”¨è€…èƒ½å¤Ÿé€šè¿‡è§†å›¾æ¥ä¿®æ”¹å†…éƒ¨çŠ¶æ€ã€‚å…³äºä¸€ä¸ªå¯¹è±¡åº”è¯¥å¦‚ä½•å¯¹å¤–å±•ç¤ºå†…éƒ¨çš„çŠ¶æ€ï¼Œå¯ä»¥å‚è€ƒã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ä¸­çš„å¯¹è±¡å‘å¸ƒå’Œæº¢å‡ºéƒ¨åˆ†ã€‚</p></blockquote><h2 id="Defaultable-methods"><a href="#Defaultable-methods" class="headerlink" title="Defaultable methods"></a>Defaultable methods</h2><p>å¯ä»¥é»˜è®¤å®ç°çš„æ–¹æ³•ã€‚åœ¨ä»¥å‰Javaçš„å®¹å™¨ç±»åº“ä¸­ï¼Œä¸€ç§é€šç”¨çš„è®¾è®¡æ–¹å¼æ˜¯å®šä¹‰æ¥å£ï¼Œåœ¨æ¥å£ä¸­æè¿°è¡Œä¸ºï¼Œç„¶åä½¿ç”¨æŠ½è±¡ç±»æ¥å®ç°è¿™ä¸ªæ¥å£ï¼Œå¦‚æœæŸä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡ç»„åˆå¯¹è±¡ä¸­å…¶ä»–æ–¹æ³•æˆ–è€…ä½¿ç”¨å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€æ¥å®ç°ï¼Œé‚£ä¹ˆè¿™äº›å®ç°ä¼šç¼–å†™åœ¨è¿™ä¸ªæŠ½è±¡ç±»ä¸­ï¼Œä»¥è¾¾åˆ°ä»£ç å¤ç”¨ç­‰ä¸€äº›ç›®çš„ã€‚ä½†æ˜¯æœ‰äº›æ–¹æ³•å…¶å®ä¸éœ€è¦ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼ŒJava8 æ¥å£å…è®¸ default ä¿®é¥°çš„æ–¹æ³•å¸¦æœ‰æ–¹æ³•ä½“ï¼ŒMapæ¥å£å®šä¹‰äº†ä¸€äº› Defaultable æ–¹æ³• ä»–ä»¬ç»„åˆä¸Šè¿°çš„æ–¹æ³•ï¼Œç„¶ååŠ ä¸Šä¸€äº›æ§åˆ¶æ‰§è¡Œæµç¨‹ï¼Œåœ¨ä¸ç›´æ¥æ”¹å˜å¯¹è±¡å†…éƒ¨è¡Œä¸ºçš„æƒ…å†µè¡¨ç°è‡ªå·±çš„è¡Œä¸ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">getOrDefault</span><span class="params">(Object key, V defaultValue)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(BiConsumer&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V&gt; action)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">replaceAll</span><span class="params">(BiFunction&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V, ? extends V&gt; function)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">putIfAbsent</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object key, Object value)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">replace</span><span class="params">(K key, V oldValue, V newValue)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">replace</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">computeIfAbsent</span><span class="params">(K key,</span></span></span><br><span class="line"><span class="function"><span class="params">            Function&lt;? <span class="keyword">super</span> K, ? extends V&gt; mappingFunction)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">computeIfPresent</span><span class="params">(K key,</span></span></span><br><span class="line"><span class="function"><span class="params">            BiFunction&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V, ? extends V&gt; remappingFunction)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">compute</span><span class="params">(K key,</span></span></span><br><span class="line"><span class="function"><span class="params">            BiFunction&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V, ? extends V&gt; remappingFunction)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">merge</span><span class="params">(K key, V value,</span></span></span><br><span class="line"><span class="function"><span class="params">            BiFunction&lt;? <span class="keyword">super</span> V, ? <span class="keyword">super</span> V, ? extends V&gt; remappingFunction)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP</title>
      <link href="/sunshine-carroll.github.io/2020/10/13/Spring-AOP/"/>
      <url>/sunshine-carroll.github.io/2020/10/13/Spring-AOP/</url>
      
        <content type="html"><![CDATA[<h2 id="AOPæ¦‚å¿µ"><a href="#AOPæ¦‚å¿µ" class="headerlink" title="AOPæ¦‚å¿µ"></a>AOPæ¦‚å¿µ</h2><ul><li><p><code>Aspect</code>: A modularization of a concern that cuts across multiple classes</p></li><li><p><code>Join point</code>: ç¨‹åºæ‰§è¡ŒæœŸé—´çš„æŸä¸ªæ—¶é—´ç‚¹(point)ã€‚å¦‚æ–¹æ³•çš„æ‰§è¡Œï¼Œæˆ–è€…å¼‚å¸¸çš„å¤„ç†ï¼Œåœ¨Spring AOP ä¸­ä¸€ä¸ª<code>Join point</code> </p><p>é€šå¸¸è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œ</p></li><li><p><code>Advice</code>: è¢«ä¸€ä¸ª<code>Aspect</code>åœ¨ä¸€ä¸ªç‰¹å®šçš„<code>Join point</code>ä¸Šé‡‡ç”¨çš„åŠ¨ä½œï¼Œ<code>Advice</code>æœ‰è®¸å¤šç±»å‹ï¼ŒåŒ…æ‹¬<code>around</code>,<code>before</code>,<code>after</code>ç­‰ï¼Œ</p><p><code>Advice</code>ç±»å‹ç¨åå±•ç¤ºã€‚è®¸å¤šAOPæ¡†æ¶ï¼ŒåŒ…æ‹¬Spring,å°†<code>Advice</code> å»ºæ¨¡ä¸ºæ‹¦æˆªå™¨ï¼Œå¹¶åœ¨<code>Join point</code>ä¸Šç»´æŒä¸€æ¡æ‹¦æˆªå™¨é“¾</p></li><li><p><code>Pointcut</code>:ä¸€å¥åŒ¹é…<code>Join points</code> çš„æ–­è¨€ï¼Œ<code>Advice</code>å…³è”ç€ä¸€ä¸ª<code>Pointcut expression</code>ï¼Œå¹¶ä¸”è¿è¡Œåœ¨ä»»æ„ä¸€ä¸ªè¢«</p><p><code>Pointcut</code>åŒ¹é…çš„<code>Join point</code>ä¸Šã€‚</p></li><li><p><code>Introduction</code>: æ›¿ä¸€ä¸ªç±»å£°æ˜é¢å¤–çš„æ–¹æ³•æˆ–è€…å±æ€§ï¼ŒSpring AOP ä½¿ä½ èƒ½å¤Ÿå‘ä¸€ä¸ªè¢«é€šçŸ¥(advised)çš„å¯¹è±¡å¼•å…¥æ–°çš„æ¥å£</p><p> (å’Œç›¸åº”çš„å®ç°)</p></li><li><p><code>Target object</code>: è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ª<code>Aspect</code>é€šçŸ¥(advise)çš„å¯¹è±¡ï¼Œä¹Ÿç§°ä¸º<code>advised object</code>ã€‚ç”±äºSpringä½¿ç”¨runtime proxieså®ç°AOPï¼Œè¿™ä¸ªå¯¹è±¡æ€»æ˜¯è¢«ä»£ç†çš„å¯¹è±¡ã€‚</p></li><li><p><code>AOP proxy</code>:ä»¥å®ç°Aspect contractsä¸ºç›®çš„(é€šçŸ¥æ–¹æ³•æ‰§è¡Œç­‰)è¢«AOP æ¡†æ¶åˆ›å»ºçš„å¯¹è±¡ï¼Œåœ¨Springä¸­ä¸€ä¸ªAOP proxy æ˜¯JDK dynamic proxy æˆ–è€… CGLIB proxy</p></li><li><p><code>Weaving</code>: å°†<code>Aspects</code>å’Œåº”ç”¨ä¸­çš„ç±»æˆ–è€…å¯¹è±¡è¿æ¥èµ·æ¥åˆ›å»ºä¸€ä¸ª<code>advised object</code>ã€‚è¿™ä¸ªæ“ä½œå¯ä»¥åœ¨ç¼–è¯‘æ—¶(e.g ä½¿ç”¨AspectJ compiler),åŠ è½½æ—¶ï¼Œæˆ–è€…è¿è¡Œæ—¶å®Œæˆã€‚ä¸å…¶ä»–çš„çº¯JavaAOPæ¡†æ¶ä¸€æ ·ï¼ŒSpring åœ¨è¿è¡Œæ—¶æ‰§è¡Œ<code>Weaving</code></p></li></ul><h2 id="Spring-AOP-é€šçŸ¥çš„ç±»å‹"><a href="#Spring-AOP-é€šçŸ¥çš„ç±»å‹" class="headerlink" title="Spring AOP é€šçŸ¥çš„ç±»å‹"></a>Spring AOP é€šçŸ¥çš„ç±»å‹</h2><ul><li><code>Before advice</code>: è¿è¡Œåœ¨<code>Join point</code> ä¹‹å‰çš„<code>Advice</code>ï¼Œä½†æ˜¯æ²¡æœ‰é˜»æ­¢æ‰§è¡Œæµèµ°å‘<code>Join point</code>çš„èƒ½åŠ›(é™¤éæŠ›å‡ºå¼‚å¸¸)</li><li><code>After returning advice</code>: è¿è¡Œåœ¨<code>Join point</code> æ­£å¸¸å®Œæˆä¹‹åçš„<code>Advice</code> (e.g ä¸€ä¸ªæ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æ­£å¸¸è¿”å›).</li><li><code>After throwing advice</code>: å½“æ–¹æ³•ç”±äºæŠ›å‡ºå¼‚å¸¸é€€å‡ºåè¿è¡Œçš„<code>Advice</code></li><li><code>After (finally) advice</code>: æ— è®º<code>Join point</code> ä»¥ä½•ç§æ–¹å¼é€€å‡ºéƒ½ä¼šæ‰§è¡Œçš„<code>Advice</code> (æ­£å¸¸æˆ–å¼‚å¸¸é€€å‡º).</li><li><code>Around advice</code>: ç¯ç»•<code>Join point</code>(å¦‚æ–¹æ³•è°ƒç”¨)çš„<code>Advice</code>. è¿™æ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„ä¸€ç§é€šçŸ¥.<code>Around advice</code> å¯ä»¥åœ¨æ–¹æ³•è°ƒç”¨å‰æˆ–è°ƒç”¨æ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸º å®ƒè¿˜è´Ÿè´£é€‰æ‹©æ˜¯ç»§ç»­åˆ°<code>Join point</code>ï¼Œè¿˜æ˜¯é€šè¿‡è¿”å›è‡ªå·±çš„è¿”å›å€¼æˆ–æŠ›å‡ºå¼‚å¸¸æ¥ç®€åŒ–è¢«é€šçŸ¥(advised)çš„æ–¹æ³•çš„æ‰§è¡Œã€‚</li></ul><h2 id="Pointcut-Designators"><a href="#Pointcut-Designators" class="headerlink" title="Pointcut Designators"></a>Pointcut Designators</h2><ul><li><p><code>execution</code>:ç”¨äºåŒ¹é…æ–¹æ³•æ‰§è¡Œ <code>join points</code>. åœ¨ä½¿ç”¨Spring AOPçš„æ—¶å€™ï¼Œè¿™æ˜¯ä¸»è¦çš„<code>pointcut designator</code></p></li><li><p><code>within</code>: é™åˆ¶<code>join points</code>çš„åŒ¹é… å«æœ‰ç¡®å®šçš„ä¸€äº›ç±»å‹(åœ¨ä½¿ç”¨Spring AOPæ—¶ï¼Œæ‰§è¡Œçš„æ–¹æ³•å£°æ˜ç‰¹å®šçš„ç±»å‹) </p></li><li><p><code>this</code>: é™åˆ¶<code>join points</code>çš„åŒ¹é…ï¼Œ å…¶ä¸­bean å¼•ç”¨äº†ç»™å®šç±»å‹çš„å®ä¾‹</p></li><li><p><code>target</code>:é™åˆ¶<code>join points</code>çš„åŒ¹é…,å…¶ä¸­<code>target object</code>æ˜¯ç»™å®šç±»å‹çš„å®ä¾‹</p></li><li><p><code>args</code>: é™åˆ¶<code>join points</code>çš„åŒ¹é…ï¼Œæ–¹æ³•å‚æ•°æ˜¯ç»™å®šç±»å‹çš„å®ä¾‹</p></li><li><p><code>@target</code>:é™åˆ¶<code>join points</code>çš„åŒ¹é…ï¼Œæ‰§è¡Œå¯¹è±¡çš„ç±»ä¸­å…·æœ‰ç»™å®šç±»å‹çš„æ³¨è§£</p></li><li><p><code>@args</code>: é™åˆ¶<code>join points</code>çš„åŒ¹é…ï¼Œä¼ é€’å‚æ•°çš„å®é™…ç±»å‹å…·æœ‰ç»™å®šç±»å‹çš„æ³¨è§£</p></li><li><p><code>@within</code>: é™åˆ¶<code>join points</code>çš„åŒ¹é… å«æœ‰å…·æœ‰ç»™å®šæ³¨è§£çš„ç±»å‹</p></li><li><p><code>@annotation</code>: é™åˆ¶<code>join points</code>çš„åŒ¹é… è¿æ¥ç‚¹ä¸­å…·æœ‰ç»™å®šçš„æ³¨è§£</p></li></ul><blockquote><p>ğŸ€ å…³äºå…·ä½“çš„åˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œæœ‰å¾ˆå¤šåšå®¢ï¼Œæ–‡æ¡£éƒ½æœ‰è§£é‡Šï¼Œè¿™é‡Œå¼•ç”¨ä¸€äº›ä¸ªäººè§‰å¾—æ¯”è¾ƒå¯ä»¥çš„ï¼Œä¹Ÿå¯ä»¥æŸ¥é˜…Springæ–‡æ¡£ï¼Œä½†æ„Ÿè§‰æ–‡æ¡£é‡Œå†™çš„ä¸æ˜¯å¾ˆå…¨</p><p>Aspectåˆ‡ç‚¹è¡¨è¾¾å¼ï¼š<a href="https://www.eclipse.org/aspectj/doc/released/progguide/semantics-pointcuts.html" target="_blank" rel="noopener">AspectJ Pointcuts Language Semantics</a></p><p>åšå®¢: <a href="https://www.cnblogs.com/zhangxufeng/p/9160869.html" target="_blank" rel="noopener">çˆ±å®è´</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‹åŠ¡(äºŒ)</title>
      <link href="/sunshine-carroll.github.io/2020/09/11/%E4%BA%8B%E5%8A%A1-%E4%BA%8C-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%E5%92%8C%E6%8C%81%E4%B9%85%E6%80%A7/"/>
      <url>/sunshine-carroll.github.io/2020/09/11/%E4%BA%8B%E5%8A%A1-%E4%BA%8C-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%E5%92%8C%E6%8C%81%E4%B9%85%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§"><a href="#äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§" class="headerlink" title="äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§"></a>äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§</h2><p>ä¸€ä¸ªæ•°æ®åº“çš„äº‹åŠ¡å¹¶ä¸æ˜¯æ€»èƒ½æˆåŠŸæ‰§è¡Œçš„ã€‚äº‹åŠ¡æœªæˆåŠŸæ‰§è¡Œåçš„äº‹åŠ¡å°±æ˜¯ä¸­æ­¢çš„äº‹åŠ¡,ç§°äº‹åŠ¡<code>å·²ä¸­æ­¢</code>ï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œè¿™æ ·çš„äº‹åŠ¡å¯¹æ•°æ®åº“çš„å½±å“å¿…é¡»æ’¤é”€ï¼Œä¸€ä¸ªä¸­æ­¢çš„äº‹åŠ¡å¯¹æ•°æ®åº“é€ æˆçš„å½±å“è¢«æ’¤é”€ï¼Œå°±è¯´äº‹åŠ¡<code>å·²å›æ»š</code>ï¼ŒæˆåŠŸå®Œæˆçš„äº‹åŠ¡æˆä¸º<code>å·²æäº¤</code>.æ•°æ®åº“çš„æ¢å¤æœºåˆ¶è´Ÿè´£ç®¡ç†äº‹åŠ¡çš„ä¸­æ­¢ã€‚å…¸å‹çš„æ–¹æ³•æ˜¯ç»´æŠ¤ä¸€ä¸ªæ—¥å¿—ï¼Œäº‹åŠ¡å¯¹æ•°æ®åº“çš„ä¿®æ”¹éƒ½ä¼šè®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œè®°å½•ä¹‹åæ‰ä¼šä¿®æ”¹æ•°æ®åº“ã€‚æ—¥å¿—åŠŸèƒ½æä¾›äº†ä¸¤ç§æ–¹å¼ä¿è¯åŸå­æ€§æˆ–æŒä¹…æ€§ã€‚</p><ul><li>é‡åšä¿®æ”¹ï¼Œä¿è¯åŸå­æ€§å’ŒæŒä¹…æ€§ã€‚</li><li>æ’¤é”€ä¿®æ”¹ï¼Œä¿è¯åŸå­æ€§ã€‚</li></ul><h3 id="äº‹åŠ¡çš„çŠ¶æ€"><a href="#äº‹åŠ¡çš„çŠ¶æ€" class="headerlink" title="äº‹åŠ¡çš„çŠ¶æ€"></a>äº‹åŠ¡çš„çŠ¶æ€</h3><p>æœ‰ä¸€ç§æŠ½è±¡çš„äº‹åŠ¡æ¨¡å‹æŠŠäº‹åŠ¡åˆ’åˆ†ä¸ºä¸€ä¸‹å‡ ä¸ªçŠ¶æ€:</p><ul><li><code>æ´»åŠ¨çš„</code>(active)ï¼šåˆå§‹çŠ¶æ€ã€‚äº‹åŠ¡æ‰§è¡Œæ—¶å¤„äºè¿™ä¸ªçŠ¶æ€</li><li><code>éƒ¨åˆ†æäº¤çš„</code>(partially committed)ï¼šæœ€åä¸€æ¡è¯­å¥æ‰§è¡Œå</li><li><code>å¤±è´¥çš„</code>(failed)ï¼šå‘ç°æ­£å¸¸çš„æ‰§è¡Œä¸èƒ½ç»§ç»­å</li><li><code>ä¸­æ­¢çš„</code>(aborted)ï¼šäº‹åŠ¡å›æ»š</li><li><code>æäº¤çš„</code>(committed)ï¼šæˆåŠŸå®Œæˆå</li></ul><p>çŠ¶æ€å›¾å¦‚ä¸‹æ‰€ç¤º</p><img src="/sunshine-carroll.github.io/2020/09/11/%E4%BA%8B%E5%8A%A1-%E4%BA%8C-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%E5%92%8C%E6%8C%81%E4%B9%85%E6%80%A7/state_diagram_of_a_transaction.png" alt="state_diagram_of_a_transaction" style="zoom:50%;"><ul><li>å½“äº‹åŠ¡å¼€å§‹æ—¶å¤„äº<code>active</code></li><li><code>active</code>-&gt; <code>partially committed</code>: å®Œæˆäº‹åŠ¡ä¸­æœ€åä¸€æ¡è¯­å¥</li><li><code>active</code>-&gt; <code>failed</code>: å‘ç°æ­£å¸¸çš„æ‰§è¡Œä¸èƒ½ç»§ç»­</li><li><code>partially committed</code> -&gt; <code>committed</code>:æˆåŠŸå®Œæˆå</li><li><code>partially committed</code> -&gt; <code>failed</code>: å‘ç°æ­£å¸¸çš„æ‰§è¡Œä¸èƒ½ç»§ç»­</li><li><code>failed</code> -&gt; <code>aborted</code>:å¤±è´¥çš„äº‹åŠ¡å›æ»šå</li></ul><p>äº‹åŠ¡è¿›å…¥ä¸­æ­¢ç³»ç»Ÿå¯ä»¥æœ‰ä¸¤ç§æ“ä½œ:</p><ol><li><p>é‡å¯äº‹åŠ¡:å½“äº‹åŠ¡çš„ä¸­æ­¢æ˜¯ç”±äºç¡¬ä»¶é”™è¯¯æˆ–ä¸æ˜¯ç”±äºäº‹åŠ¡çš„å†…éƒ¨é€»è¾‘é”™è¯¯å¯¼è‡´çš„</p></li><li><p>æ€æ­»äº‹åŠ¡:å½“äº‹åŠ¡çš„ä¸­æ­¢æ˜¯ç”±äºäº‹åŠ¡å†…éƒ¨æ‰§è¡Œé€»è¾‘é”™è¯¯å¯¼è‡´çš„</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> transaction </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„</title>
      <link href="/sunshine-carroll.github.io/2020/09/10/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84/"/>
      <url>/sunshine-carroll.github.io/2020/09/10/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†å±‚æ¶æ„"><a href="#åˆ†å±‚æ¶æ„" class="headerlink" title="åˆ†å±‚æ¶æ„"></a>åˆ†å±‚æ¶æ„</h2><img src="/sunshine-carroll.github.io/2020/09/10/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84/sunshine/blog/source/_posts/2020-09-10-é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„/layered_architecture_01.png" alt="layered_architecture_01" style="zoom: 33%;"><h3 id="ä¸¥æ ¼åˆ†å±‚æ¶æ„å’Œéä¸¥æ ¼åˆ†å±‚æ¶æ„"><a href="#ä¸¥æ ¼åˆ†å±‚æ¶æ„å’Œéä¸¥æ ¼åˆ†å±‚æ¶æ„" class="headerlink" title="ä¸¥æ ¼åˆ†å±‚æ¶æ„å’Œéä¸¥æ ¼åˆ†å±‚æ¶æ„"></a>ä¸¥æ ¼åˆ†å±‚æ¶æ„å’Œéä¸¥æ ¼åˆ†å±‚æ¶æ„</h3><h3 id="åŠ å…¥ä¾èµ–å€’ç½®"><a href="#åŠ å…¥ä¾èµ–å€’ç½®" class="headerlink" title="åŠ å…¥ä¾èµ–å€’ç½®"></a>åŠ å…¥ä¾èµ–å€’ç½®</h3><h2 id="å…­è¾¹å½¢æ¶æ„"><a href="#å…­è¾¹å½¢æ¶æ„" class="headerlink" title="å…­è¾¹å½¢æ¶æ„"></a>å…­è¾¹å½¢æ¶æ„</h2>]]></content>
      
      
      <categories>
          
          <category> é¢†åŸŸé©±åŠ¨è®¾è®¡(Domain Driven Design) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> architecture </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‹åŠ¡(ä¸€)</title>
      <link href="/sunshine-carroll.github.io/2020/09/09/%E4%BA%8B%E5%8A%A1-%E4%B8%80/"/>
      <url>/sunshine-carroll.github.io/2020/09/09/%E4%BA%8B%E5%8A%A1-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>#äº‹åŠ¡æ¦‚å¿µ</p><p>â€‹        äº‹åŠ¡æ˜¯è®¿é—®å¯èƒ½æ›´æ–°å„ç§æ•°æ®é¡¹çš„ä¸€ä¸ªç¨‹åºæ‰§è¡Œå•å…ƒ(å•ä¸€é€»è¾‘å·¥ä½œå•å…ƒçš„æ“ä½œé›†åˆ)ã€‚å…·æœ‰åŸå­æ€§ï¼Œä¸€è‡´æ€§ï¼Œéš”ç¦»æ€§ï¼ŒæŒä¹…æ€§å››ä¸ªç‰¹ç‚¹ç®€ç§°ACIDç‰¹æ€§ã€‚</p><ol><li><p><code>åŸå­æ€§</code>ï¼ˆAtomicityï¼‰äº‹åŠ¡ä¸­æ‰€æœ‰çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ­£ç¡®çš„ååº”å‡ºæ¥ï¼Œè¦ä¹ˆå…¨éƒ¨ä¸ååº”ã€‚</p></li><li><p><code>ä¸€è‡´æ€§</code>(Consistency) éš”ç¦»æ‰§è¡Œäº‹åŠ¡æ—¶(æ²¡æœ‰å…¶ä»–äº‹ç‰©æ‰§è¡Œçš„æƒ…å†µä¸‹)ï¼Œä¿æŒæ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚å•ä¸ªäº‹åŠ¡çš„ä¸€è‡´æ€§æ˜¯ç¼–å†™äº‹åŠ¡äººå‘˜çš„è´£ä»»ã€‚</p></li><li><p><code>éš”ç¦»æ€§</code>(Isolation)    åœ¨äº‹åŠ¡å¹¶å‘æ‰§è¡Œä¸­ï¼Œå„ä¸ªäº‹åŠ¡éƒ½æ„Ÿè§‰ä¸åˆ°ç³»ç»Ÿä¸­æœ‰å…¶ä»–äº‹åŠ¡æ‰§è¡Œã€‚å¯¹äºä»»æ„ä¸¤ä¸ªäº‹åŠ¡$T_i,T_j$,å¯¹äº$T_i$çœ‹æ¥ï¼Œ</p><p>$T_j$åœ¨$T_i$å¼€å§‹æ‰§è¡Œä¹‹å‰å°±æ‰§è¡Œå®Œæˆï¼Œæˆ–è€…$T_j$åœ¨$T_i$æ‰§è¡Œå®Œæ¯•åå®Œæˆã€‚</p></li><li><p><code>æŒä¹…æ€§</code>(Durability) ä¸€ä¸ªäº‹åŠ¡å‘ç”Ÿåï¼Œå¯¹æ•°æ®åº“çš„æ”¹å˜å¿…é¡»æ˜¯æ°¸ä¹…çš„ï¼Œå³ä½¿ç³»ç»Ÿå‡ºç°æ•…éšœã€‚</p></li></ol><h2 id="ç®€å•çš„äº‹ç‰©æ¨¡å‹"><a href="#ç®€å•çš„äº‹ç‰©æ¨¡å‹" class="headerlink" title="ç®€å•çš„äº‹ç‰©æ¨¡å‹"></a>ç®€å•çš„äº‹ç‰©æ¨¡å‹</h2><ul><li>read(X) : ä»æ•°æ®åº“æŠŠæ•°æ®é¡¹Xä¼ é€åˆ°æ‰§è¡Œreadæ“ä½œçš„äº‹åŠ¡çš„ä¸»å­˜ç¼“å†²åŒºçš„ä¸€ä¸ªä¹Ÿç§°ä¹‹ä¸ºXçš„å˜é‡ä¸­ã€‚</li><li>write(X) : ä»æ‰§è¡Œwriteçš„äº‹åŠ¡çš„ä¸»å­˜ç¼“å†²åŒºä¸­çš„å˜é‡Xä¼ é€ä¼šå›æ•°æ®åº“ã€‚ </li></ul><p>å‡è®¾æœ‰äº‹åŠ¡$T_i$ï¼Œ$T_i$æ‰§è¡Œçš„æ“ä½œæ˜¯æŠŠAè´¦æˆ·ä¸­çš„Â¥50è¿‡æˆ·ç»™Bï¼Œå…¶è¿‡ç¨‹å¯ä»¥å¦‚ä¸‹<br>$$<br>\begin{align}<br>T_i:&amp;read(A)\<br>&amp;A = A - 50;\<br>&amp;write(A);\<br>&amp;read(B);\<br>&amp;B = B + 50;\<br>&amp;write(B);<br>\end{align}<br>$$<br>æˆ‘ä»¬ä»è¿™ä¸ªä¾‹å­ä¸­å»çœ‹äº‹åŠ¡çš„<code>ACID</code>ç‰¹æ€§</p><ul><li><p><code>åŸå­æ€§</code></p><p>ä»ä¸Šé¢çš„æ¦‚å¿µä¸­å¯çŸ¥ï¼ŒåŸå­æ€§æŒ‡äº‹åŠ¡ä¸­æ‰€æœ‰çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ­£ç¡®çš„ååº”å‡ºæ¥ï¼Œè¦ä¹ˆå…¨éƒ¨ä¸ååº”çš„ç‰¹æ€§ã€‚</p><p>åœ¨è¿‡æˆ·æ“ä½œä¸­ï¼Œè´¦æˆ·A,Bçš„è´¢äº§æ€»å’Œåº”è¯¥æ˜¯ç›¸åŒçš„ï¼Œè¿™æ˜¯ä¸€æ¡ä¸€è‡´æ€§çº¦æŸï¼Œå‡è®¾æ²¡æœ‰åŸå­æ€§ï¼Œäº‹åŠ¡$T_i$åœ¨æ‰§è¡Œå®Œwirte(A)åï¼Œç”±äºç³»ç»Ÿæ•…éšœæˆ–è€…åˆ«çš„ä»€ä¹ˆåŸå› ä¸­æ­¢ï¼Œä»è´¦æˆ·Aä¸­æ‰£æ¬¾çš„Â¥50å°±ä¸ä¼šåˆ°è´¦æˆ·Bä¸­,å°±ä¼šè¿åä¸€è‡´æ€§ã€‚</p></li><li><p><code>ä¸€è‡´æ€§</code></p><p>å°±å¦‚åŸå­æ€§ä¸­æ‰€è¯´ï¼Œè´¦æˆ·A,Bçš„è´¢äº§æ€»å’Œåº”è¯¥æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœæ•°æ®åº“åœ¨è¿‡æˆ·æ“ä½œä¹‹å‰æ˜¯æ»¡è¶³çº¦æŸçš„ï¼Œé‚£ä¹ˆè¿‡æˆ·ä¹‹åä¹Ÿåº”è¯¥æ»¡è¶³çº¦æŸã€‚äº‹åŠ¡çš„ä¸€è‡´æ€§ä¸å…¨ç”±æ•°æ®åº“æ‰¿æ‹…ï¼Œç¼–å†™äº‹åŠ¡æ˜¯ç¨‹åºå‘˜åº”è¯¥ç¡®ä¿å•ä¸€äº‹åŠ¡çš„ä¸€è‡´æ€§</p></li><li><p><code>æŒä¹…æ€§</code></p><p>å‡å¦‚è¿‡æˆ·æ“ä½œä¸€æ—¦æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå¿…é¡»ä¿è¯ä»»ä½•ç³»ç»Ÿæ•…éšœéƒ½ä¸ä¼šå¯¼è‡´ç›¸å…³æ•°æ®ä¸¢å¤±</p></li><li><p><code>éš”ç¦»æ€§</code></p><p>å°±ç®—å•ä¸ªäº‹åŠ¡æ˜¯ä¸€è‡´çš„ï¼Œä½†å½“äº‹åŠ¡å¹¶å‘æ‰§è¡Œåï¼Œæ²¡æœ‰åˆ«çš„æœºåˆ¶çš„å½±å“ï¼Œä¾æ—§ä¼šå¯¼è‡´æ•°æ®åº“å¤„äºä¸ä¸€è‡´çŠ¶æ€ã€‚</p><p>å‡è®¾æœ‰äº‹åŠ¡$T_j$ï¼š<br>$$<br>\begin{align}<br>T_i:&amp;read(A)\<br>&amp;A = A - 50;\<br>&amp;write(A);\<br>&amp;read(C);\<br>&amp;C = C + 50;\<br>&amp;write(C);<br>\end{align}<br>$$<br>äº‹åŠ¡$T_i$åœ¨æ‰§è¡Œwirte(A)ä¹‹å‰,äº‹åŠ¡$T_j$æ‰§è¡Œå®Œwrite(A).ä¹‹åç”±äºè°ƒåº¦ç»§ç»­æ‰§è¡Œäº‹åŠ¡$T_i$é‚£ä¹ˆäº‹åŠ¡$T_j$å†™å…¥çš„æ•°æ®å°±ä¼šè¢«é”™è¯¯çš„è¦†ç›–ï¼Œå°±ä¼šè¿åä¸€è‡´æ€§çº¦æŸã€‚äº‹åŠ¡çš„éš”ç¦»æ€§è¦ç¡®ä¿äº‹åŠ¡å¹¶å‘æ‰§è¡Œåç³»ç»Ÿçš„çŠ¶æ€è¦å’Œè¿™äº›äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œåçš„ä¸€æ ·</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> transaction </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bean-scope</title>
      <link href="/sunshine-carroll.github.io/2020/09/09/bean-scope/"/>
      <url>/sunshine-carroll.github.io/2020/09/09/bean-scope/</url>
      
        <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><table><thead><tr><th>Scope</th><th>Description</th></tr></thead><tbody><tr><td><code>singleton</code></td><td>(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.</td></tr><tr><td><code>prototype</code></td><td>Scopes a single bean definition to any number of object instances.</td></tr><tr><td><code>request</code></td><td>Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring ApplicationContext.</td></tr><tr><td><code>session</code></td><td>Scopes a single bean definition to the lifecycle of an HTTP Session. Only valid in the context of a web-aware Spring ApplicationContext.</td></tr><tr><td><code>application</code></td><td>Scopes a single bean definition to the lifecycle of a ServletContext. Only valid in the context of a web-aware Spring ApplicationContext.</td></tr><tr><td><code>websocket</code></td><td>Scopes a single bean definition to the lifecycle of a WebSocket. Only valid in the context of a web-aware Spring ApplicationContext.</td></tr></tbody></table><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><ul><li><p>Spring singleton å’Œ è®¾è®¡æ¨¡å¼singletonçš„åŒºåˆ«ï¼Ÿ</p><p>Spring singletonç›¸å¯¹äºä¸€ä¸ªIocå®¹å™¨ï¼Œè®¾è®¡æ¨¡å¼çš„ singleton ç›¸å¯¹äºä¸€ä¸ªç±»åŠ è½½å™¨ã€‚</p></li><li><p>Scopeæ˜¯å¦åªæœ‰ä¸Šé¢çš„6ç§ï¼Ÿ</p><p>å¦ï¼ŒSpringçš„scopeæ˜¯å¯æ‰©å±•çš„ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­è¯¦ç»†çš„æè¿°äº†å¦‚ä½•è‡ªå®šä¹‰Scope <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-factory-scopes-custom" target="_blank" rel="noopener">å¿«æ·é“¾æ¥</a>ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Iocå®¹å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸ¥è¯¢å¤„ç†(äºŒ)</title>
      <link href="/sunshine-carroll.github.io/2020/09/04/%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86(%E4%BA%8C)/"/>
      <url>/sunshine-carroll.github.io/2020/09/04/%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»£ä»·åº¦é‡"><a href="#ä»£ä»·åº¦é‡" class="headerlink" title="ä»£ä»·åº¦é‡"></a>ä»£ä»·åº¦é‡</h2><p>å½±å“ä¸€æ¬¡æŸ¥è¯¢æ‰§è¡Œçš„ä»£ä»·æœ‰å¾ˆå¤šï¼Œç£ç›˜è¯»å–ï¼ŒCPUæ‰§è¡Œï¼Œå¹¶è¡Œ/åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿä¸­çš„é€šä¿¡ä»£ä»·ç­‰ã€‚æœ‰äº›ä»£ä»·éš¾ä»¥åº¦é‡ï¼Œå¹¶ä¸”å¹¶éä¸»è¦ä»£ä»·ï¼Œè¿™é‡Œä½¿ç”¨ç£ç›˜æœç´¢æ¬¡æ•°å’Œä¼ é€ç£ç›˜å—æ•°æ¥åº¦é‡æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„ä»£ä»·ã€‚å‡è®¾ç£ç›˜å­ç³»ç»Ÿä¼ è¾“ä¸€ä¸ªç£ç›˜å—çš„æ—¶é—´ä¸º$t_s$,ä¸€æ¬¡ç£ç›˜æœç´¢çš„æ—¶é—´ä¸º$t_T$ã€‚</p><h2 id="é€‰æ‹©è¿ç®—çš„ä»£ä»·ä¼°è®¡"><a href="#é€‰æ‹©è¿ç®—çš„ä»£ä»·ä¼°è®¡" class="headerlink" title="é€‰æ‹©è¿ç®—çš„ä»£ä»·ä¼°è®¡"></a>é€‰æ‹©è¿ç®—çš„ä»£ä»·ä¼°è®¡</h2><p>è€ƒè™‘æ‰€æœ‰å…ƒç»„éƒ½å­˜åœ¨å•ä¸€æ–‡ä»¶å…³ç³»ä¸Šçš„ä¸€ä¸ªé€‰æ‹©è¿ç®—ã€‚</p><p>æ³¨æ„ä¸€èˆ¬$B^+$æ ‘éå¶èŠ‚ç‚¹å°äºæ€»ç»“ç‚¹æ•°çš„1%ï¼Œ$B^+$æ ‘ nçš„å¤§å°ä¸€èˆ¬ç­‰äºç£ç›˜å—å¤§å°ã€‚</p><table><thead><tr><th align="center"></th><th align="center">ç®—æ³•</th><th align="center">å¼€é”€</th><th align="center">åŸå› </th></tr></thead><tbody><tr><td align="center">$A_1$</td><td align="center">çº¿æ€§æœç´¢</td><td align="center">$t_s+b_r\times t_T$</td><td align="center">ä¸€æ¬¡åˆå§‹æœç´¢ï¼ŒåŠ $b_r$æ¬¡å—ä¼ è¾“</td></tr><tr><td align="center">$A_2$</td><td align="center">çº¿æ€§æœç´¢,ç ç­‰å€¼æ¯”è¾ƒ</td><td align="center">å¹³å‡æƒ…å½¢: $t_s+(b_r/2)\times t_T$</td><td align="center">ç”±äºæœ€å¤šåªæœ‰ä¸€æ¡è®°å½•æ»¡è¶³æ¡ä»¶ï¼Œæœç´¢åˆ°æ•°æ®å°±èƒ½ç»ˆæ­¢æœç´¢</td></tr><tr><td align="center">$A_3$</td><td align="center">$B^+$æ ‘ä¸»ç´¢å¼•ï¼Œç ç­‰å€¼æ¯”è¾ƒ</td><td align="center">$(h_i+1)(t_T+t_s)$</td><td align="center">$h_i$æ˜¯$B^+$æ ‘çš„é«˜åº¦ã€‚æ ¹æ®$B^+$æ ‘æŸ¥æ‰¾è®°å½•çš„ç®—æ³•ï¼ŒæŸ¥æ‰¾æ—¶ï¼Œç©¿è¶Šæ•´æ£µæ ‘çš„é«˜åº¦ï¼Œæ¯æ¬¡ç©¿è¶Šéƒ½éœ€è¦ä¸€æ¬¡æœç´¢å’Œä¼ è¾“æ‰¾åˆ°ç»“ç‚¹ï¼Œæœ€åä¸€æ¬¡ä¼ è¾“å’Œæœç´¢æ‰¾åˆ°è®°å½•</td></tr><tr><td align="center">$A_4$</td><td align="center">$B^+$æ ‘ä¸»ç´¢å¼•ï¼Œéç ç­‰å€¼æ¯”è¾ƒ</td><td align="center">$h_i(t_T+t_s)+b\times t_T$</td><td align="center">ç”±äºæ•°æ®æŒ‰ä¸»ç´¢å¼•å­˜å‚¨ä¸éœ€è¦é¢å¤–çš„æœç´¢ï¼Œbæ˜¯å­˜å‚¨æ¯”è¾ƒå€¼çš„å—æ•°</td></tr><tr><td align="center">$A_5$</td><td align="center">$B^+$æ ‘è¾…åŠ©ç´¢å¼•ï¼Œç ç­‰å€¼æ¯”è¾ƒ</td><td align="center">$(h_i+1)(t_T+t_s)$</td><td align="center">å’Œä¸»ç´¢å¼•ç±»ä¼¼</td></tr><tr><td align="center">$A_6$</td><td align="center">$B^+$æ ‘è¾…åŠ©ç´¢å¼•ï¼Œéç ç­‰å€¼æ¯”è¾ƒ</td><td align="center">$(h_i+n)(t_T+t_s)$</td><td align="center">nè¡¨ç¤ºå–åˆ°çš„è®°å½•æ•°,è¾…åŠ©ç´¢å¼•ç´¢å¼•é¡ºåºäºå­˜å‚¨é¡ºåºä¸åŒï¼ŒæŸ¥æ‰¾åˆ°næ¡è®°å½•ï¼Œå°±éœ€è¦næ¬¡ç£ç›˜ä¼ è¾“å’Œç£ç›˜æœç´¢ï¼Œå†åŠ ä¸Š$B^+$æ ‘é«˜åº¦çš„ç©¿è¶Š</td></tr><tr><td align="center">$A_7$</td><td align="center">$B^+$æ ‘ä¸»ç´¢å¼•ï¼Œæ¯”è¾ƒ</td><td align="center">$h_i(t_T+t_s)+b\times t_T$</td><td align="center">æ ¹æ®$B^+$æ ‘å–æ•°æ®çš„è¿‡ç¨‹ï¼Œç¬¦åˆæ¡ä»¶çš„ç´¢å¼•å€¼æ˜¯è¿ç»­çš„ï¼Œå­˜å‚¨çš„ä½ç½®ä¹Ÿæ˜¯è¿ç»­çš„ï¼Œä¸ç®¡æ˜¯ç­‰å€¼æ¯”è¾ƒè¿˜æ˜¯æ¯”è¾ƒï¼Œè¿‡ç¨‹éƒ½ç±»ä¼¼ï¼Œä¸”å–æ•°æ®çš„è¿‡ç¨‹éƒ½ä¸éœ€è¦é¢å¤–çš„ç£ç›˜æœç´¢</td></tr><tr><td align="center">$A_8$</td><td align="center">$B^+$æ ‘è¾…åŠ©ç´¢å¼•ï¼Œæ¯”è¾ƒ</td><td align="center">$(h_i+n)(t_T+t_s)$</td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p>ä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºä¸€äº›ç‰¹ç‚¹</p><ul><li>ä¸è®ºæ˜¯$B^+$æ ‘ä¸»ç´¢å¼• è¿˜æ˜¯ $B^+$æ ‘è¾…åŠ©ç´¢å¼•ï¼Œè¿›è¡Œéç ç­‰å€¼æ¯”è¾ƒæ—¶å’Œæ¯”è¾ƒçš„å¼€é”€éƒ½ç›¸åŒï¼Œè¿™æ˜¯ç”±$B^+$æ ‘æœç´¢è¿‡ç¨‹å†³å®šçš„ã€‚ä¸åŒçš„æ˜¯ä¸»ç´¢å¼•çš„å­˜å‚¨é¡ºåºå’Œè®°å½•å­˜å‚¨é¡ºåºç›¸åŒï¼Œç›¸è¾ƒäºè¾…åŠ©ç´¢å¼•ï¼Œå–æ•°æ®ä¸éœ€è¦é¢å¤–çš„ç£ç›˜æœç´¢æ“ä½œ</li><li>å¯¹äºç­‰å€¼æ¯”è¾ƒï¼Œç ç­‰å€¼æ¯”è¾ƒç”±äºåªæœ‰0ä¸ªæˆ–ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œä¸ç®¡æ˜¯è¾…åŠ©ç´¢å¼•è¿˜æ˜¯ä¸»ç´¢å¼•ï¼Œéƒ½ä¸ä¼šå­˜åœ¨ç”±äºæ•°æ®å­˜å‚¨é¡ºåºå‡ºç°çš„é¢å¤–çš„ç£ç›˜æœç´¢ï¼Œéç ç­‰å€¼æ¯”è¾ƒæœ‰0ä¸ªæˆ–å¤šä¸ªåŒ¹é…é¡¹ï¼Œè¾…åŠ©ç´¢å¼•ä¸Šçš„éç ç­‰å€¼æ¯”è¾ƒç”±äºæ•°æ®å­˜å‚¨é¡ºåºå’Œç´¢å¼•é¡ºåºä¸åŒï¼Œæ¯ä¸ªåŒ¹é…é¡¹éƒ½éœ€è¦ä¸€æ¬¡ç£ç›˜æœç´¢å’Œç£ç›˜ä¼ è¾“</li></ul>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŸ¥è¯¢å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysqlæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’</title>
      <link href="/sunshine-carroll.github.io/2020/08/31/mysql%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/"/>
      <url>/sunshine-carroll.github.io/2020/08/31/mysql%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/</url>
      
        <content type="html"><![CDATA[<p>æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’æ˜¯ä¸€ä¸ªå¸¦å¦‚ä½•æ‰§è¡Œçš„æ³¨é‡Šçš„å…³ç³»ä»£æ•°è¿ç®—åºåˆ—ï¼Œç”±ä¼˜åŒ–å™¨å°†é«˜çº§æ•°æ®åº“è¯­è¨€ç¿»è¯‘æˆæ–‡ä»¶ç³»ç»Ÿç‰©ç†å±‚ä¸Šèƒ½å¤Ÿä½¿ç”¨çš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ã€‚</p><p><a href="https://dev.mysql.com/doc/refman/8.0/en/execution-plan-information.html" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><h2 id="mysqlæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’"><a href="#mysqlæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’" class="headerlink" title="mysqlæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’"></a>mysqlæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’</h2><p>mysql çš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’å±•ç¤ºmysqlå¦‚ä½•å»æ‰§è¡Œsqlè¯­å¥çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> &lt;<span class="keyword">statement</span>&gt;</span><br></pre></td></tr></table></figure><p> æ¥æŸ¥çœ‹æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼Œ<code>explain</code>å…³é”®å­—å¯ä»¥ä½œç”¨äº<code>insert</code>,<code>delete</code>,<code>update</code>,<code>replace</code>,<code>select</code> è¯­å¥ä¸Š</p><h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>å‡è®¾æœ‰ä¸¤ä¸ªå…³ç³» <code>instructor</code> å’Œ <code>department</code> ä»–ä»¬çš„å…³ç³»æ¨¡å¼å¦‚ä¸‹<br>$$<br>\begin{align}<br>&amp;instrucor(id,name,dept_name,salary)\<br>&amp;department(dept_name,building,budget)<br>\end{align}<br>$$<br>å‡è®¾æˆ‘ä»¬è¦æ‰¾åˆ°Psychologyç³»æ‰€æœ‰instructorçš„åç§°ï¼Œå…¶sqlè¯­å¥å¯ä»¥å¦‚ä¸‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> instructor.name,instructor.dept_name <span class="keyword">from</span> instructor  <span class="keyword">inner</span> <span class="keyword">join</span> department <span class="keyword">on</span> instructor.dept_name = department.dept_name <span class="keyword">where</span> department.dept_name = <span class="string">'Psychology'</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡MySQLWorkbench explain å¯ä»¥å¾—åˆ°ä»–çš„æŸ¥è¯¢è®¡åˆ’</p><p><img src="/sunshine-carroll.github.io/2020/08/31/mysql%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/execution_plain_table.png" alt="exection_plain_table"></p><p>æ­¤å¤–MySQLWorkbench è¿˜æä¾›äº†å›¾å½¢åŒ–çš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’å±•ç¤º</p><p><img src="/sunshine-carroll.github.io/2020/08/31/mysql%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/execution_plan_graph.png" alt="execution_plan_graph"></p><p>ä¸‹é¢è¿™ä¸ªè¡¨æ ¼è§£é‡Šäº†è¾“å‡ºçš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰</p><table><thead><tr><th>Column</th><th>JSON Name</th><th>Meaning</th></tr></thead><tbody><tr><td>id</td><td>select_id</td><td>SELECT æ ‡å¿—(The SELECT identifier)</td></tr><tr><td>select_type</td><td>None</td><td>SELECT ç±»å‹(The SELECT type)</td></tr><tr><td>table</td><td>table_name</td><td>è¾“å‡ºè¡Œæ‰€åœ¨çš„è¡¨(The table for the output row)</td></tr><tr><td>partitions</td><td>partitions</td><td>åŒ¹é…çš„åˆ†åŒº(The matching partitions)</td></tr><tr><td>type</td><td>access_type</td><td>è¿æ¥ç±»å‹(The join type)</td></tr><tr><td>possible_keys</td><td>possible_keys</td><td>å¯èƒ½é€‰æ‹©çš„ç´¢å¼•(The possible indexes to choose)</td></tr><tr><td>key</td><td>key</td><td>å®é™…é€‰æ‹©çš„ç´¢å¼•(The index actually chosen)</td></tr><tr><td>key_len</td><td>key_length</td><td>é€‰æ‹©çš„ç´¢å¼•çš„é•¿åº¦(The length of the chosen key)</td></tr><tr><td>ref</td><td>ref</td><td>å’Œç´¢å¼•æ¯”è¾ƒçš„åˆ—(The columns compared to the index)</td></tr><tr><td>rows</td><td>rows</td><td>ä¼°è®¡è¢«æ£€æŸ¥çš„è¡Œæ•°(Estimate of rows to be examined)</td></tr><tr><td>filtered</td><td>filtered</td><td>é€šè¿‡è¡¨æ¡ä»¶è¿‡æ»¤çš„è¡Œæ‰€å ç™¾åˆ†æ¯”(Percentage of rows filtered by table condition)</td></tr><tr><td>Extra</td><td>None</td><td>é¢å¤–ä¿¡æ¯(Additional information)</td></tr></tbody></table><ul><li><p>idï¼ˆselect_idï¼‰</p><p>select æ ‡å¿—ï¼Œåœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­ä¸€æ¬¡selectçš„åºåˆ—å·ã€‚å¦‚æœä¸€è¡Œå‚ç…§å…¶ä»–è¡Œçš„åˆå¹¶ç»“æœ,idçš„å€¼å¯ä»¥ä¸ºnullã€‚åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œtableåˆ—ä¼šæ˜¾ç¤ºç±»ä¼¼<br>$$<br>&lt;unionM,N&gt;<br>$$<br>æ ¼å¼çš„å€¼æ¥è¡¨ç¤ºè¯¥è¡Œå‚ç…§çš„åˆå¹¶çš„å…¶ä»–è¡Œçš„idå€¼M,N</p></li><li><p>select_type(none)</p><p>selectçš„ç±»å‹ã€‚ æ›´å¤šè§ä¸‹ã€‚</p></li><li><p><code>table</code>(<code>table_name</code>)</p><p>è¾“å‡ºè¡Œæ‰€å‚ç…§çš„è¡¨çš„åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€ï¼š</p><ul><li>&lt;unionM,N&gt; è¯¥è¡Œæ‰€å‚ç…§çš„å’Œå¹¶è¡Œçš„idå€¼M,Nã€‚</li><li>&lt;derivedN&gt; è¯¥è¡Œæ‰€å‚ç…§çš„æ´¾ç”Ÿè¡¨ç»“æœçš„è¡Œçš„idå€¼Nã€‚ ä¸¾ä¸ªä¾‹å­ ä¸€ä¸ªæ´¾ç”Ÿè¡¨å¯èƒ½æ˜¯æ¥è‡ªfromå­å¥ä¸­çš„å­æŸ¥è¯¢ã€‚</li><li>&lt;subqueryN&gt; è¯¥è¡Œæ‰€å‚ç…§çš„ç‰©åŒ–å­æŸ¥è¯¢ç»“æœçš„è¡Œçš„idå€¼Nã€‚</li></ul></li><li><p><code>partitions</code>(<code>partitions</code>)</p><p>æŸ¥è¯¢ä¸­ï¼Œè®°å½•åŒ¹é…çš„åˆ†åŒºã€‚éåˆ†åŒºè¡¨çš„æ˜¯ï¼Œè¯¥å€¼ä¸ºNULLã€‚</p></li><li><p><code>type</code> (<code>access_type</code>)</p><p>è¿æ¥ç±»å‹ã€‚</p></li><li><p><code>possible_keys</code>(<code>possible_keys</code>)</p><p><code>possible_keys</code>æŒ‡ç¤ºmysqlå¯ä»¥é€‰æ‹©ç”¨æ¥å¯»æ‰¾è¡¨ä¸­çš„è¡Œçš„ç´¢å¼•ã€‚</p></li><li><p><code>key</code>(<code>key</code>)</p><p>mysqlå®é™…é€‰æ‹©çš„ç´¢å¼•ã€‚</p></li><li><p><code>key_len</code>(<code>key_length</code>)</p><p>ç”±äºkeyçš„å­˜å‚¨æ ¼å¼ï¼Œä¸€ä¸ªå¯ä»¥å…è®¸NULLçš„åˆ—keyçš„é•¿åº¦æ¯”NOT NULLçš„keyçš„é•¿åº¦å¤§ä¸€ã€‚</p></li><li><p><code>ref</code>(<code>rows</code>)</p><p>å±•ç¤ºå“ªäº›è¡Œæˆ–å¸¸é‡ä¸keyåˆ—ä¸­ç´¢å¼•åæ¯”è¾ƒï¼Œä»¥ä¾¿ä»è¡¨ä¸­å¯»æ‰¾è¡Œã€‚</p><p>å¦‚æœå€¼ä¸ºfunc,åˆ™ä½¿ç”¨çš„å€¼æ˜¯æŸä¸ªå‡½æ•°çš„ç»“æœã€‚</p><p>è¦æŸ¥çœ‹æ˜¯å“ªä¸ªå‡½æ•°ï¼Œå¯ä»¥åœ¨EXPLAINåé¢ä½¿ç”¨SHOW warningæ¥æŸ¥çœ‹æ‰©å±•çš„EXPLAINè¾“å‡ºã€‚</p></li><li><p><code>rows</code>(<code>rows</code>)</p><p>æŒ‡ç¤ºMysqlè®¤ä¸ºåœ¨æ‰§è¡ŒæŸ¥è¯¢æ˜¯å¿…é¡»æ£€æŸ¥çš„è¡Œæ•°ã€‚</p><p>å¯¹InnoDBè¡¨ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½ä¸ä¼šç»å¸¸ç¡®åˆ‡</p></li><li><p><code>filtered</code>(<code>filtered</code>)</p><p>æŒ‡ç¤ºä¸€ä¸ªä¼°è®¡çš„ç™¾åˆ†å€¼ï¼Œè¿™ä¸ªç™¾åˆ†å€¼è¡¨ç¤ºé€šè¿‡è¡¨æ¡ä»¶ç­›é€‰å‡ºçš„è¡Œç«™è¡¨çš„æ€»è¡Œæ•°çš„ç™¾åˆ†æ¯”ã€‚</p><p>æœ€å¤§å€¼ä¸º100ï¼Œè¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿè¡Œçš„ç­›é€‰ã€‚rowså±•ç¤ºäº†éœ€è¦å—æ£€çš„è¡Œæ•°çš„ä¼°è®¡ï¼Œrows*filteredè¡¨ç¤º</p><p>ä¸ä¸‹ä¸€ä¸ªè¡¨è¿›è¡Œè¿æ¥è¿ç®—çš„è¡Œæ•°</p></li><li><p><code>Extra</code>(<code>none</code>)</p><p>mysqlè§£ææŸ¥è¯¢çš„é¢å¤–ä¿¡æ¯</p></li></ul><h2 id="select-typeçš„è§£é‡Š"><a href="#select-typeçš„è§£é‡Š" class="headerlink" title="select_typeçš„è§£é‡Š"></a><code>select_type</code>çš„è§£é‡Š</h2><table><thead><tr><th>select_type Value</th><th>JSON Name</th><th>Meaning</th></tr></thead><tbody><tr><td><code>SIMPLE</code></td><td><code>None</code></td><td>ç®€å•çš„<code>SELECT</code>(ä¸ä½¿ç”¨<code>UNION</code> æˆ– <code>subqueries</code> )<br>Simple <code>SELECT</code> (not using <code>UNION</code> or <code>subqueries</code>)</td></tr><tr><td><code>PRIMARY</code></td><td><code>None</code></td><td>å¤–éƒ¨æŸ¥è¯¢ <br>Outermost <code>SELECT</code></td></tr><tr><td><code>UNION</code></td><td><code>None</code></td><td><code>UNION</code> ä¸­ç¬¬äºŒä¸ªåŠä¹‹åçš„<code>SELECT </code><br>Second or later <code>SELECT</code> statement in a <code>UNION</code></td></tr><tr><td><code>DEPENDENT UNION</code></td><td><code>dependent</code> (true)</td><td>UNION ä¸­ç¬¬äºŒä¸ªåŠä¹‹åçš„SELECT,ä¾èµ–å¤–æŸ¥è¯¢ <br>Second or later <code>SELECT</code> statement in a <code>UNION</code>, dependent on outer query</td></tr><tr><td><code>UNION RESULT</code></td><td><code>union_result</code></td><td><code>UNION</code> çš„ç»“æœ <br>Result of a <code>UNION</code>.</td></tr><tr><td><code>SUBQUERY</code></td><td><code>None</code></td><td>å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª<code>SELECT</code> <br>First <code>SELECT</code> in <code>subquery</code></td></tr><tr><td><code>DEPENDENT SUBQUERY</code></td><td><code>dependent</code> (true)</td><td>å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª<code>SELECT</code>,ä¾èµ–å¤–æŸ¥è¯¢<br>First <code>SELECT</code> in <code>subquery</code>, dependent on outer query</td></tr><tr><td><code>DERIVED</code></td><td><code>None</code></td><td>æ´¾ç”Ÿè¡¨ <br>Derived table</td></tr><tr><td><code>DEPENDENT DERIVED</code></td><td><code>dependent</code> (true)</td><td>ä¾èµ–å…¶ä»–è¡¨çš„æ´¾ç”Ÿè¡¨<br> Derived table dependent on another table</td></tr><tr><td><code>MATERIALIZED</code></td><td><code>materialized_from_subquery</code></td><td>ç‰©åŒ–è§†å›¾æŸ¥è¯¢ <code>Materialized subquery</code></td></tr><tr><td><code>UNCACHEABLE SUBQUERY</code></td><td><code>cacheable</code> (false)</td><td>ä¸€ä¸ªå­æŸ¥è¯¢å…¶ç»“æœæ— æ³•è¢«ç¼“å­˜å¹¶ä¸”å¯¹äºå¤–æŸ¥è¯¢çš„æ¯ä¸€è¡Œå­—æŸ¥è¯¢ç»“æœéƒ½éœ€è¦é‡æ–°ä¼°è®¡ <br>A subquery for which the result cannot be cached and must be re-evaluated for each row of the outer query</td></tr><tr><td><code>UNCACHEABLE UNION</code></td><td><code>cacheable</code> (false)</td><td><code>UNION</code> ä¸­ç¬¬äºŒä¸ªåŠä»¥ä¸Šçš„ä¸å¯ç¼“å­˜çš„å­æŸ¥è¯¢<br>select The second or later select in a <code>UNION</code> that belongs to an uncacheable subquery (see <code>UNCACHEABLE SUBQUERY</code>)</td></tr></tbody></table><h2 id="è¿æ¥ç±»å‹çš„è§£é‡Š"><a href="#è¿æ¥ç±»å‹çš„è§£é‡Š" class="headerlink" title="è¿æ¥ç±»å‹çš„è§£é‡Š"></a>è¿æ¥ç±»å‹çš„è§£é‡Š</h2><p>æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¸­typeè¡Œå±•ç¤ºè¡¨æ˜¯å¦‚ä½•è¿æ¥çš„ã€‚ä¸‹é¢ä»æœ€ä¼˜åˆ°æœ€åŠ£åˆ—ä¸¾è¿æ¥ç±»å‹</p><ul><li><p><code>system</code></p><p>åªæœ‰ä¸€è¡Œçš„è¡¨(= system table)ã€‚ æ˜¯constè¿æ¥ç±»å‹çš„ç‰¹æ®Šæƒ…å½¢</p></li><li><p><code>const</code></p><p>åšå¤šåªèƒ½åŒ¹é…åˆ°ä¸€è¡Œçš„è¡¨ï¼Œå¹¶ä¸”ä¼šåœ¨æŸ¥è¯¢æ‰§è¡Œä¸€å¼€å§‹å°±è¯»åŒºã€‚å› ä¸ºåªæœ‰ä¸€è¡Œï¼Œå…¶ä»–ä¼˜åŒ–å™¨å¯ä»¥å°†è¿™ä¸€è¡Œä¸­çš„åˆ—ä¸­çš„å€¼è§†ä¸ºå¸¸é‡ã€‚</p><p>ç”±äºåªè¯»ä¸€æ¬¡ï¼Œconstè¡¨éå¸¸å¿«</p><p>å½“å°†ä¸»é”®æˆ–æƒŸä¸€ç´¢å¼•çš„æ‰€æœ‰éƒ¨åˆ†ä¸å¸¸é‡å€¼è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå°†ä½¿ç”¨constï¼ˆç‚¹æŸ¥è¯¢ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a_table <span class="keyword">where</span> primary_key = <span class="string">'a_key_value'</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a_table <span class="keyword">where</span> candidate_key = <span class="string">'a_candidate_key_value'</span>; //æ³¨æ„ç åœ¨æ•°æ®åº“ä¸­æ˜¯å±æ€§é›†</span><br></pre></td></tr></table></figure></li><li><p><code>eq_ref</code></p><p>å¯¹äºæ¯ä¸ªç”±å…ˆå‰çš„è¡¨å¾—åˆ°çš„ç»„åˆçš„è¡Œï¼Œéƒ½éœ€è¦è¯»å–è¯¥è¡¨çš„ä¸€è¡Œã€‚é™¤äº†<code>system</code> å’Œ <code>const</code>,è¿™æ˜¯æœ€å¯è¡Œçš„è¿æ¥ç±»å‹ï¼Œå½“ç´¢å¼•æ˜¯<code>PRIMARY KEY</code>æˆ–<code>UNIQUE NOT NULL</code>ç´¢å¼•å¹¶ä¸”ç´¢å¼•çš„ç´¢å¼•éƒ¨åˆ†éƒ½è¢«è¿æ¥ä½¿ç”¨æ—¶ï¼Œä¼šä½¿ç”¨<code>eq_ref</code>è¿æ¥ç±»å‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table,other_table <span class="keyword">WHERE</span> ref_table.key_column=other_table.column;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table,other_table <span class="keyword">WHERE</span> ref_table.key_column_part1=other_table.column</span><br><span class="line"></span><br><span class="line"><span class="keyword">AND</span> ref_table.key_column_part2=<span class="number">1</span>;</span><br></pre></td></tr></table></figure></li><li><p><code>ref</code></p><p>å¯¹äºæ¯ä¸ªç”±å…ˆå‰çš„è¡¨å¾—åˆ°çš„ç»„åˆçš„è¡Œï¼ŒåŒ¹é…æ‰€æœ‰ç´¢å¼•å€¼çš„è¡Œéƒ½ä¼šè¯»å–ä¸€æ¬¡ã€‚å½“ä½¿ç”¨keyçš„æœ€å·¦å‰ç¼€æˆ–keyä¸æ˜¯<code>PRIMARY KEY</code>æˆ–``UNIQUE`æ—¶ï¼Œè¿æ¥ä½¿ç”¨refç±»å‹(æ¢å¥è¯è¯´ï¼Œåªè¦è¿æ¥ä¸èƒ½é€šè¿‡åŸºäºkeyå€¼ï¼Œæ‰¾åˆ°å•ä¸ªè¡Œ)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table <span class="keyword">WHERE</span> key_column=expr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table,other_table <span class="keyword">WHERE</span> ref_table.key_column=other_table.column;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table,other_table <span class="keyword">WHERE</span> ref_table.key_column_part1=oth</span><br></pre></td></tr></table></figure></li><li><p><code>fulltext</code></p><p>æ‰§è¡Œè¿æ¥æ—¶ä½¿ç”¨äº†å…¨æ–‡ç´¢å¼•</p></li><li><p><code>ref_or_null</code></p><p>è¿™ä¸ªè¿æ¥ç±»å‹ç±»ä¼¼<code>ref</code>ï¼Œä¸åŒçš„æ˜¯<code>ref_or_null</code>è¿æ¥ç±»å‹ä¼šé¢å¤–æœç´¢ä¸€æ¬¡nullå€¼ï¼Œè¿™ç§è¿æ¥ç±»å‹ä¼˜åŒ–æœ€å¸¸ç”¨äºè§£å†³å­æŸ¥è¯¢</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> ref_table <span class="keyword">WHERE</span> key_column=expr <span class="keyword">OR</span> key_column <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><p>è‡ªå·±å°è¯•äº†ä¸€ä¸‹ï¼Œå½“åˆ—æ ‡è®°ä¸ºéç©ºåï¼Œä¸ä¼šä½¿ç”¨ref_or_null</p></li><li><p><code>index_merge</code></p><p>æ­¤è¿æ¥ç±»å‹æŒ‡ç¤ºä½¿ç”¨ç´¢å¼•åˆå¹¶ä¼˜åŒ–ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¾“å‡ºè¡Œä¸­çš„keyåˆ—åŒ…å«æ‰€ä½¿ç”¨çš„ç´¢å¼•åˆ—è¡¨ï¼Œè€Œkey_lenåŒ…å«æ‰€ä½¿ç”¨ç´¢å¼•çš„æœ€é•¿é”®éƒ¨åˆ†åˆ—è¡¨ã€‚</p></li><li><p><code>unique_subquery</code></p><p>è¿™ç§ç±»å‹åœ¨å¦‚ä¸‹æ ¼å¼çš„ä¸€äº›inå­æŸ¥è¯¢ä¸­æ›¿æ¢<code>eq_ref</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value IN (<span class="keyword">SELECT</span> primary_key <span class="keyword">FROM</span> single_table <span class="keyword">WHERE</span> some_expr)</span><br></pre></td></tr></table></figure><p><code>unique_subquery</code>åªæ˜¯ä¸ºäº†æ›´å¥½çš„æ€§èƒ½æ›¿æ¢äº†å­æŸ¥è¯¢çš„ç´¢å¼•æœç´¢æ–¹æ³•</p></li><li><p><code>index_subquery</code></p><p><code>index_subquery</code>ç±»ä¼¼äº<code>unique_subquery</code>ã€‚æ›¿æ¢ in å­æŸ¥è¯¢ï¼Œä½†æ˜¯ç¬¦åˆä»¥ä¸‹æ ¼å¼çš„å­æŸ¥è¯¢ä¸­çš„éå”¯ä¸€ç´¢å¼•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value IN (<span class="keyword">SELECT</span> key_column <span class="keyword">FROM</span> single_table <span class="keyword">WHERE</span> some_expr)</span><br></pre></td></tr></table></figure></li><li><p><code>range</code></p><p>åªæœ‰ç»™å®šèŒƒå›´å†…çš„è¡Œè¢«æ£€ç´¢,ä½¿ç”¨ç´¢å¼•å»é€‰æ‹©è¡Œï¼Œæ­¤æ—¶<code>key</code>ä¸­æ˜¾ç¤ºä½¿ç”¨çš„ç´¢å¼•<code>key_len</code>æ˜¾ç¤ºå·²ä½¿ç”¨çš„æœ€é•¿çš„keyéƒ¨åˆ†ã€‚<code>ref</code>æ˜¾ç¤ºNULLã€‚</p><p>å½“ä½¿ç”¨=ã€&lt;&gt;ã€&gt;ã€&gt;=ã€&lt;ã€&lt;=ã€is NULLã€&lt;=&gt;ã€BETWEENã€LIKEæˆ–IN()æ“ä½œç¬¦å°†é”®åˆ—ä¸å¸¸é‡è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨rangeã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> key_column = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> key_column <span class="keyword">BETWEEN</span> <span class="number">10</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> key_column <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> key_part1 = <span class="number">10</span> <span class="keyword">AND</span> key_part2 <span class="keyword">IN</span> (<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>index</code></p><p>è¿™ç§ç±»å‹é™¤äº†ç´¢å¼•æ ‘è¢«æ‰«æä¹‹å¤–ç±»ä¼¼äº<code>ALL</code>ã€‚ä»¥ä¸¤ç§å½¢å¼å‘ç”Ÿ:</p><ul><li>å¦‚åœ¨åœ¨è¿™ä¸ªç´¢å¼•åœ¨æ­¤æŸ¥è¯¢ä¸­æ—¶è¦†ç›–ç´¢å¼•å¹¶ä¸”èƒ½ç”¨äºæ»¡è¶³æ‰€æœ‰è¦æ±‚çš„æ•°æ®ï¼Œåªæœ‰ç´¢å¼•æ ‘è¢«æ‰«æã€‚<code>Extra</code>åˆ—ä¼šæ˜¾ç¤º<code>Using index</code>ã€‚ç”±äºç´¢å¼•æ•°æ®å¤§å°é€šå¸¸å°äºè¡¨æ•°æ®ï¼Œä»…æ‰«æç´¢å¼•æ ‘é€šå¸¸æ¯”<code>ALL</code>å¿«ã€‚</li><li>ä¸€æ¬¡å…¨è¡¨æ‰«ææ‰§è¡Œæ—¶ä½¿ç”¨ç´¢å¼•å¹¶ä»¥ç´¢å¼•åºæ¥è¯»å–æ•°æ®ï¼Œ<code>Using index</code> ä¸ä¼šå‡ºç°åœ¨<code>Extra</code> è¡Œä¸­ã€‚</li></ul></li><li><p><code>ALL</code></p><p>å¯¹äºæ¯ä¸ªç”±å…ˆå‰çš„è¡¨å¾—åˆ°çš„ç»„åˆçš„è¡Œï¼Œéƒ½ä¼šæ‰§è¡Œå…¨è¡¨æ‰«æã€‚å¦‚æœç¬¬ä¸€ä¸ªè¡¨æ²¡æœ‰è¢«æ ‡è®°ä¸º<code>const</code>é€šå¸¸ä¸æ˜¯å¾ˆå¥½ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰çš„å…¶ä»–åœºæ™¯ä¸‹ï¼Œéƒ½éå¸¸ç³Ÿç³•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ç´¢å¼•æ¥é¿å…<code>ALL</code></p></li></ul><h2 id="Extraä¿¡æ¯"><a href="#Extraä¿¡æ¯" class="headerlink" title="Extraä¿¡æ¯"></a><code>Extra</code>ä¿¡æ¯</h2><p>â€‹    è¯¦è§å®˜æ–¹æ–‡æ¡£,éšç€é‡åˆ°çš„æƒ…å†µï¼Œä¼šæ›´æ–°ä¸€äº›å†…å®¹</p><p>##Summary</p><p>###ç†è®ºå’Œå®é™…</p><p>åœ¨<code>æŸ¥è¯¢å¤„ç†(ä¸€)</code>ä¸­ï¼ŒæŠ½è±¡çš„è¡¨è¾¾äº†é«˜çº§æ•°æ®åº“æŸ¥è¯¢è¯­è¨€æœ‰æ•°æ®åº“è§£æç¿»è¯‘ï¼Œä¼˜åŒ–ï¼Œæ‰§è¡Œæœ€ç»ˆè¿”å›æ•°æ®çš„è¿‡ç¨‹ï¼Œå¹¶å¤§è‡´çš„å¯¹ä»€ä¹ˆæ˜¯æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’åšäº†ä¸€ä¸ªç®€å•çš„è§£é‡Š</p>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŸ¥è¯¢å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo_FAQ</title>
      <link href="/sunshine-carroll.github.io/2020/08/31/hexo-FAQ/"/>
      <url>/sunshine-carroll.github.io/2020/08/31/hexo-FAQ/</url>
      
        <content type="html"><![CDATA[<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><ol><li>hexo å¦‚ä½•è¿æ¥ç«™å†…åšå®¢</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[link_name](&#123;% post_link artical_filename artical_title(å¯é€‰) %&#125;)</span><br></pre></td></tr></table></figure><p>ä¸­æ–‡ä¹±ç é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸ¥è¯¢å¤„ç†(ä¸€)</title>
      <link href="/sunshine-carroll.github.io/2020/08/31/%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86(%E4%B8%80)/"/>
      <url>/sunshine-carroll.github.io/2020/08/31/%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<h2 id="æŸ¥è¯¢å¤„ç†ç®€ä»‹"><a href="#æŸ¥è¯¢å¤„ç†ç®€ä»‹" class="headerlink" title="æŸ¥è¯¢å¤„ç†ç®€ä»‹"></a>æŸ¥è¯¢å¤„ç†ç®€ä»‹</h2><p><code>æŸ¥è¯¢å¤„ç†</code>æ˜¯ä»æ•°æ®åº“æå–æ•°æ®æ—¶æ¶‰åŠçš„ä¸€ç³»åˆ—æ´»åŠ¨ã€‚å°†é«˜å±‚æ•°æ®åº“è¯­è¨€è¡¨ç¤ºçš„æŸ¥è¯¢è¯­å¥ç¿»è¯‘æˆèƒ½åœ¨æ–‡ä»¶ç³»ç»Ÿç‰©ç†å±‚ä¸Šä½¿ç”¨çš„è¡¨è¾¾å¼ã€‚</p><p>æ­¥éª¤å¦‚å›¾æ‰€ç¤º</p><p><img src="/sunshine-carroll.github.io/2020/08/31/%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86(%E4%B8%80)/steps-in-qyerp-processing.png" alt="steps-in-qyerp-processing"></p><ol><li>é¦–å…ˆè¯­æ³•åˆ†æå™¨å’Œç¿»è¯‘å™¨å°†ä¸€æ¡é«˜å±‚æ•°æ®åº“è¯­è¨€è¡¨è¾¾çš„æŸ¥è¯¢è¯­å¥è½¬åŒ–ä¸ºå…³ç³»ä»£æ•°è¡¨è¾¾å¼ã€‚</li><li>ä¼˜åŒ–å™¨ä½¿ç”¨å¾—åˆ°çš„å…³ç³»ä»£æ•°è¡¨è¾¾å¼ä»¥åŠæœ‰å…³æ•°æ®çš„ç»Ÿè®¡ç”ŸæˆæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ã€‚</li><li>æ‰§è¡Œå¼•èµ·æ ¹æ®æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’åˆ°å­˜å‚¨çš„æ•°æ®ä¸­æ‰¾å¯»å¹¶è¿”å›æ‰§è¡Œç»“æ„ã€‚</li></ol><p>ç®€å•çš„è¯´å°±æ˜¯<code>è¯­æ³•åˆ†æå’Œç¿»è¯‘</code>â†’<code>ä¼˜åŒ–</code> â†’ <code>æ‰§è¡Œ</code></p><p>##æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’</p><h3 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h3><ul><li><code>è®¡ç®—åŸè¯­(evaluation primitive)</code> : åŠ äº†å¦‚ä½•æ‰§è¡Œæ³¨é‡Šçš„å…³ç³»ä»£æ•°è¿ç®—</li><li><code>æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’(query-execution plan)</code>ç”¨äºæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢çš„åŸè¯­æ“ä½œåºåˆ—</li></ul><h2 id="å°ä¾‹å­"><a href="#å°ä¾‹å­" class="headerlink" title="å°ä¾‹å­"></a>å°ä¾‹å­</h2><p>å‡è®¾æœ‰å…³ç³» order(id,order_time,order_amount)</p><p>æˆ‘ä»¬æƒ³æ‰¾åˆ°å¤§äº3000çš„order_amount</p><p>SQLè¯­è¨€è¡¨ç¤º: select order_amount from order where order_amount &gt; 3000</p><p>å…³ç³»ä»£æ•°è¡¨ç¤ºå¯ä»¥ç¿»è¯‘æˆå…ˆé€‰æ‹©å†æŠ•å½±æˆ–å…ˆæŠ•å½±åœ¨é€‰æ‹©:<br>$$<br>\begin{align}<br>\Pi_{order_amount}(\sigma_{order_amount &gt; 3000}(order)) \tag 1\<br>\sigma_{order_amount &gt; 3000}(\Pi_{order_amount}(order)) \tag 2\<br>\end{align}<br>$$<br>é€‰å…³ç³»ä»£æ•°è¡¨è¾¾å¼(1) è¡¨ç¤ºä¸€ä¸‹æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’</p><ul><li>$\Pi_{order_amount}$</li><li>$\sigma_{order_amount &gt; 3000}$ ï¼› ä½¿ç”¨ç´¢å¼•</li><li>order</li></ul>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŸ¥è¯¢å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³ç³»ä»£æ•°</title>
      <link href="/sunshine-carroll.github.io/2020/08/28/%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0/"/>
      <url>/sunshine-carroll.github.io/2020/08/28/%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="å…³ç³»ä»£æ•°"><a href="#å…³ç³»ä»£æ•°" class="headerlink" title="å…³ç³»ä»£æ•°"></a>å…³ç³»ä»£æ•°</h2><h3 id="é€‰æ‹©è¿ç®—-the-select-operation"><a href="#é€‰æ‹©è¿ç®—-the-select-operation" class="headerlink" title="é€‰æ‹©è¿ç®—(the select operation)"></a>é€‰æ‹©è¿ç®—(the select operation)</h3><p>â€‹    å‡è®¾æœ‰å…³ç³»rï¼Œrçš„å…³ç³»æ¨¡å¼ä¸ºRï¼ŒPæ˜¯Rçš„å‘½é¢˜å‡½æ•° ï¼Œé€‰æ‹©è¿ç®—é€‰å–rä¸­æ»¡è¶³å‘½é¢˜å‡½æ•°Pçš„å…ƒç»„è®°ä¸º<br>$$<br>\sigma_P (r)<br>$$</p><h3 id="æŠ•å½±è¿ç®—-the-project-operation"><a href="#æŠ•å½±è¿ç®—-the-project-operation" class="headerlink" title="æŠ•å½±è¿ç®—(the project operation)"></a>æŠ•å½±è¿ç®—(the project operation)</h3><h3 id="é›†åˆå¹¶è¿ç®—-the-union-operation"><a href="#é›†åˆå¹¶è¿ç®—-the-union-operation" class="headerlink" title="é›†åˆå¹¶è¿ç®—(the union operation)"></a>é›†åˆå¹¶è¿ç®—(the union operation)</h3><h3 id="é›†åˆå·®è¿ç®—-the-set-difference-operation"><a href="#é›†åˆå·®è¿ç®—-the-set-difference-operation" class="headerlink" title="é›†åˆå·®è¿ç®—(the set-difference operation)"></a>é›†åˆå·®è¿ç®—(the set-difference operation)</h3><h3 id="ç¬›å¡å°”ç§¯è¿ç®—-the-cartesian-product-operation"><a href="#ç¬›å¡å°”ç§¯è¿ç®—-the-cartesian-product-operation" class="headerlink" title="ç¬›å¡å°”ç§¯è¿ç®—(the cartesian product operation)"></a>ç¬›å¡å°”ç§¯è¿ç®—(the cartesian product operation)</h3><p>###å…³ç³»ä»£æ•°è¡¨è¾¾å¼çš„é€’å½’å®šä¹‰</p><blockquote><p>åŸºç¡€æ­¥éª¤: æ•°æ®åº“ä¸­çš„å…³ç³»æ˜¯<code>å…³ç³»ä»£æ•°è¡¨è¾¾å¼</code>,å¸¸æ•°å…³ç³»æ˜¯<code>å…³ç³»ä»£æ•°è¡¨è¾¾å¼</code></p><p>é€’å½’æ­¥éª¤ï¼šå¦‚æœ $E_1$,$E_2$ æ˜¯<code>å…³ç³»ä»£æ•°è¡¨è¾¾å¼</code>ï¼Œé‚£ä¹ˆä»¥ä¸‹è¡¨è¾¾å¼æ˜¯<code>å…³ç³»ä»£æ•°è¡¨è¾¾å¼</code></p><ul><li>$E_1\cup E_2$</li><li>$E_1 - E_2$</li><li>$E_1 \times E_2$</li><li>$\sigma_P (E_1)$ Pæ˜¯$E_1$ä¸­çš„ä¸€äº›å±æ€§åˆ—è¡¨ä¸Šçš„æ–­è¨€</li><li>$\Pi_S(E_1)$ Sæ˜¯$E_1$ä¸­çš„ä¸€äº›å±æ€§åˆ—è¡¨</li><li>$\rho_x(E_1)$ $x$æ˜¯$E_1$çš„æ–°åç§°</li></ul></blockquote><h3 id="é™„åŠ çš„å…³ç³»ä»£æ•°è¡¨è¾¾å¼"><a href="#é™„åŠ çš„å…³ç³»ä»£æ•°è¡¨è¾¾å¼" class="headerlink" title="é™„åŠ çš„å…³ç³»ä»£æ•°è¡¨è¾¾å¼"></a>é™„åŠ çš„å…³ç³»ä»£æ•°è¡¨è¾¾å¼</h3><h4 id="äº¤é›†ï¼ˆintersectionï¼‰"><a href="#äº¤é›†ï¼ˆintersectionï¼‰" class="headerlink" title="äº¤é›†ï¼ˆintersectionï¼‰"></a>äº¤é›†ï¼ˆintersectionï¼‰</h4><p>â€‹    $r \cap s = r - (r-s) $</p><h4 id="è‡ªç„¶è¿æ¥-natural-join"><a href="#è‡ªç„¶è¿æ¥-natural-join" class="headerlink" title="è‡ªç„¶è¿æ¥(natural-join)"></a>è‡ªç„¶è¿æ¥(natural-join)</h4><p>$$<br>r \bowtie s = \Pi_{R\cup S}(\sigma_{r.A_1=s.A_1 \and r.A_2 = s.A_2 \and \cdots \and r.A_n = S.A_n}(r \times s))<br>$$</p><p>â€‹    å…¶ä¸­$R \cap S = {A_1,A_2,\cdots A_n}$</p><h4 id="thetaè¿æ¥-theta-join"><a href="#thetaè¿æ¥-theta-join" class="headerlink" title="thetaè¿æ¥(theta-join)"></a>thetaè¿æ¥(theta-join)</h4><p>â€‹        $r \bowtie _ \theta s = \sigma_\theta(r \times s)$<br>        </p><h4 id="å¤–è¿æ¥-outer-join"><a href="#å¤–è¿æ¥-outer-join" class="headerlink" title="å¤–è¿æ¥(outer-join)"></a>å¤–è¿æ¥(outer-join)</h4><ul><li><p>å·¦å¤–è¿æ¥(left-outer-join)</p><p>$r âŸ• s = (r \bowtie s)\cup (r - \Pi_R(r \bowtie s) \times{null,null \dots null}$<br>${null,null \dots null}çš„å…³ç³»æ¨¡å¼ä¸ºS-R$</p></li><li><p>å³å¤–è¿æ¥(right-outer-join)</p><p>$r âŸ– s = (r \bowtie s)\cup {null,null \dots null} \times (s - \Pi_S(r \bowtie s)$<br>${null,null \dots null}çš„å…³ç³»æ¨¡å¼ä¸ºR-S$</p></li><li><p>å…¨å¤–è¿æ¥(full-outer-join)</p><p>$r âŸ— s = (r \bowtie s)\cup (r - \Pi_R(r \bowtie s) \times{null,null \dots null} \cup {null,null \dots null} \times (s - \Pi_S(r \bowtie s)$<br>$ç¬¬ä¸€ä¸ª {null,null \dots null}çš„å…³ç³»æ¨¡å¼ä¸ºS-Rï¼Œç¬¬äºŒä¸ª {null,null \dots null}çš„å…³ç³»æ¨¡å¼ä¸ºR-S$</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç´¢å¼•å’Œæ•£åˆ—</title>
      <link href="/sunshine-carroll.github.io/2020/08/28/%E7%B4%A2%E5%BC%95%E5%92%8C%E6%95%A3%E5%88%97/"/>
      <url>/sunshine-carroll.github.io/2020/08/28/%E7%B4%A2%E5%BC%95%E5%92%8C%E6%95%A3%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="åŸºæœ¬çš„ç´¢å¼•ç±»å‹"><a href="#åŸºæœ¬çš„ç´¢å¼•ç±»å‹" class="headerlink" title="åŸºæœ¬çš„ç´¢å¼•ç±»å‹"></a>åŸºæœ¬çš„ç´¢å¼•ç±»å‹</h3><ol><li>â€‹    åŸºäºå€¼çš„é¡ºåºæ’åºï¼ˆå°†å®æ•°é›†çš„å…¬ç†æ¨å¹¿åˆ°å¯¹è±¡é›†åˆï¼Œç­‰ä»·å…³ç³»ï¼Œç¡®å®šç›¸ç­‰æ€§å’Œæ¯”è¾ƒçš„æ¦‚å¿µç›¸å½“äºjavaçš„equals() å’Œ Comparator,å¹¶ä½¿ç”¨å¯¹è±¡ä¸Šçš„ï¼‰</li><li>æ•£åˆ—ç´¢å¼•</li></ol><h3 id="è¯„ä»·ç´¢å¼•æ–¹å¼çš„å‡ ä¸ªæ ‡å‡†"><a href="#è¯„ä»·ç´¢å¼•æ–¹å¼çš„å‡ ä¸ªæ ‡å‡†" class="headerlink" title="è¯„ä»·ç´¢å¼•æ–¹å¼çš„å‡ ä¸ªæ ‡å‡†"></a>è¯„ä»·ç´¢å¼•æ–¹å¼çš„å‡ ä¸ªæ ‡å‡†</h3><ol><li>è®¿é—®ç±»å‹ï¼ˆå…¨è¡¨æ‰«æï¼Œç‚¹æŸ¥è¯¢ï¼ŒèŒƒå›´æŸ¥è¯¢ï¼‰</li><li>è®¿é—®æ—¶é—´ ï¼ˆéšç€è§„æ¨¡çš„å˜åŒ–ï¼‰</li><li>æ’å…¥æ—¶é—´</li><li>åˆ é™¤æ—¶é—´</li><li>ç©ºé—´å¼€é”€</li></ol><p>###B+æ ‘ç´¢å¼•</p><p>##ç‰¹ç‚¹</p><ol><li>åœ¨æ•°æ®æ’å…¥å’Œåˆ é™¤çš„æƒ…å†µä¸‹ä»»èƒ½ä¿æŒæ‰§è¡Œæ•ˆç‡</li><li>é‡‡ç”¨å¹³è¡¡æ ‘çš„ç»“æ„ï¼Œæ ‘æ ¹åˆ°æ ‘å¶çš„æ¯æ¡è·¯å¾„é•¿åº¦éƒ½ç›¸åŒ</li><li>ä¼šå¢åŠ æ–‡ä»¶æ’å…¥å’Œåˆ é™¤çš„æ€§èƒ½å¼€é”€å’Œç©ºé—´å¼€é”€ï¼Œä½†æ˜¯å¯¹äºæ›´æ–°é¢‘ç‡è¾ƒé«˜çš„æ–‡ä»¶æ¥è¯´ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„</li></ol><hr><p>##B+æ ‘ç´¢å¼•ç»“æ„</p><h3 id="å¶å­ç»“ç‚¹"><a href="#å¶å­ç»“ç‚¹" class="headerlink" title="å¶å­ç»“ç‚¹"></a>å¶å­ç»“ç‚¹</h3><p>â€‹        è®¸å¤šåŒ…å«n-1ä¸ªæœç´¢ç å€¼$K_1,K_2,K_3,..,K_n-1$å’Œnä¸ªæŒ‡é’ˆ$P_1,P_2,â€¦,P_n$ã€‚æ¯ä¸ªç»“ç‚¹ä¸­çš„æœç´¢ç å€¼æ’åºå­˜æ”¾<br>å…è®¸å¶å­ç»“ç‚¹æœ€å°çš„å€¼çš„ä¸ªæ•°ä¸º$â¡\frac{n-1}{2}â¤$ï¼Œæœ€å¤šçš„å€¼çš„ä¸ªæ•°ä¸ºn-1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tuple&lt;K,P&gt;[n-1]  + P</span><br></pre></td></tr></table></figure><p><img src="/sunshine-carroll.github.io/2020/08/28/%E7%B4%A2%E5%BC%95%E5%92%8C%E6%95%A3%E5%88%97/leaf-of-B+Tree.png" alt="leaf-of-B+Tree"></p><p>example</p><p><img src="/sunshine-carroll.github.io/2020/08/28/%E7%B4%A2%E5%BC%95%E5%92%8C%E6%95%A3%E5%88%97/leaf-of-B+tree-example.png"></p><hr><h3 id="éå¶ç»“ç‚¹"><a href="#éå¶ç»“ç‚¹" class="headerlink" title="éå¶ç»“ç‚¹"></a>éå¶ç»“ç‚¹</h3><p>â€‹    éå¶ç»“ç‚¹çš„ç»“æ„å’Œå¶å­ç»“ç‚¹ç›¸åŒï¼Œä½†æ˜¯ç»“ç‚¹åªæŒ‡å‘æ ‘ä¸­çš„ç»“ç‚¹ï¼Œæœ€å¤šåŒ…å«nä¸ªæŒ‡é’ˆï¼Œæœ€å°‘åŒ…å«$â¡\frac{n}{2}â¤$ä¸ªæŒ‡é’ˆ</p><p><img src="/sunshine-carroll.github.io/2020/08/28/%E7%B4%A2%E5%BC%95%E5%92%8C%E6%95%A3%E5%88%97/B+tree-example.png" alt="B+tree-example"></p><hr><h3 id="B-æ ‘çš„æŸ¥è¯¢"><a href="#B-æ ‘çš„æŸ¥è¯¢" class="headerlink" title="B+æ ‘çš„æŸ¥è¯¢"></a>B+æ ‘çš„æŸ¥è¯¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">function find(value V)&#123;</span><br><span class="line">set C &#x3D; root node;</span><br><span class="line">while (C is not leaf)&#123;</span><br><span class="line">set i &#x3D; smallest number that V &lt;&#x3D; C.K[i];</span><br><span class="line">if(i not exist )&#123;</span><br><span class="line">set P[m] &#x3D; last non-null pointer of the node C;</span><br><span class="line">set C &#x3D; C.P[m];</span><br><span class="line">&#125;else&#123;</span><br><span class="line">if(V &#x3D; C.K[i])&#123;</span><br><span class="line">set &#x3D; C.P[i+1];</span><br><span class="line">&#125;else&#123;</span><br><span class="line">set &#x3D; C.P[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">set i &#x3D; least value such that K[i] &#x3D; V</span><br><span class="line">if(i exist)</span><br><span class="line">return (C,i)</span><br><span class="line">else return null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">procedure printAll(value V)&#123;</span><br><span class="line">set done &#x3D; false;</span><br><span class="line">set (L,i) &#x3D; find(V);</span><br><span class="line">if(L,i) &#x3D;&#x3D; null return;</span><br><span class="line">while(done or L &#x3D;&#x3D; null)&#123;</span><br><span class="line">while(i &gt; number of keys in L or L.K[i]&gt;V)&#123;</span><br><span class="line">print L.P[i];</span><br><span class="line">set i &#x3D; i+1;</span><br><span class="line">&#125;</span><br><span class="line">if(i &gt; number of keys in L)</span><br><span class="line">L &#x3D; L.P[n];</span><br><span class="line">else</span><br><span class="line">set done &#x3D; true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-æ ‘çš„æ›´æ–°"><a href="#B-æ ‘çš„æ›´æ–°" class="headerlink" title="B+æ ‘çš„æ›´æ–°"></a>B+æ ‘çš„æ›´æ–°</h3><h2 id="å¤šç›è®¿é—®"><a href="#å¤šç›è®¿é—®" class="headerlink" title="å¤šç›è®¿é—®"></a>å¤šç›è®¿é—®</h2><h3 id="å¤šä¸ªå•ç ç´¢å¼•"><a href="#å¤šä¸ªå•ç ç´¢å¼•" class="headerlink" title="å¤šä¸ªå•ç ç´¢å¼•"></a>å¤šä¸ªå•ç ç´¢å¼•</h3><p>å‡è®¾æœ‰å…³ç³»<br>$$<br>instrucor(id,name,dept_name,salary)<br>$$</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">ID</span> <span class="keyword">from</span> instructor <span class="keyword">where</span> dept_name = <span class="string">'Finance'</span> <span class="keyword">and</span> salary = <span class="number">80000</span></span><br></pre></td></tr></table></figure><p>å¤„ç†è¿™ä¸ªæŸ¥è¯¢çš„æ–¹å¼</p><ol><li>åˆ©ç”¨dept_name ç´¢å¼•  æ‰¾å‡ºé‡‘èç³»çš„æ•™å‘˜ï¼Œä»è¿™äº›è®°å½•ä¸­åœ¨æ‰¾å‡ºå·¥èµ„ç­‰äº 80000 çš„æ•™å‘˜</li><li>åˆ©ç”¨salary ç´¢å¼•  æ‰¾å‡ºå·¥èµ„ç­‰äº 8000 çš„æ•™å‘˜ï¼Œä»è¿™äº›è®°å½•ä¸­æ‰¾å‡ºé‡‘èç³»çš„æ•™å‘˜</li><li>åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªç´¢å¼•æ‰¾å‡ºæ»¡è¶³æ¡ä»¶çš„æ•™å‘˜ï¼Œç„¶ååœ¨å–äº¤é›†</li></ol><p>å¯¼è‡´å‡ºç°ç³Ÿç³•æƒ…å†µçš„æƒ…å‹</p><ol><li><p>é‡‘èç³»çš„è®°å½•å¤ªå¤š</p></li><li><p>å·¥èµ„ä¸º80000çš„æ•™å‘˜å¤ªå¤š</p></li><li><p>ä½†æ˜¯é‡‘èç³»ä¸­å·¥èµ„ä¸º80000çš„ç‰¹åˆ«å°‘</p><p>ä¸ºäº†çš„åˆ°å¾ˆå°çš„ä¸€ä¸ªç»“æœï¼Œå¿…é¡»æ‰«æå¤§é‡è®°å½•</p></li></ol><h3 id="å¤šç›ç´¢å¼•"><a href="#å¤šç›ç´¢å¼•" class="headerlink" title="å¤šç›ç´¢å¼•"></a>å¤šç›ç´¢å¼•</h3><h2 id="é™æ€æ•£åˆ—"><a href="#é™æ€æ•£åˆ—" class="headerlink" title="é™æ€æ•£åˆ—"></a>é™æ€æ•£åˆ—</h2><h3 id="æ•£åˆ—å‡½æ•°"><a href="#æ•£åˆ—å‡½æ•°" class="headerlink" title="æ•£åˆ—å‡½æ•°"></a>æ•£åˆ—å‡½æ•°</h3><p>$$<br>bucket = hashing(key)<br>$$</p><h3 id="ç†æƒ³çš„æ•£åˆ—å‡½æ•°åˆ†å¸ƒç‰¹æ€§"><a href="#ç†æƒ³çš„æ•£åˆ—å‡½æ•°åˆ†å¸ƒç‰¹æ€§" class="headerlink" title="ç†æƒ³çš„æ•£åˆ—å‡½æ•°åˆ†å¸ƒç‰¹æ€§"></a>ç†æƒ³çš„æ•£åˆ—å‡½æ•°åˆ†å¸ƒç‰¹æ€§</h3><ol><li>åˆ†å¸ƒå‡åŒ€  ä»æ‰€æœ‰å¯èƒ½çš„æœç´¢ç å€¼çš„é›†åˆä¸­åº”è¯¥ä¸ºæ¯ä¸ªæ¡¶åˆ†é…ç›¸åŒæ•°é‡çš„æœç´¢ç å€¼</li><li>åˆ†å¸ƒéšæœº ä¸ç®¡æœç´¢ç å€¼çš„åˆ†å¸ƒå®é™…æ˜¯ä»€ä¹ˆæ ·çš„ï¼ˆæŒ‡æ•°åˆ†å¸ƒ,å‡åŒ€åˆ†å¸ƒï¼Œæ­£æ€åˆ†å¸ƒâ€¦),æ¯ä¸ªæ¡¶åˆ†é…åˆ°çš„æœç´¢ç å€¼æ•°åº”è¯¥ç›¸åŒ</li></ol><h3 id="æ¡¶æº¢å‡ºå¤„ç†"><a href="#æ¡¶æº¢å‡ºå¤„ç†" class="headerlink" title="æ¡¶æº¢å‡ºå¤„ç†"></a>æ¡¶æº¢å‡ºå¤„ç†</h3><p>å¯¼è‡´æº¢å‡ºçš„åŸå› </p><ol><li>æ¡¶ä¸è¶³  $n_b &gt; \frac{n_r}{n_f}$</li><li>åæ–œ.  å¤šä¸ªè®°å½•å…·æœ‰ç›¸åŒæœç´¢ç ï¼Œæ•£åˆ—å‡½æ•°åˆ†å¸ƒä¸å‡</li></ol><p>å¤„ç†æ–¹å¼</p><p>æº¢å‡ºæ¡¶ï¼ˆé€‚åˆæ•°æ®åº“ï¼‰</p><p>çº¿æ€§æ¢æµ‹å‡½æ•°ï¼ˆé€‚åˆç¼–è¯‘å™¨ï¼Œå’Œæ±‡ç¼–å™¨çš„ç¬¦å·è¡¨ï¼‰</p><h2 id="åŠ¨æ€æ•£åˆ—"><a href="#åŠ¨æ€æ•£åˆ—" class="headerlink" title="åŠ¨æ€æ•£åˆ—"></a>åŠ¨æ€æ•£åˆ—</h2><h3 id="ğŸ› ç›¸åŒç±»ä¼¼åŸç†çš„å…¶ä»–å·¥å…·"><a href="#ğŸ› ç›¸åŒç±»ä¼¼åŸç†çš„å…¶ä»–å·¥å…·" class="headerlink" title="ğŸ› ç›¸åŒç±»ä¼¼åŸç†çš„å…¶ä»–å·¥å…·"></a>ğŸ› ç›¸åŒç±»ä¼¼åŸç†çš„å…¶ä»–å·¥å…·</h3><ol><li>redis å­—å…¸ï¼ˆæ˜ å°„ï¼Œmapï¼‰çš„å®ç°(æœ‰ä¸ªæ¸è¿›å†æ•£åˆ—)</li><li>HashMap&lt;K,V&gt;ï¼ˆjava 8 å¼€å§‹ç”¨äº†çº¢é»‘æ ‘ï¼‰</li></ol><p>##ä½å›¾ç´¢å¼•</p><p>##å„ç§ç´¢å¼•æŠ€æœ¯çš„æ¯”è¾ƒè¡¨</p><table><thead><tr><th align="center"></th><th align="center">ç´¢å¼•é¡ºåºæ–‡ä»¶</th><th align="center">B+tree</th><th align="center">æ•£åˆ—</th><th align="center">ä½å›¾</th><th></th></tr></thead><tbody><tr><td align="center">ç´¢å¼•ç±»å‹</td><td align="center">é¡ºåºç´¢å¼•</td><td align="center">é¡ºåºç´¢å¼•</td><td align="center">æ•£åˆ—ç´¢å¼•</td><td align="center"></td><td></td></tr><tr><td align="center">è®¿é—®æ—¶é—´</td><td align="center">æ¯”B+treeæ…¢ï¼Œéšç€æ•°æ®çš„å˜å¤§ï¼ŒæŸ¥è¯¢æ€§èƒ½ï¼Œå’Œæ•°æ®é¡ºåºæ‰«æå˜æ…¢</td><td align="center">éšç€æ•°æ®æ’å…¥å’Œåˆ é™¤ä¾æ—§èƒ½æŸ¥è¯¢æ€§èƒ½</td><td align="center"></td><td align="center"></td><td></td></tr><tr><td align="center">æ’å…¥æ—¶é—´</td><td align="center">é“¾è¡¨çš„æ’å…¥</td><td align="center">ç»´æŠ¤B+treeç»“æ„çš„é¢å¤–æ—¶é—´ï¼Œç»“ç‚¹çš„åˆ†ç¦»å’Œåˆå¹¶</td><td align="center"></td><td align="center"></td><td></td></tr><tr><td align="center">åˆ é™¤æ—¶é—´</td><td align="center">é“¾è¡¨çš„åˆ é™¤</td><td align="center">ç»´æŠ¤B+treeç»“æ„çš„é¢å¤–æ—¶é—´ï¼Œç»“ç‚¹çš„åˆ†ç¦»å’Œåˆå¹¶</td><td align="center"></td><td align="center"></td><td></td></tr><tr><td align="center">ç©ºé—´å¼€é”€</td><td align="center">æ¯”B+tree å°‘</td><td align="center">ç©ºé—´å¼€é”€è¾ƒå¤§</td><td align="center"></td><td align="center"></td><td></td></tr><tr><td align="center">é€‚åˆçš„åœºæ™¯</td><td align="center">ç‚¹æŸ¥è¯¢ï¼ŒèŒƒå›´æŸ¥è¯¢</td><td align="center">ç‚¹æŸ¥è¯¢ï¼ŒèŒƒå›´æŸ¥è¯¢</td><td align="center">ç‚¹æŸ¥è¯¢</td><td align="center">å¤šç ä¸Šçš„ç‚¹æŸ¥è¯¢</td><td></td></tr><tr><td align="center">ä¸é€‚åˆåœºæ™¯</td><td align="center"></td><td align="center"></td><td align="center">èŒƒå›´æŸ¥è¯¢</td><td align="center"></td><td></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Semantic Versioning</title>
      <link href="/sunshine-carroll.github.io/2020/07/29/Semantic-Versioning/"/>
      <url>/sunshine-carroll.github.io/2020/07/29/Semantic-Versioning/</url>
      
        <content type="html"><![CDATA[<p>è½¬è‡ª<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener">https://semver.org</a></p><h1 id="è¯­ä¹‰åŒ–ç‰ˆæœ¬-2-0-0"><a href="#è¯­ä¹‰åŒ–ç‰ˆæœ¬-2-0-0" class="headerlink" title="è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0"></a>è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0</h1><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ</li><li>æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ</li><li>ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚</li></ol><p>å…ˆè¡Œç‰ˆæœ¬å·åŠç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯å¯ä»¥åŠ åˆ°â€œä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·â€çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚</p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>åœ¨è½¯ä»¶ç®¡ç†çš„é¢†åŸŸé‡Œå­˜åœ¨ç€è¢«ç§°ä½œâ€œä¾èµ–åœ°ç‹±â€çš„æ­»äº¡ä¹‹è°·ï¼Œç³»ç»Ÿè§„æ¨¡è¶Šå¤§ï¼ŒåŠ å…¥çš„å¥—ä»¶è¶Šå¤šï¼Œä½ å°±è¶Šæœ‰å¯èƒ½åœ¨æœªæ¥çš„æŸä¸€å¤©å‘ç°è‡ªå·±å·²æ·±é™·ç»æœ›ä¹‹ä¸­ã€‚</p><p>åœ¨ä¾èµ–é«˜çš„ç³»ç»Ÿä¸­å‘å¸ƒæ–°ç‰ˆæœ¬å¥—ä»¶å¯èƒ½å¾ˆå¿«ä¼šæˆä¸ºæ¶æ¢¦ã€‚å¦‚æœä¾èµ–å…³ç³»è¿‡é«˜ï¼Œå¯èƒ½é¢ä¸´ç‰ˆæœ¬æ§åˆ¶è¢«é”æ­»çš„é£é™©ï¼ˆå¿…é¡»å¯¹æ¯ä¸€ä¸ªç›¸ä¾å¥—ä»¶æ”¹ç‰ˆæ‰èƒ½å®ŒæˆæŸæ¬¡å‡çº§ï¼‰ã€‚è€Œå¦‚æœä¾èµ–å…³ç³»è¿‡äºæ¾æ•£ï¼Œåˆå°†æ— æ³•é¿å…ç‰ˆæœ¬çš„æ··ä¹±ï¼ˆå‡è®¾å…¼å®¹äºæœªæ¥çš„å¤šä¸ªç‰ˆæœ¬å·²è¶…å‡ºäº†åˆç†æ•°é‡ï¼‰ã€‚å½“ä½ ä¸“æ¡ˆçš„è¿›å±•å› ä¸ºç‰ˆæœ¬ç›¸ä¾è¢«é”æ­»æˆ–ç‰ˆæœ¬æ··ä¹±å˜å¾—ä¸å¤Ÿç®€ä¾¿å’Œå¯é ï¼Œå°±æ„å‘³ç€ä½ æ­£å¤„äºä¾èµ–åœ°ç‹±ä¹‹ä¸­ã€‚</p><p>ä½œä¸ºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œæˆ‘æè®®ç”¨ä¸€ç»„ç®€å•çš„è§„åˆ™åŠæ¡ä»¶æ¥çº¦æŸç‰ˆæœ¬å·çš„é…ç½®å’Œå¢é•¿ã€‚è¿™äº›è§„åˆ™æ˜¯æ ¹æ®ï¼ˆä½†ä¸å±€é™äºï¼‰å·²ç»è¢«å„ç§å°é—­ã€å¼€æ”¾æºç è½¯ä»¶æ‰€å¹¿æ³›ä½¿ç”¨çš„æƒ¯ä¾‹æ‰€è®¾è®¡ã€‚ä¸ºäº†è®©è¿™å¥—ç†è®ºè¿ä½œï¼Œä½ å¿…é¡»å…ˆæœ‰å®šä¹‰å¥½çš„å…¬å…± APIã€‚è¿™å¯ä»¥é€è¿‡æ–‡ä»¶å®šä¹‰æˆ–ä»£ç å¼ºåˆ¶è¦æ±‚æ¥å®ç°ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™å¥— API çš„æ¸…æ¥šæ˜äº†æ˜¯ååˆ†é‡è¦çš„ã€‚ä¸€æ—¦ä½ å®šä¹‰äº†å…¬å…± APIï¼Œä½ å°±å¯ä»¥é€è¿‡ä¿®æ”¹ç›¸åº”çš„ç‰ˆæœ¬å·æ¥å‘å¤§å®¶è¯´æ˜ä½ çš„ä¿®æ”¹ã€‚è€ƒè™‘ä½¿ç”¨è¿™æ ·çš„ç‰ˆæœ¬å·æ ¼å¼ï¼šX.Y.Zï¼ˆä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼‰ä¿®å¤é—®é¢˜ä½†ä¸å½±å“ API æ—¶ï¼Œé€’å¢ä¿®è®¢å·ï¼›API ä¿æŒå‘ä¸‹å…¼å®¹çš„æ–°å¢åŠä¿®æ”¹æ—¶ï¼Œé€’å¢æ¬¡ç‰ˆæœ¬å·ï¼›è¿›è¡Œä¸å‘ä¸‹å…¼å®¹çš„ä¿®æ”¹æ—¶ï¼Œé€’å¢ä¸»ç‰ˆæœ¬å·ã€‚</p><p>æˆ‘ç§°è¿™å¥—ç³»ç»Ÿä¸ºâ€œè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶â€ï¼Œåœ¨è¿™å¥—çº¦å®šä¸‹ï¼Œç‰ˆæœ¬å·åŠå…¶æ›´æ–°æ–¹å¼åŒ…å«äº†ç›¸é‚»ç‰ˆæœ¬é—´çš„åº•å±‚ä»£ç å’Œä¿®æ”¹å†…å®¹çš„ä¿¡æ¯ã€‚</p><h2 id="è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒï¼ˆSemVerï¼‰"><a href="#è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒï¼ˆSemVerï¼‰" class="headerlink" title="è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒï¼ˆSemVerï¼‰"></a>è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒï¼ˆSemVerï¼‰</h2><p>ä»¥ä¸‹å…³é”®è¯ MUSTã€MUST NOTã€REQUIREDã€SHALLã€SHALL NOTã€SHOULDã€SHOULD NOTã€ RECOMMENDEDã€MAYã€OPTIONAL ä¾ç…§ RFC 2119 çš„å™è¿°è§£è¯»ã€‚ï¼ˆè¯‘æ³¨ï¼šä¸ºäº†ä¿æŒè¯­å¥é¡ºç•…ï¼Œ ä»¥ä¸‹æ–‡ä»¶é‡åˆ°çš„å…³é”®è¯å°†ä¾ç…§æ•´å¥è¯­ä¹‰è¿›è¡Œç¿»è¯‘ï¼Œåœ¨æ­¤å…ˆä¸è¿›è¡Œä¸ªåˆ«ç¿»è¯‘ã€‚ï¼‰</p><ol><li><p>ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„è½¯ä»¶â€œå¿…é¡» MUST â€å®šä¹‰å…¬å…± APIã€‚è¯¥ API å¯ä»¥åœ¨ä»£ç ä¸­è¢«å®šä¹‰æˆ–å‡ºç°äºä¸¥è°¨çš„æ–‡ä»¶å†…ã€‚æ— è®ºä½•ç§å½¢å¼éƒ½åº”è¯¥åŠ›æ±‚ç²¾ç¡®ä¸”å®Œæ•´ã€‚</p></li><li><p>æ ‡å‡†çš„ç‰ˆæœ¬å·â€œå¿…é¡» MUST â€é‡‡ç”¨ XYZ çš„æ ¼å¼ï¼Œå…¶ä¸­ Xã€Y å’Œ Z ä¸ºéè´Ÿçš„æ•´æ•°ï¼Œä¸”â€œç¦æ­¢ MUST NOTâ€åœ¨æ•°å­—å‰æ–¹è¡¥é›¶ã€‚X æ˜¯ä¸»ç‰ˆæœ¬å·ã€Y æ˜¯æ¬¡ç‰ˆæœ¬å·ã€è€Œ Z ä¸ºä¿®è®¢å·ã€‚æ¯ä¸ªå…ƒç´ â€œå¿…é¡» MUST â€ä»¥æ•°å€¼æ¥é€’å¢ã€‚ä¾‹å¦‚ï¼š1.9.1 -&gt; 1.10.0 -&gt; 1.11.0ã€‚</p></li><li><p>æ ‡è®°ç‰ˆæœ¬å·çš„è½¯ä»¶å‘è¡Œåï¼Œâ€œç¦æ­¢ MUST NOT â€æ”¹å˜è¯¥ç‰ˆæœ¬è½¯ä»¶çš„å†…å®¹ã€‚ä»»ä½•ä¿®æ”¹éƒ½â€œå¿…é¡» MUST â€ä»¥æ–°ç‰ˆæœ¬å‘è¡Œã€‚</p></li><li><p>ä¸»ç‰ˆæœ¬å·ä¸ºé›¶ï¼ˆ0.y.zï¼‰çš„è½¯ä»¶å¤„äºå¼€å‘åˆå§‹é˜¶æ®µï¼Œä¸€åˆ‡éƒ½å¯èƒ½éšæ—¶è¢«æ”¹å˜ã€‚è¿™æ ·çš„å…¬å…± API ä¸åº”è¯¥è¢«è§†ä¸ºç¨³å®šç‰ˆã€‚</p></li><li><p>1.0.0 çš„ç‰ˆæœ¬å·ç”¨äºç•Œå®šå…¬å…± API çš„å½¢æˆã€‚è¿™ä¸€ç‰ˆæœ¬ä¹‹åæ‰€æœ‰çš„ç‰ˆæœ¬å·æ›´æ–°éƒ½åŸºäºå…¬å…± API åŠå…¶ä¿®æ”¹å†…å®¹ã€‚</p></li><li><p>ä¿®è®¢å· Zï¼ˆx.y.Z <code>|</code> x &gt; 0ï¼‰â€œå¿…é¡» MUST â€åœ¨åªåšäº†å‘ä¸‹å…¼å®¹çš„ä¿®æ­£æ—¶æ‰é€’å¢ã€‚è¿™é‡Œçš„ä¿®æ­£æŒ‡çš„æ˜¯é’ˆå¯¹ä¸æ­£ç¡®ç»“æœè€Œè¿›è¡Œçš„å†…éƒ¨ä¿®æ”¹ã€‚</p></li><li><p>æ¬¡ç‰ˆæœ¬å· Yï¼ˆx.Y.z <code>|</code> x &gt; 0ï¼‰â€œå¿…é¡» MUST â€åœ¨æœ‰å‘ä¸‹å…¼å®¹çš„æ–°åŠŸèƒ½å‡ºç°æ—¶é€’å¢ã€‚åœ¨ä»»ä½•å…¬å…± API çš„åŠŸèƒ½è¢«æ ‡è®°ä¸ºå¼ƒç”¨æ—¶ä¹Ÿâ€œå¿…é¡» MUST â€é€’å¢ã€‚ä¹Ÿâ€œå¯ä»¥ MAY â€åœ¨å†…éƒ¨ç¨‹åºæœ‰å¤§é‡æ–°åŠŸèƒ½æˆ–æ”¹è¿›è¢«åŠ å…¥æ—¶é€’å¢ï¼Œå…¶ä¸­â€œå¯ä»¥ MAY â€åŒ…æ‹¬ä¿®è®¢çº§åˆ«çš„æ”¹å˜ã€‚æ¯å½“æ¬¡ç‰ˆæœ¬å·é€’å¢æ—¶ï¼Œä¿®è®¢å·â€œå¿…é¡» MUST â€å½’é›¶ã€‚</p></li><li><p>ä¸»ç‰ˆæœ¬å· Xï¼ˆX.y.z <code>|</code> X &gt; 0ï¼‰â€œå¿…é¡» MUST â€åœ¨æœ‰ä»»ä½•ä¸å…¼å®¹çš„ä¿®æ”¹è¢«åŠ å…¥å…¬å…± API æ—¶é€’å¢ã€‚å…¶ä¸­â€œå¯ä»¥ MAY â€åŒ…æ‹¬æ¬¡ç‰ˆæœ¬å·åŠä¿®è®¢çº§åˆ«çš„æ”¹å˜ã€‚æ¯å½“ä¸»ç‰ˆæœ¬å·é€’å¢æ—¶ï¼Œæ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢å·â€œå¿…é¡» MUST â€å½’é›¶ã€‚</p></li><li><p>å…ˆè¡Œç‰ˆæœ¬å·â€œå¯ä»¥ MAY â€è¢«æ ‡æ³¨åœ¨ä¿®è®¢ç‰ˆä¹‹åï¼Œå…ˆåŠ ä¸Šä¸€ä¸ªè¿æ¥å·å†åŠ ä¸Šä¸€è¿ä¸²ä»¥å¥ç‚¹åˆ†éš”çš„æ ‡è¯†ç¬¦å·æ¥ä¿®é¥°ã€‚æ ‡è¯†ç¬¦å·â€œå¿…é¡» MUST â€ç”± ASCII ç çš„è‹±æ•°å­—å’Œè¿æ¥å· [0-9A-Za-z-] ç»„æˆï¼Œä¸”â€œç¦æ­¢ MUST NOT â€ç•™ç™½ã€‚æ•°å­—å‹çš„æ ‡è¯†ç¬¦å·â€œç¦æ­¢ MUST NOT â€åœ¨å‰æ–¹è¡¥é›¶ã€‚å…ˆè¡Œç‰ˆçš„ä¼˜å…ˆçº§ä½äºç›¸å…³è”çš„æ ‡å‡†ç‰ˆæœ¬ã€‚è¢«æ ‡ä¸Šå…ˆè¡Œç‰ˆæœ¬å·åˆ™è¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬å¹¶éç¨³å®šè€Œä¸”å¯èƒ½æ— æ³•è¾¾åˆ°å…¼å®¹çš„éœ€æ±‚ã€‚èŒƒä¾‹ï¼š1.0.0-alphaã€1.0.0-alpha.1ã€1.0.0-0.3.7ã€1.0.0-x.7.z.92ã€‚</p></li><li><p>ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯â€œå¯ä»¥ MAY â€è¢«æ ‡æ³¨åœ¨ä¿®è®¢ç‰ˆæˆ–å…ˆè¡Œç‰ˆæœ¬å·ä¹‹åï¼Œå…ˆåŠ ä¸Šä¸€ä¸ªåŠ å·å†åŠ ä¸Šä¸€è¿ä¸²ä»¥å¥ç‚¹åˆ†éš”çš„æ ‡è¯†ç¬¦å·æ¥ä¿®é¥°ã€‚æ ‡è¯†ç¬¦å·â€œå¿…é¡» MUST â€ç”± ASCII çš„è‹±æ•°å­—å’Œè¿æ¥å· [0-9A-Za-z-] ç»„æˆï¼Œä¸”â€œç¦æ­¢ MUST NOT â€ç•™ç™½ã€‚å½“åˆ¤æ–­ç‰ˆæœ¬çš„ä¼˜å…ˆå±‚çº§æ—¶ï¼Œç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯â€œå¯ SHOULD â€è¢«å¿½ç•¥ã€‚å› æ­¤å½“ä¸¤ä¸ªç‰ˆæœ¬åªæœ‰åœ¨ç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯æœ‰å·®åˆ«æ—¶ï¼Œå±äºç›¸åŒçš„ä¼˜å…ˆå±‚çº§ã€‚èŒƒä¾‹ï¼š1.0.0-alpha+001ã€1.0.0+20130313144700ã€1.0.0-beta+exp.sha.5114f85ã€‚</p></li><li><p>ç‰ˆæœ¬çš„ä¼˜å…ˆå±‚çº§æŒ‡çš„æ˜¯ä¸åŒç‰ˆæœ¬åœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒã€‚åˆ¤æ–­ä¼˜å…ˆå±‚çº§æ—¶ï¼Œâ€œå¿…é¡» MUST â€æŠŠç‰ˆæœ¬ä¾åºæ‹†åˆ†ä¸ºä¸»ç‰ˆæœ¬å·ã€æ¬¡ç‰ˆæœ¬å·ã€ä¿®è®¢å·åŠå…ˆè¡Œç‰ˆæœ¬å·åè¿›è¡Œæ¯”è¾ƒï¼ˆç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯ä¸åœ¨è¿™ä»½æ¯”è¾ƒçš„åˆ—è¡¨ä¸­ï¼‰ã€‚ç”±å·¦åˆ°å³ä¾åºæ¯”è¾ƒæ¯ä¸ªæ ‡è¯†ç¬¦å·ï¼Œç¬¬ä¸€ä¸ªå·®å¼‚å€¼ç”¨æ¥å†³å®šä¼˜å…ˆå±‚çº§ï¼šä¸»ç‰ˆæœ¬å·ã€æ¬¡ç‰ˆæœ¬å·åŠä¿®è®¢å·ä»¥æ•°å€¼æ¯”è¾ƒï¼Œä¾‹å¦‚ï¼š1.0.0 &lt; 2.0.0 &lt; 2.1.0 &lt; 2.1.1ã€‚å½“ä¸»ç‰ˆæœ¬å·ã€æ¬¡ç‰ˆæœ¬å·åŠä¿®è®¢å·éƒ½ç›¸åŒæ—¶ï¼Œæ”¹ä»¥ä¼˜å…ˆå±‚çº§æ¯”è¾ƒä½çš„å…ˆè¡Œç‰ˆæœ¬å·å†³å®šã€‚ä¾‹å¦‚ï¼š1.0.0-alpha &lt; 1.0.0ã€‚æœ‰ç›¸åŒä¸»ç‰ˆæœ¬å·ã€æ¬¡ç‰ˆæœ¬å·åŠä¿®è®¢å·çš„ä¸¤ä¸ªå…ˆè¡Œç‰ˆæœ¬å·ï¼Œå…¶ä¼˜å…ˆå±‚çº§â€œå¿…é¡» MUST â€é€è¿‡ç”±å·¦åˆ°å³çš„æ¯ä¸ªè¢«å¥ç‚¹åˆ†éš”çš„æ ‡è¯†ç¬¦å·æ¥æ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå·®å¼‚å€¼åå†³å®šï¼šåªæœ‰æ•°å­—çš„æ ‡è¯†ç¬¦å·ä»¥æ•°å€¼é«˜ä½æ¯”è¾ƒï¼Œæœ‰å­—æ¯æˆ–è¿æ¥å·æ—¶åˆ™é€å­—ä»¥ ASCII çš„æ’åºæ¥æ¯”è¾ƒã€‚æ•°å­—çš„æ ‡è¯†ç¬¦å·æ¯”éæ•°å­—çš„æ ‡è¯†ç¬¦å·ä¼˜å…ˆå±‚çº§ä½ã€‚è‹¥å¼€å¤´çš„æ ‡è¯†ç¬¦å·éƒ½ç›¸åŒæ—¶ï¼Œæ ä½æ¯”è¾ƒå¤šçš„å…ˆè¡Œç‰ˆæœ¬å·ä¼˜å…ˆå±‚çº§æ¯”è¾ƒé«˜ã€‚èŒƒä¾‹ï¼š1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0-rc.1 &lt; 1.0.0ã€‚</p></li></ol><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ</h2><p>è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æˆ–è€…é©å‘½æ€§çš„æƒ³æ³•ã€‚å®é™…ä¸Šï¼Œä½ å¯èƒ½å·²ç»åœ¨åšä¸€äº›è¿‘ä¼¼çš„äº‹æƒ…äº†ã€‚é—®é¢˜åœ¨äºåªæ˜¯â€œè¿‘ä¼¼â€è¿˜ä¸å¤Ÿã€‚å¦‚æœæ²¡æœ‰æŸä¸ªæ­£å¼çš„è§„èŒƒå¯å¾ªï¼Œç‰ˆæœ¬å·å¯¹äºä¾èµ–çš„ç®¡ç†å¹¶æ— å®è´¨æ„ä¹‰ã€‚å°†ä¸Šè¿°çš„æƒ³æ³•å‘½åå¹¶ç»™äºˆæ¸…æ¥šçš„å®šä¹‰ï¼Œè®©ä½ å¯¹è½¯ä»¶ä½¿ç”¨è€…ä¼ è¾¾æ„å‘å˜å¾—å®¹æ˜“ã€‚ä¸€æ—¦è¿™äº›æ„å‘å˜å¾—æ¸…æ¥šï¼Œå¼¹æ€§ï¼ˆä½†åˆä¸ä¼šå¤ªå¼¹æ€§ï¼‰çš„ä¾èµ–è§„èŒƒå°±èƒ½è¾¾æˆã€‚</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­å°±å¯ä»¥å±•ç¤ºè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶å¦‚ä½•è®©ä¾èµ–åœ°ç‹±æˆä¸ºè¿‡å»ã€‚å‡è®¾æœ‰ä¸ªåä¸ºâ€œæ•‘ç«è½¦â€çš„å‡½å¼åº“ï¼Œå®ƒéœ€è¦å¦ä¸€ä¸ªåä¸ºâ€œæ¢¯å­â€å¹¶å·²ç»æœ‰ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„å¥—ä»¶ã€‚å½“æ•‘ç«è½¦åˆ›å»ºæ—¶ï¼Œæ¢¯å­çš„ç‰ˆæœ¬å·ä¸º 3.1.0ã€‚å› ä¸ºæ•‘ç«è½¦ä½¿ç”¨äº†ä¸€äº›ç‰ˆæœ¬ 3.1.0 æ‰€æ–°å¢çš„åŠŸèƒ½ï¼Œ ä½ å¯ä»¥æ”¾å¿ƒåœ°æŒ‡å®šç›¸ä¾äºæ¢¯å­çš„ç‰ˆæœ¬å·å¤§ç­‰äº 3.1.0 ä½†å°äº 4.0.0ã€‚è¿™æ ·ï¼Œå½“æ¢¯å­ç‰ˆæœ¬ 3.1.1 å’Œ 3.2.0 å‘å¸ƒæ—¶ï¼Œä½ å¯ä»¥å°†ç›´æ¥å®ƒä»¬çº³å…¥ä½ çš„å¥—ä»¶ç®¡ç†ç³»ç»Ÿï¼Œå› ä¸ºå®ƒä»¬èƒ½ä¸åŸæœ‰ç›¸ä¾çš„è½¯ä»¶å…¼å®¹ã€‚</p><p>ä½œä¸ºä¸€ä½è´Ÿè´£ä»»çš„å¼€å‘è€…ï¼Œä½ ç†å½“ç¡®ä¿æ¯æ¬¡å¥—ä»¶å‡çº§çš„è¿ä½œä¸ç‰ˆæœ¬å·çš„è¡¨è¿°ä¸€è‡´ã€‚ç°å®ä¸–ç•Œæ˜¯å¤æ‚çš„ï¼Œæˆ‘ä»¬é™¤äº†æé«˜è­¦è§‰å¤–èƒ½åšçš„ä¸å¤šã€‚ä½ æ‰€èƒ½åšçš„å°±æ˜¯è®©è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ä¸ºä½ æä¾›ä¸€ä¸ªå¥å…¨çš„æ–¹å¼æ¥å‘è¡Œä»¥åŠå‡çº§å¥—ä»¶ï¼Œè€Œæ— éœ€æ¨å‡ºæ–°çš„ç›¸ä¾å¥—ä»¶ï¼ŒèŠ‚çœä½ çš„æ—¶é—´åŠçƒ¦æ¼ã€‚</p><p>å¦‚æœä½ å¯¹æ­¤è®¤åŒï¼Œå¸Œæœ›ç«‹å³å¼€å§‹ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œä½ åªéœ€å£°æ˜ä½ çš„å‡½å¼åº“æ­£åœ¨ä½¿ç”¨å®ƒå¹¶éµå¾ªè¿™äº›è§„åˆ™å°±å¯ä»¥äº†ã€‚è¯·åœ¨ä½ çš„ README æ–‡ä»¶ä¸­ä¿ç•™æ­¤é¡µè¿ç»“ï¼Œè®©åˆ«äººä¹ŸçŸ¥é“è¿™äº›è§„åˆ™å¹¶ä»ä¸­å—ç›Šã€‚</p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="åœ¨-0-y-z-åˆå§‹å¼€å‘é˜¶æ®µï¼Œæˆ‘è¯¥å¦‚ä½•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Ÿ"><a href="#åœ¨-0-y-z-åˆå§‹å¼€å‘é˜¶æ®µï¼Œæˆ‘è¯¥å¦‚ä½•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Ÿ" class="headerlink" title="åœ¨ 0.y.z åˆå§‹å¼€å‘é˜¶æ®µï¼Œæˆ‘è¯¥å¦‚ä½•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Ÿ"></a>åœ¨ 0.y.z åˆå§‹å¼€å‘é˜¶æ®µï¼Œæˆ‘è¯¥å¦‚ä½•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Ÿ</h3><p>æœ€ç®€å•çš„åšæ³•æ˜¯ä»¥ 0.1.0 ä½œä¸ºä½ çš„åˆå§‹åŒ–å¼€å‘ç‰ˆæœ¬ï¼Œå¹¶åœ¨åç»­çš„æ¯æ¬¡å‘è¡Œæ—¶é€’å¢æ¬¡ç‰ˆæœ¬å·ã€‚</p><h3 id="å¦‚ä½•åˆ¤æ–­å‘å¸ƒ-1-0-0-ç‰ˆæœ¬çš„æ—¶æœºï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­å‘å¸ƒ-1-0-0-ç‰ˆæœ¬çš„æ—¶æœºï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­å‘å¸ƒ 1.0.0 ç‰ˆæœ¬çš„æ—¶æœºï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­å‘å¸ƒ 1.0.0 ç‰ˆæœ¬çš„æ—¶æœºï¼Ÿ</h3><p>å½“ä½ çš„è½¯ä»¶è¢«ç”¨äºæ­£å¼ç¯å¢ƒï¼Œå®ƒåº”è¯¥å·²ç»è¾¾åˆ°äº† 1.0.0 ç‰ˆã€‚å¦‚æœä½ å·²ç»æœ‰ä¸ªç¨³å®šçš„ API è¢«ä½¿ç”¨è€…ä¾èµ–ï¼Œä¹Ÿä¼šæ˜¯ 1.0.0 ç‰ˆã€‚å¦‚æœä½ å¾ˆæ‹…å¿ƒå‘ä¸‹å…¼å®¹çš„é—®é¢˜ï¼Œä¹Ÿåº”è¯¥ç®—æ˜¯ 1.0.0 ç‰ˆäº†ã€‚</p><h3 id="è¿™ä¸ä¼šé˜»ç¢å¿«é€Ÿå¼€å‘å’Œè¿­ä»£å—ï¼Ÿ"><a href="#è¿™ä¸ä¼šé˜»ç¢å¿«é€Ÿå¼€å‘å’Œè¿­ä»£å—ï¼Ÿ" class="headerlink" title="è¿™ä¸ä¼šé˜»ç¢å¿«é€Ÿå¼€å‘å’Œè¿­ä»£å—ï¼Ÿ"></a>è¿™ä¸ä¼šé˜»ç¢å¿«é€Ÿå¼€å‘å’Œè¿­ä»£å—ï¼Ÿ</h3><p>ä¸»ç‰ˆæœ¬å·ä¸ºé›¶çš„æ—¶å€™å°±æ˜¯ä¸ºäº†åšå¿«é€Ÿå¼€å‘ã€‚å¦‚æœä½ æ¯å¤©éƒ½åœ¨æ”¹å˜ APIï¼Œé‚£ä¹ˆä½ åº”è¯¥ä»åœ¨ä¸»ç‰ˆæœ¬å·ä¸ºé›¶çš„é˜¶æ®µï¼ˆ0.y.zï¼‰ï¼Œæˆ–æ˜¯æ­£åœ¨ä¸‹ä¸ªä¸»ç‰ˆæœ¬çš„ç‹¬ç«‹å¼€å‘åˆ†æ”¯ä¸­ã€‚</p><h3 id="å¯¹äºå…¬å…±-APIï¼Œè‹¥å³ä½¿æ˜¯æœ€å°ä½†ä¸å‘ä¸‹å…¼å®¹çš„æ”¹å˜éƒ½éœ€è¦äº§ç”Ÿæ–°çš„ä¸»ç‰ˆæœ¬å·ï¼Œå²‚ä¸æ˜¯å¾ˆå¿«å°±è¾¾åˆ°-42-0-0-ç‰ˆï¼Ÿ"><a href="#å¯¹äºå…¬å…±-APIï¼Œè‹¥å³ä½¿æ˜¯æœ€å°ä½†ä¸å‘ä¸‹å…¼å®¹çš„æ”¹å˜éƒ½éœ€è¦äº§ç”Ÿæ–°çš„ä¸»ç‰ˆæœ¬å·ï¼Œå²‚ä¸æ˜¯å¾ˆå¿«å°±è¾¾åˆ°-42-0-0-ç‰ˆï¼Ÿ" class="headerlink" title="å¯¹äºå…¬å…± APIï¼Œè‹¥å³ä½¿æ˜¯æœ€å°ä½†ä¸å‘ä¸‹å…¼å®¹çš„æ”¹å˜éƒ½éœ€è¦äº§ç”Ÿæ–°çš„ä¸»ç‰ˆæœ¬å·ï¼Œå²‚ä¸æ˜¯å¾ˆå¿«å°±è¾¾åˆ° 42.0.0 ç‰ˆï¼Ÿ"></a>å¯¹äºå…¬å…± APIï¼Œè‹¥å³ä½¿æ˜¯æœ€å°ä½†ä¸å‘ä¸‹å…¼å®¹çš„æ”¹å˜éƒ½éœ€è¦äº§ç”Ÿæ–°çš„ä¸»ç‰ˆæœ¬å·ï¼Œå²‚ä¸æ˜¯å¾ˆå¿«å°±è¾¾åˆ° 42.0.0 ç‰ˆï¼Ÿ</h3><p>è¿™æ˜¯å¼€å‘çš„è´£ä»»æ„Ÿå’Œå‰ç»æ€§çš„é—®é¢˜ã€‚ä¸å…¼å®¹çš„æ”¹å˜ä¸åº”è¯¥è½»æ˜“è¢«åŠ å…¥åˆ°æœ‰è®¸å¤šä¾èµ–ä»£ç çš„è½¯ä»¶ä¸­ã€‚å‡çº§æ‰€ä»˜å‡ºçš„ä»£ä»·å¯èƒ½æ˜¯å·¨å¤§çš„ã€‚è¦é€’å¢ä¸»ç‰ˆæœ¬å·æ¥å‘è¡Œä¸å…¼å®¹çš„æ”¹ç‰ˆï¼Œæ„å‘³ç€ä½ å¿…é¡»ä¸ºè¿™äº›æ”¹å˜æ‰€å¸¦æ¥çš„å½±å“æ·±æ€ç†Ÿè™‘ï¼Œå¹¶ä¸”è¯„ä¼°æ‰€æ¶‰åŠçš„æˆæœ¬åŠæ•ˆç›Šæ¯”ã€‚</p><h3 id="ä¸ºæ•´ä¸ªå…¬å…±-API-å†™æ–‡ä»¶å¤ªè´¹äº‹äº†ï¼"><a href="#ä¸ºæ•´ä¸ªå…¬å…±-API-å†™æ–‡ä»¶å¤ªè´¹äº‹äº†ï¼" class="headerlink" title="ä¸ºæ•´ä¸ªå…¬å…± API å†™æ–‡ä»¶å¤ªè´¹äº‹äº†ï¼"></a>ä¸ºæ•´ä¸ªå…¬å…± API å†™æ–‡ä»¶å¤ªè´¹äº‹äº†ï¼</h3><p>ä¸ºä¾›ä»–äººä½¿ç”¨çš„è½¯ä»¶ç¼–å†™é€‚å½“çš„æ–‡ä»¶ï¼Œæ˜¯ä½ ä½œä¸ºä¸€åä¸“ä¸šå¼€å‘è€…åº”å°½çš„èŒè´£ã€‚ä¿æŒä¸“æ¡ˆé«˜æ•ˆä¸€ä¸ªéå¸¸é‡è¦çš„éƒ¨ä»½æ˜¯æŒæ§è½¯ä»¶çš„å¤æ‚åº¦ï¼Œå¦‚æœæ²¡æœ‰äººçŸ¥é“å¦‚ä½•ä½¿ç”¨ä½ çš„è½¯ä»¶æˆ–ä¸çŸ¥é“å“ªäº›å‡½æ•°çš„è°ƒç”¨æ˜¯å¯é çš„ï¼Œè¦æŒæ§å¤æ‚åº¦ä¼šæ˜¯å›°éš¾çš„ã€‚é•¿è¿œæ¥çœ‹ï¼Œä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ä»¥åŠå¯¹äºå…¬å…± API æœ‰è‰¯å¥½è§„èŒƒçš„åšæŒï¼Œå¯ä»¥è®©æ¯ä¸ªäººåŠæ¯ä»¶äº‹éƒ½è¿è¡Œé¡ºç•…ã€‚</p><h3 id="ä¸‡ä¸€ä¸å°å¿ƒæŠŠä¸€ä¸ªä¸å…¼å®¹çš„æ”¹ç‰ˆå½“æˆäº†æ¬¡ç‰ˆæœ¬å·å‘è¡Œäº†è¯¥æ€ä¹ˆåŠï¼Ÿ"><a href="#ä¸‡ä¸€ä¸å°å¿ƒæŠŠä¸€ä¸ªä¸å…¼å®¹çš„æ”¹ç‰ˆå½“æˆäº†æ¬¡ç‰ˆæœ¬å·å‘è¡Œäº†è¯¥æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="ä¸‡ä¸€ä¸å°å¿ƒæŠŠä¸€ä¸ªä¸å…¼å®¹çš„æ”¹ç‰ˆå½“æˆäº†æ¬¡ç‰ˆæœ¬å·å‘è¡Œäº†è¯¥æ€ä¹ˆåŠï¼Ÿ"></a>ä¸‡ä¸€ä¸å°å¿ƒæŠŠä¸€ä¸ªä¸å…¼å®¹çš„æ”¹ç‰ˆå½“æˆäº†æ¬¡ç‰ˆæœ¬å·å‘è¡Œäº†è¯¥æ€ä¹ˆåŠï¼Ÿ</h3><p>ä¸€æ—¦å‘ç°è‡ªå·±ç ´åäº†è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„è§„èŒƒï¼Œå°±è¦ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å‘è¡Œä¸€ä¸ªæ–°çš„æ¬¡ç‰ˆæœ¬å·æ¥æ›´æ­£è¿™ä¸ªé—®é¢˜å¹¶ä¸”æ¢å¤å‘ä¸‹å…¼å®¹ã€‚å³ä½¿æ˜¯è¿™ç§æƒ…å†µï¼Œä¹Ÿä¸èƒ½å»ä¿®æ”¹å·²å‘è¡Œçš„ç‰ˆæœ¬ã€‚å¯ä»¥çš„è¯ï¼Œå°†æœ‰é—®é¢˜çš„ç‰ˆæœ¬å·è®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œå‘Šè¯‰ä½¿ç”¨è€…é—®é¢˜æ‰€åœ¨ï¼Œè®©ä»–ä»¬èƒ½å¤Ÿæ„è¯†åˆ°è¿™æ˜¯æœ‰é—®é¢˜çš„ç‰ˆæœ¬ã€‚</p><h3 id="å¦‚æœæˆ‘æ›´æ–°äº†è‡ªå·±çš„ä¾èµ–ä½†æ²¡æœ‰æ”¹å˜å…¬å…±-API-è¯¥æ€ä¹ˆåŠï¼Ÿ"><a href="#å¦‚æœæˆ‘æ›´æ–°äº†è‡ªå·±çš„ä¾èµ–ä½†æ²¡æœ‰æ”¹å˜å…¬å…±-API-è¯¥æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="å¦‚æœæˆ‘æ›´æ–°äº†è‡ªå·±çš„ä¾èµ–ä½†æ²¡æœ‰æ”¹å˜å…¬å…± API è¯¥æ€ä¹ˆåŠï¼Ÿ"></a>å¦‚æœæˆ‘æ›´æ–°äº†è‡ªå·±çš„ä¾èµ–ä½†æ²¡æœ‰æ”¹å˜å…¬å…± API è¯¥æ€ä¹ˆåŠï¼Ÿ</h3><p>ç”±äºæ²¡æœ‰å½±å“åˆ°å…¬å…± APIï¼Œè¿™å¯ä»¥è¢«è®¤å®šæ˜¯å…¼å®¹çš„ã€‚è‹¥æŸä¸ªè½¯ä»¶å’Œä½ çš„å¥—ä»¶æœ‰å…±åŒä¾èµ–ï¼Œåˆ™å®ƒä¼šæœ‰è‡ªå·±çš„ä¾èµ–è§„èŒƒï¼Œä½œè€…ä¹Ÿä¼šå‘ŠçŸ¥å¯èƒ½çš„å†²çªã€‚è¦åˆ¤æ–­æ”¹ç‰ˆæ˜¯å±äºä¿®è®¢ç­‰çº§æˆ–æ˜¯æ¬¡ç‰ˆç­‰çº§ï¼Œæ˜¯ä¾æ®ä½ æ›´æ–°çš„ä¾èµ–å…³ç³»æ˜¯ä¸ºäº†ä¿®å¤é—®é¢˜æˆ–æ˜¯åŠ å…¥æ–°åŠŸèƒ½ã€‚å¯¹äºåè€…ï¼Œæˆ‘ç»å¸¸ä¼šé¢„æœŸä¼´éšç€æ›´å¤šçš„ä»£ç ï¼Œè¿™æ˜¾ç„¶ä¼šæ˜¯ä¸€ä¸ªæ¬¡ç‰ˆæœ¬å·çº§åˆ«çš„é€’å¢ã€‚</p><h3 id="å¦‚æœæˆ‘å˜æ›´äº†å…¬å…±-API-ä½†æ— æ„ä¸­æœªéµå¾ªç‰ˆæœ¬å·çš„æ”¹åŠ¨æ€ä¹ˆåŠå‘¢ï¼Ÿï¼ˆæ„å³åœ¨ä¿®è®¢ç­‰çº§çš„å‘å¸ƒä¸­ï¼Œè¯¯å°†é‡å¤§ä¸”ä¸å…¼å®¹çš„æ”¹å˜åŠ åˆ°ä»£ç ä¹‹ä¸­ï¼‰"><a href="#å¦‚æœæˆ‘å˜æ›´äº†å…¬å…±-API-ä½†æ— æ„ä¸­æœªéµå¾ªç‰ˆæœ¬å·çš„æ”¹åŠ¨æ€ä¹ˆåŠå‘¢ï¼Ÿï¼ˆæ„å³åœ¨ä¿®è®¢ç­‰çº§çš„å‘å¸ƒä¸­ï¼Œè¯¯å°†é‡å¤§ä¸”ä¸å…¼å®¹çš„æ”¹å˜åŠ åˆ°ä»£ç ä¹‹ä¸­ï¼‰" class="headerlink" title="å¦‚æœæˆ‘å˜æ›´äº†å…¬å…± API ä½†æ— æ„ä¸­æœªéµå¾ªç‰ˆæœ¬å·çš„æ”¹åŠ¨æ€ä¹ˆåŠå‘¢ï¼Ÿï¼ˆæ„å³åœ¨ä¿®è®¢ç­‰çº§çš„å‘å¸ƒä¸­ï¼Œè¯¯å°†é‡å¤§ä¸”ä¸å…¼å®¹çš„æ”¹å˜åŠ åˆ°ä»£ç ä¹‹ä¸­ï¼‰"></a>å¦‚æœæˆ‘å˜æ›´äº†å…¬å…± API ä½†æ— æ„ä¸­æœªéµå¾ªç‰ˆæœ¬å·çš„æ”¹åŠ¨æ€ä¹ˆåŠå‘¢ï¼Ÿï¼ˆæ„å³åœ¨ä¿®è®¢ç­‰çº§çš„å‘å¸ƒä¸­ï¼Œè¯¯å°†é‡å¤§ä¸”ä¸å…¼å®¹çš„æ”¹å˜åŠ åˆ°ä»£ç ä¹‹ä¸­ï¼‰</h3><p>è‡ªè¡Œåšæœ€ä½³çš„åˆ¤æ–­ã€‚å¦‚æœä½ æœ‰åºå¤§çš„ä½¿ç”¨è€…ç¾¤åœ¨ä¾ç…§å…¬å…± API çš„æ„å›¾è€Œå˜æ›´è¡Œä¸ºåä¼šå¤§å—å½±å“ï¼Œé‚£ä¹ˆæœ€å¥½åšä¸€æ¬¡ä¸»ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå³ä½¿ä¸¥æ ¼æ¥è¯´è¿™ä¸ªä¿®å¤ä»…æ˜¯ä¿®è®¢ç­‰çº§çš„å‘å¸ƒã€‚è®°ä½ï¼Œ è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶å°±æ˜¯é€è¿‡ç‰ˆæœ¬å·çš„æ”¹å˜æ¥ä¼ è¾¾æ„ä¹‰ã€‚è‹¥è¿™äº›æ”¹å˜å¯¹ä½ çš„ä½¿ç”¨è€…æ˜¯é‡è¦çš„ï¼Œé‚£å°±é€è¿‡ç‰ˆæœ¬å·æ¥å‘ä»–ä»¬è¯´æ˜ã€‚</p><h3 id="æˆ‘è¯¥å¦‚ä½•å¤„ç†å³å°†å¼ƒç”¨çš„åŠŸèƒ½ï¼Ÿ"><a href="#æˆ‘è¯¥å¦‚ä½•å¤„ç†å³å°†å¼ƒç”¨çš„åŠŸèƒ½ï¼Ÿ" class="headerlink" title="æˆ‘è¯¥å¦‚ä½•å¤„ç†å³å°†å¼ƒç”¨çš„åŠŸèƒ½ï¼Ÿ"></a>æˆ‘è¯¥å¦‚ä½•å¤„ç†å³å°†å¼ƒç”¨çš„åŠŸèƒ½ï¼Ÿ</h3><p>å¼ƒç”¨ç°å­˜çš„åŠŸèƒ½æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„å®¶å¸¸ä¾¿é¥­ï¼Œä¹Ÿé€šå¸¸æ˜¯å‘å‰å‘å±•æ‰€å¿…é¡»çš„ã€‚å½“ä½ å¼ƒç”¨éƒ¨ä»½å…¬å…± API æ—¶ï¼Œä½ åº”è¯¥åšä¸¤ä»¶äº‹ï¼šï¼ˆ1ï¼‰æ›´æ–°ä½ çš„æ–‡ä»¶è®©ä½¿ç”¨è€…çŸ¥é“è¿™ä¸ªæ”¹å˜ï¼Œï¼ˆ2ï¼‰åœ¨é€‚å½“çš„æ—¶æœºå°†å¼ƒç”¨çš„åŠŸèƒ½é€è¿‡æ–°çš„æ¬¡ç‰ˆæœ¬å·å‘å¸ƒã€‚åœ¨æ–°çš„ä¸»ç‰ˆæœ¬å®Œå…¨ç§»é™¤å¼ƒç”¨åŠŸèƒ½å‰ï¼Œè‡³å°‘è¦æœ‰ä¸€ä¸ªæ¬¡ç‰ˆæœ¬åŒ…å«è¿™ä¸ªå¼ƒç”¨ä¿¡æ¯ï¼Œè¿™æ ·ä½¿ç”¨è€…æ‰èƒ½å¹³é¡ºåœ°è½¬ç§»åˆ°æ–°ç‰ˆ APIã€‚</p><h3 id="è¯­ä¹‰åŒ–ç‰ˆæœ¬å¯¹äºç‰ˆæœ¬çš„å­—ä¸²é•¿åº¦æ˜¯å¦æœ‰é™åˆ¶å‘¢ï¼Ÿ"><a href="#è¯­ä¹‰åŒ–ç‰ˆæœ¬å¯¹äºç‰ˆæœ¬çš„å­—ä¸²é•¿åº¦æ˜¯å¦æœ‰é™åˆ¶å‘¢ï¼Ÿ" class="headerlink" title="è¯­ä¹‰åŒ–ç‰ˆæœ¬å¯¹äºç‰ˆæœ¬çš„å­—ä¸²é•¿åº¦æ˜¯å¦æœ‰é™åˆ¶å‘¢ï¼Ÿ"></a>è¯­ä¹‰åŒ–ç‰ˆæœ¬å¯¹äºç‰ˆæœ¬çš„å­—ä¸²é•¿åº¦æ˜¯å¦æœ‰é™åˆ¶å‘¢ï¼Ÿ</h3><p>æ²¡æœ‰ï¼Œè¯·è‡ªè¡Œåšé€‚å½“çš„åˆ¤æ–­ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œé•¿åˆ° 255 ä¸ªå­—å…ƒçš„ç‰ˆæœ¬å·²è¿‡åº¦å¤¸å¼ ã€‚å†è€…ï¼Œç‰¹å®šçš„ç³»ç»Ÿå¯¹äºå­—ä¸²é•¿åº¦å¯èƒ½ä¼šæœ‰ä»–ä»¬è‡ªå·±çš„é™åˆ¶ã€‚</p><h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„è§„èŒƒæ˜¯ç”± Gravatars åˆ›åŠè€…å…¼ GitHub å…±åŒåˆ›åŠè€… <a href="http://tom.preston-werner.com/" target="_blank" rel="noopener">Tom Preston-Werner</a> æ‰€å»ºç«‹ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®ï¼Œè¯·åˆ° <a href="https://github.com/mojombo/semver/issues" target="_blank" rel="noopener">GitHub ä¸Šæå‡ºæ‚¨çš„é—®é¢˜</a>ã€‚</p><h2 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h2><p>åˆ›ç”¨ CC å§“åæ ‡ç¤º 3.0 Unported æˆæƒæ¡æ¬¾ <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank" rel="noopener">http://creativecommons.org/licenses/by/3.0/</a></p><hr><hr><h1 id="éè½¬è½½éƒ¨åˆ†"><a href="#éè½¬è½½éƒ¨åˆ†" class="headerlink" title="éè½¬è½½éƒ¨åˆ†"></a>éè½¬è½½éƒ¨åˆ†</h1><p><img src="/sunshine-carroll.github.io/2020/07/29/Semantic-Versioning/%E7%89%88%E6%9C%AC%E5%8F%98%E5%8C%96.png" alt="ç‰ˆæœ¬å˜åŒ–"></p><p>###è§„èŒƒåŒ– git commit message </p><p>git commit message èƒ½å¤Ÿå¸®åŠ©gitç”¨æˆ·åœ¨æäº¤æ›´æ–°æ—¶æè¿°æ›´æ–°çš„å†…å®¹ï¼Œéšç€é¡¹ç›®çš„æ¨è¿›ï¼Œæäº¤çš„è®°å½•è¶Šæ¥è¶Šå¤šï¼Œè§„èŒƒåŒ–çš„commit message æ ¼å¼èƒ½å¤Ÿæœ‰æ•ˆçš„æè¿°ç‰ˆæœ¬çš„å˜è¿è®°å½•ã€‚å¯ä»¥å‚è€ƒ<a href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#commit" target="_blank" rel="noopener">Angularçš„æäº¤è§„èŒƒ</a>,<code>Intelij Idea </code>æœ‰æ’ä»¶æ”¯æŒæäº¤æ¨¡ç‰ˆçš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº</p><ul><li><a href="https://plugins.jetbrains.com/plugin/10100-git-commit-message-plugin/" target="_blank" rel="noopener">git commit message plugin</a></li><li><a href="https://plugins.jetbrains.com/plugin/13477-git-commit-message-helper/" target="_blank" rel="noopener">git commit message helper</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> version control </category>
          
      </categories>
      
      
        <tags>
            
            <tag> version control </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-resources</title>
      <link href="/sunshine-carroll.github.io/2020/07/24/spring-resources/"/>
      <url>/sunshine-carroll.github.io/2020/07/24/spring-resources/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å‚è€ƒäºSpringå®˜æ–¹æ–‡æ¡£ä¸­spring-core resources éƒ¨åˆ†ï¼ŒåŠ ä¸Šè‡ªèº«çš„è§è§£ï¼Œæ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰ä¸è¶³ä¹‹å¤„æ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºäº¤æµã€‚</p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>&emsp;&emsp;åœ¨ç¼–ç¨‹ä¸­ï¼Œæœ‰æ—¶éœ€è¦è®¿é—®ä½äºä¸åŒåœ°æ–¹çš„èµ„æºï¼Œè¿™äº›èµ„æºå¯èƒ½å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿï¼Œç½‘ç»œç¯å¢ƒï¼Œæˆ–ä¸€ä¸ªwebåº”ç”¨ç­‰ç¯å¢ƒä¸­ã€‚ç„¶è€Œå¯¹äºä½¿ç”¨è¿™äº›èµ„æºçš„å®¢æˆ·ç«¯ç¨‹åºå‘˜æ¥è¯´ï¼Œä»–ä»¬æ›´åŠ å…³å¿ƒçš„æ˜¯èµ„æºçš„å†…å®¹ï¼Œèµ„æºæ˜¯å¦å­˜åœ¨ç­‰ä¿¡æ¯ï¼Œè®©è¿™äº›å®¢æˆ·ç«¯ä»£ç å»å…³å¿ƒå¦‚ä½•å»è·å–è¿™äº›èµ„æºåªèƒ½æ— ç«¯å¢åŠ å®¢æˆ·ç«¯ä»£ç çš„å¤æ‚æ€§ã€‚åˆ†æ•£å®ç°æ ¸å¿ƒèŒè´£çš„æ³¨æ„åŠ›ã€‚spring-core ä¸­çš„resourceséƒ¨åˆ†ï¼Œä½“ç°äº†Springå¯¹èµ„æºçš„å¤„ç†æ–¹å¼ã€‚</p><h2 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h2><p>&emsp;&emsp;Bruce Eckel æŠŠå¯¹è±¡è®¤ä¸ºæ˜¯<code>é—®é¢˜ç©ºé—´</code>ä¸­çš„å…ƒç´ åŠå…¶<code>è§£ç©ºé—´</code>çš„è¡¨ç¤º-We refer to the elements in the <code>problem space</code> and their representations in the <code>solution space</code> as â€œobjects.â€é¢å‘å¯¹è±¡çš„è®¾è®¡å¯ä»¥ä»<code>é—®é¢˜ç©ºé—´</code>å…¥æ‰‹ï¼Œå‘ç°<code>é—®é¢˜ç©ºé—´</code>ä¸­å­˜åœ¨çš„æ¦‚å¿µå’Œå…ƒç´ ã€‚</p><p>&emsp;&emsp;èµ„æºæ¦‚å¿µè‡ªç„¶æ˜¯Springèµ„æºå¤„ç†æœºåˆ¶çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼ŒSpring <code>Resource</code>æ¥å£æŠ½è±¡äº†èµ„æºçš„è¡Œä¸ºï¼Œè¿™äº›è§åçŸ¥ä¹‰çš„è¡Œä¸º(æ–¹æ³•)æ˜¯ä½¿ç”¨èµ„æºçš„äººé€šå¸¸å…³å¿ƒçš„åŠŸèƒ½ã€‚</p><img src="/sunshine-carroll.github.io/2020/07/24/spring-resources/resource.png" alt="resource" style="zoom: 67%;"><h3 id="e-g"><a href="#e-g" class="headerlink" title="e.g"></a>e.g</h3><p>&emsp;&emsp;ä¸¾ä¸ªå°ä¾‹å­ï¼Œä¸‹é¢æ˜¯Spring åŠ è½½free markeré…ç½®çš„ä»£ç ç‰‡æ®µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">package</span> org.springframework.ui.freemarker;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreeMarkerConfigurationFactory</span> </span>&#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigLocation</span><span class="params">(Resource resource)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.configLocation = resource;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Configuration <span class="title">createConfiguration</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TemplateException </span>&#123;</span><br><span class="line">          <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å…·æœ‰<code>FreeMarkerConfigurationFactory</code>ç±»å‹çš„å¯¹è±¡åªéœ€è¦è®¾ç½®é…ç½®èµ„æºçš„å°±èƒ½å¤Ÿè¯»å–èµ„æºå†…å®¹åˆ›å»ºé…ç½®å¯¹è±¡è€Œä¸ç”¨å…³å¿ƒé…ç½®æ–‡ä»¶åœ¨å“ªï¼ŒåŒæ—¶å®¢æˆ·ç«¯ä»£ç ä¹Ÿèƒ½æä¾›ä¸åŒå½¢å¼çš„é…ç½®è·å–æ–¹å¼å¹¶ä¸ç”¨å…³å¿ƒèµ„æºå¦‚ä½•è¢«è§£æ</p><h2 id="ResourceLoader"><a href="#ResourceLoader" class="headerlink" title="ResourceLoader"></a>ResourceLoader</h2><p>&emsp;&emsp;æœ‰äº†èµ„æºçš„æŠ½è±¡å,å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¸ç”¨å…³å¿ƒèµ„æºçš„åŠ è½½ï¼Œä½†æ˜¯èµ„æºä¹Ÿä¸èƒ½æ— ä¸­ç”Ÿæœ‰ã€‚SpringæŠŠè¿™ä»½èŒè´£äº¤ç»™äº†<code>ResourceLoader</code></p><img src="/sunshine-carroll.github.io/2020/07/24/spring-resources/resource_loader.png" alt="resource" style="zoom: 67%;"><p>&emsp;&emsp;è¿™ä¸ªä¸€ä¸ªå…¸å‹çš„å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼,<code>getResource</code>æ–¹æ³•çš„Stringå‚æ•°ä½œä¸ºä¸€ä¸ª<code>ä¿¡ä½¿å¯¹è±¡</code>ï¼Œæè¿°äº†åˆ›å»ºèµ„æºçš„ä¿¡æ¯ã€‚è¿™æ ·çš„å·¥å‚æ–¹æ³•çš„æ¡ˆä¾‹è¿˜æœ‰javascript ä¸­ document.createElement(input)ã€‚</p><p>&emsp;&emsp;åœ¨Springä¸­æ‰€æœ‰çš„ApplicationContextéƒ½å®ç°äº†ResourceLoaderæ¥å£</p><h3 id="getResourceæ–¹æ³•å‚æ•°çš„æ ¼å¼"><a href="#getResourceæ–¹æ³•å‚æ•°çš„æ ¼å¼" class="headerlink" title="getResourceæ–¹æ³•å‚æ•°çš„æ ¼å¼"></a>getResourceæ–¹æ³•å‚æ•°çš„æ ¼å¼</h3><p>&emsp;&emsp;Spring <code>ResourceLoader</code>çš„å®ç°ï¼Œçº¦å®šgetResourceæ–¹æ³•å‚æ•°çš„æ ¼å¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[prefix] &lt;path&gt;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;prefix è¡¨ç¤ºå¯é€‰ å‰ç¼€path è¡¨ç¤ºå¿…é€‰çš„è·¯å¾„</p><table><thead><tr><th align="center">prefix</th><th align="center">explanation</th></tr></thead><tbody><tr><td align="center">classpath:</td><td align="center">ä»ç±»è·¯å¾„åŠ è½½</td></tr><tr><td align="center">file:</td><td align="center">ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½</td></tr><tr><td align="center">https:</td><td align="center">ä»ç½‘ç»œä¸­åŠ è½½</td></tr><tr><td align="center">jar:</td><td align="center">ä»jaråŒ…ä¸­åŠ è½½</td></tr><tr><td align="center">war:</td><td align="center">ä»tomcatçš„waråŒ…ä¸­åŠ è½½</td></tr><tr><td align="center">(none)</td><td align="center">å–å†³äºApplicationContextçš„å®ç°</td></tr></tbody></table><h2 id="ResourceLoaderAware"><a href="#ResourceLoaderAware" class="headerlink" title="ResourceLoaderAware"></a>ResourceLoaderAware</h2><p>&emsp;&emsp;Springæä¾›ä¸€ç³»åˆ—çš„åä¸º<code>*Aware</code>çš„å›è°ƒæ¥å£,ä½¿å¾—<code>Bean</code>å¯ä»¥å‘Šè¯‰<code>IOCå®¹å™¨</code>éœ€è¦ä»€ä¹ˆæ ·çš„ä¾èµ–,è¿™æ ·å®¹å™¨åœ¨åˆ›å»º<code>Bean</code>çš„æ—¶å€™ä¼šå°½é‡æ»¡è¶³è¿™äº›ä¾èµ–ã€‚å®ç°<code>ResourceLoaderAware</code>æ¥å£çš„Beanè¢«å®¹å™¨è¯†åˆ«ä¸º<code>ResourceLoaderAware</code>ç±»å‹ï¼Œå¹¶è°ƒç”¨setResourceLoaderæ–¹æ³•ï¼Œ<code>Bean</code>å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•è®¿é—®å®¹å™¨çš„<code>ResourceLoader</code></p><h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><p>&emsp;&emsp;äº†è§£ä¸€ä¸ªæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼å’ŒåŸç†æœ€ç›´æ¥æœ‰æ•ˆçš„æ–¹å¼æ˜¯å»çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå†…å®¹å…¨é¢ã€‚å¯ä»¥å‡å°‘å‘ç”Ÿä¸çŸ¥åé”™è¯¯å‡ºç°çš„æ¦‚ç‡ï¼Œè¿™äº›é”™è¯¯å¯èƒ½éš¾ä»¥åœ¨æœç´¢å¼•æ“ä¸­æ‰¾åˆ°è§£å†³æ–¹å¼ã€‚æ›´å¤šå†…å®¹è¯·çœ‹Springå®˜æ–¹æä¾›çš„æ–‡æ¡£ã€‚åŒ…æ‹¬ä½†ä¸é™äº:</p><ul><li>Spring å†…å»ºçš„<code>Resource</code>ï¼Œå¦‚<code>URLResource</code>ï¼Œ<code>ClassPathResource</code>ç­‰</li><li>ä¸åŒçš„<code>ApplicationContext</code>é»˜è®¤åŠ è½½ä»€ä¹ˆç±»å‹çš„<code>Resource</code></li><li><code>FileSystemApplicationContext</code>å’Œå…¶ä½™<code>ApplicationContext</code>åœ¨åŠ è½½æ–‡ä»¶ç³»ç»Ÿä¸­ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„èµ„æºçš„åŒºåˆ«</li><li>classpath*: è¿™æ ·çš„å‰ç¼€åœ¨ä»€ä¹ˆæ ·çš„åœºæ™¯ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸åº”è¯¥å¦‚ä½•ä½¿ç”¨</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring/docs/5.2.8.RELEASE/spring-framework-reference/core.html#resources" target="_blank" rel="noopener">Spring Reference</a></li><li><a href="https://lingcoder.github.io/OnJava8/#/" target="_blank" rel="noopener">On Java 8</a></li><li>å››äººå¸® è®¾è®¡æ¨¡å¼</li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring-core </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiro-Architecture</title>
      <link href="/sunshine-carroll.github.io/2020/02/29/Shiro-Architecture/"/>
      <url>/sunshine-carroll.github.io/2020/02/29/Shiro-Architecture/</url>
      
        <content type="html"><![CDATA[<p>ç¿»è¯‘è‡ªå®˜æ–¹æ–‡æ¡£â€“<a href="http://shiro.apache.org/architecture.html" target="_blank" rel="noopener">åŸæ–‡åœ°å€</a></p><h2 id="Apache-Shiro-Architecture-ï¼ˆApache-Shiro-æ¶æ„"><a href="#Apache-Shiro-Architecture-ï¼ˆApache-Shiro-æ¶æ„" class="headerlink" title="Apache Shiro Architecture ï¼ˆApache Shiro æ¶æ„)"></a>Apache Shiro Architecture ï¼ˆApache Shiro æ¶æ„)</h2><p>Apache Shiroâ€™s design goals are to simplify application security by being intuitive and easy to use. Shiroâ€™s core design models how most people think about application security - in the context of someone (or something) interacting with an application.  </p><p>Aache Shiroè®¾è®¡çš„ç›®æ ‡æ˜¯é€šè¿‡ç›´è§‰åŒ–å’Œç®€æ˜“å®ç”¨è®¾è®¡æ¥ç®€åŒ–åº”ç”¨ç¨‹åºå®‰å…¨æ€§å¼€å‘. Shiro æ ¸å¿ƒè®¾è®¡æ¨¡å‹æ˜¯ åœ¨æŸäººæˆ–æŸç‰©ä¸åº”ç”¨ç¨‹åºäº¤äº’çš„åœºæ™¯ä¸‹ï¼Œäººä»¬å¯¹åº”ç”¨ç¨‹åºå®‰å…¨æ€ç»´æ–¹å¼ </p><hr><p>Software applications are usually designed based on user stories. That is, youâ€™ll often design user interfaces or service APIs based on how a user would (or should) interact with the software. For example, you might say, â€œIf the user interacting with my application is logged in, I will show them a button they can click to view their account information. If they are not logged in, I will show a sign-up button.â€</p><p>åº”ç”¨ç¨‹åºè½¯ä»¶é€šå¸¸åŸºäºç”¨æˆ·æ•…äº‹è®¾è®¡ã€‚è¿™æ„å‘³ç€ï¼Œä½ å°†åœ¨è®¾è®¡ç”¨æˆ·æ¥å£æˆ–æœåŠ¡APIæ—¶ç»å¸¸åŸºäºä¸€ä¸ªç”¨æˆ·å°†(æˆ–åº”è¯¥)å¦‚ä½•å’Œè½¯ä»¶äº¤äº’ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯èƒ½ä¼šè¯´â€å¦‚æœä¸€ä¸ªç”¨æˆ·ä¸æˆ‘ç¨‹åºäº¤äº’å¼å·²ç»ç™»å…¥ï¼Œæˆ‘å°†ç»™ä»–ä»¬å±•ç¤ºä¸€ä¸ªå¯ä»¥ç‚¹å‡»æŸ¥çœ‹ä»–ä»¬è´¦æˆ·ä¿¡æ¯çš„æŒ‰é’®ï¼Œå¦‚æœä»–ä»¬æ²¡æœ‰ç™»å…¥ï¼Œæˆ‘å°†å±•ç¤ºä¸€ä¸ªæ³¨å†ŒæŒ‰é’®â€</p><hr><p>This example statement indicates that applications are largely written to satisfy user requirements and needs. Even if the â€˜userâ€™ is another software system and not a human being, you still write code to reflect behavior based on who (or what) is currently interacting with your software.</p><p>è¿™ä¸ªä¾‹å­çš„é™ˆè¿°è¡¨æ˜ä¸€ä¸ªåº”ç”¨ç¨‹åºé€šå¸¸ä¸ºäº†æ»¡è¶³ç”¨æˆ·è¦æ±‚æˆ–éœ€æ±‚è€Œç¼–å†™ã€‚ç”šè‡³è¿™ä¸ªâ€ç”¨æˆ·â€æ˜¯å…¶ä»–è½¯ä»¶ç³»ç»Ÿè€Œéäººç±»æ—¶ï¼Œä½ ä»éœ€è¦åŸºäºå½“å‰ä¸ä½ çš„è½¯ä»¶ç³»ç»Ÿäº¤äº’çš„äººæˆ–ç‰©è¡¨ç°å‡ºçš„è¡Œä¸ºæ¥ç¼–å†™ä»£ç </p><hr><p>Shiro reflects these concepts in its own design. By matching what is already intuitive for software developers, Apache Shiro remains intuitive and easy to use in practically any application.</p><p>Shiro ä½¿ç”¨è‡ªèº«çš„è®¾è®¡æ¥è¡¨ç°è¿™äº›æ¦‚å¿µã€‚é€šè¿‡è”ç³»å¯¹äºè½¯ä»¶å¼€å‘è€…æ¥è¯´å·²æœ‰çš„ç›´è§‚äº‹ç‰©ï¼ŒApache Shiro å‡ ä¹å¯ä»¥åœ¨ä»»æ„åº”ç”¨ä¸­ä¿ç•™ç›´è§‚æ€§å’Œæ˜“ç”¨æ€§</p><h2 id="Hign-Level-Overview-é«˜å±‚æ€»è§ˆ"><a href="#Hign-Level-Overview-é«˜å±‚æ€»è§ˆ" class="headerlink" title="Hign-Level Overview (é«˜å±‚æ€»è§ˆ)"></a>Hign-Level Overview (é«˜å±‚æ€»è§ˆ)</h2><p>At the highest conceptual level, Shiroâ€™s architecture has 3 primary concepts: the <code>Subject</code>, <code>SecurityManager</code> and <code>Realms</code>. The following diagram is a high-level overview of how these components interact, and weâ€™ll cover each concept below:</p><p>åœ¨æœ€é¡¶å±‚çš„æ¦‚å¿µå±‚ä¸­ï¼ŒShiro æ¶æ„æœ‰ä¸‰ä¸ªä¸»è¦æ¦‚å¿µ:<code>Subject</code>,<code>SecurityManager</code>å’Œ<code>Realms</code>,ä¸‹å›¾å°±æ˜¯è¿™äº›ç»„ä»¶å¦‚ä½•äº¤äº’çš„ä¸€ä¸ªæ¦‚å¿µå±‚æ€»è§ˆã€‚æˆ‘ä»¬ä¼šåœ¨ä¸‹é¢é˜è¿°å„ä¸ªæ¦‚å¿µ</p><p><img src="/sunshine-carroll.github.io/2020/02/29/Shiro-Architecture/ShiroBasicArchitecture.png" alt="ShiroBasicArchitecture"></p><hr><blockquote><ul><li><p><strong>Subject</strong>: As weâ€™ve mentioned in our <a href="http://shiro.apache.org/tutorial.html" target="_blank" rel="noopener">Tutorial</a>, the <code>Subject</code> is essentially a security specific â€˜viewâ€™ of the the currently executing user. Whereas the word â€˜Userâ€™ often implies a human being, a <code>Subject</code> can be a person, but it could also represent a 3rd-party service, daemon account, cron job, or anything similar - basically anything that is currently interacting with the software.</p><p><code>Subject</code> instances are all bound to (and require) a <code>SecurityManager</code>. When you interact with a <code>Subject</code>, those interactions translate to subject-specific interactions with the <code>SecurityManager</code>.</p></li><li><p><strong>Subject</strong>: å°±åƒæˆ‘ä»¬åœ¨æ•™ç¨‹ä¸­æåˆ°çš„ï¼Œ<code>Subject</code>æœ¬è´¨ä¸Šå°±æ˜¯å½“å‰æ‰§è¡Œç”¨æˆ·çš„åœ¨å®‰å…¨é¢†åŸŸä¸Šä¸€ä¸ªç‰¹å®šçš„è§†è§’ï¼Œç„¶è€Œâ€ç”¨æˆ·â€ä¸€è¯é€šå¸¸æš—æŒ‡äººç±»ï¼Œä¸€ä¸ª<code>Subject</code>å¯ä»¥æ˜¯ä¸€ä¸ªäººï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå®ˆæŠ¤è¿›ç¨‹è´¦æˆ·ï¼Œå®šæ—¶ä»»åŠ¡æˆ–è€…ä»»æ„ç›¸ä¼¼çš„ä¸å½“å‰è½¯ä»¶äº¤äº’çš„äº‹ç‰©</p><p><code>Subject</code>å®ä¾‹éƒ½å’Œä¸€ä¸ª<code>SecurityManager</code>ç»‘å®šã€‚å½“ä½ å’Œä¸€ä¸ª<code>Subject</code>äº¤äº’æ—¶ï¼Œè¿™äº›äº¤äº’å°±è½¬åŒ–ä¸ºsubject-specific ä¸<code>SecurityManager</code>äº¤äº’</p></li><li><p><strong>SecurityManager</strong>: The <code>SecurityManager</code> is the heart of Shiroâ€™s architecture and acts as a sort of â€™umbrellaâ€™ object that coordinates its internal security components that together form an object graph. However, once the SecurityManager and its internal object graph is configured for an application, it is usually left alone and application developers spend almost all of their time with the <code>Subject</code> API.</p><p>We will talk about the <code>SecurityManager</code> in detail later on, but it is important to realize that when you interact with a <code>Subject</code>, it is really the <code>SecurityManager</code> behind the scenes that does all the heavy lifting for any <code>Subject</code> security operation. This is reflected in the basic flow diagram above.</p></li><li><p><strong>SecurityManager</strong>: <code>SecurityManager</code> æ˜¯Shiroæ¡†æ¶çš„æ ¸å¿ƒå¹¶æ‰®æ¼”åƒæ˜¯ä¸€ä¸ªåè°ƒå†…éƒ¨ç»„åˆæˆä¸€å‰¯å¯¹è±¡å›¾æ™¯çš„å®‰å…¨ç»„ä»¶çš„â€ä¿æŠ¤ä¼â€è§’è‰²ã€‚ ä¸ç®¡æ€æ ·ï¼Œå½“<code>SecurityManager</code>å’Œå…¶å†…éƒ¨çš„å¯¹è±¡å›¾æ™¯é…ç½®å®Œæˆå,é€šå¸¸å¯ä»¥ä¸ç®¡ä»– ï¼Œåº”ç”¨ç¨‹åºå¼€å‘å¤§éƒ¨åˆ†æ—¶å€™éƒ½èŠ±åœ¨å’Œ<code>Subject</code> çš„äº¤äº’ä¸Šã€‚</p><p>æˆ‘ä»¬ç¨åä¼šè®¨è®º<code>SecurityManager</code>çš„ç»†èŠ‚ï¼Œä½†æ˜¯ï¼Œå½“ä½ å’Œ<code>Subject</code>äº¤äº’çš„æ—¶å€™ï¼Œæ„è¯†åˆ°åœ¨å¹•å<code>SecurityManager</code> ä¸ºä»»äººä¸€ä¸ª<code>Subject</code>çš„å®‰å…¨æ“ä½œåšäº†æ‰€æœ‰çš„è‰°éš¾æ“ä½œ.è¿™ä¹Ÿååº”åœ¨ä¸Šé¢çš„åŸºæœ¬æµç¨‹å›¾ä¸Šã€‚</p></li><li><p><strong>Realms</strong>: Realms act as the â€˜bridgeâ€™ or â€˜connectorâ€™ between Shiro and your applicationâ€™s security data. When it comes time to actually interact with security-related data like user accounts to perform authentication (login) and authorization (access control), Shiro looks up many of these things from one or more Realms configured for an application.</p><p>In this sense a Realm is essentially a security-specific <a href="https://en.wikipedia.org/wiki/Data_access_object" target="_blank" rel="noopener">DAO</a>: it encapsulates connection details for data sources and makes the associated data available to Shiro as needed. When configuring Shiro, you must specify at least one Realm to use for authentication and/or authorization. The <code>SecurityManager</code>may be configured with multiple Realms, but at least one is required.</p><p>Shiro provides out-of-the-box Realms to connect to a number of security data sources (aka directories) such as LDAP, relational databases (JDBC), text configuration sources like INI and properties files, and more. You can plug-in your own Realm implementations to represent custom data sources if the default Realms do not meet your needs.</p><p>Like other internal components, the Shiro <code>SecurityManager</code> manages how Realms are used to acquire security and identity data to be represented as <code>Subject</code> instances.</p></li><li><p><strong>Realms</strong>: Realms æ‰®æ¼”è€…Shiro å’Œ ä½ çš„åº”ç”¨ç¨‹åºçš„å®‰å…¨æ•°æ®ä¹‹é—´çš„â€™æ¡¥æ¢â€™æˆ–è€…è¯´â€™è¿æ¥å™¨â€™çš„è§’è‰²ã€‚å½“åˆ°Shrioè¿è¡Œåˆ°ä¸å®‰å…¨ç›¸å…³çš„æ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œå¦‚ç”¨æˆ·è´¦æˆ·å»æ‰§è¡Œ è®¤è¯(ç™»å½•)ï¼Œæˆæƒ(è®¿é—®æ§åˆ¶)ï¼Œ Shiro ä»åº”ç”¨ç¨‹åºé…ç½®å¥½çš„ä¸€ä¸ªæˆ–å¤šä¸ªRealmä¸­æœå¯»è¿™äº›æ•°æ®</p><p>ä»è¿™ä¸ªè§’åº¦ï¼ŒRealm æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰¹å®šçš„å®‰å…¨DAO(Data Access Object):ä»–å°è£…å’Œæ•°æ®æºè¿æ¥çš„ç»†èŠ‚ï¼Œå¹¶ä¸”ä½¿å¾—ç›¸å…³çš„æ•°æ®æŒ‰Shiroæ‰€éœ€çš„æ–¹å¼è¢«Shiroä½¿ç”¨ã€‚å½“é…ç½®Shiroæ—¶ï¼Œä½ å¿…é¡»è‡³å°‘æŒ‡å®šä¸€ä¸ªç”¨æˆ·è®¤è¯å’Œï¼ˆæˆ–ï¼‰æˆæƒçš„Relamã€‚<code>SecurityManager</code>å¯èƒ½ä¼šé…ç½®å¤šä¸ªé¢†åŸŸï¼Œä½†è‡³å°‘éœ€è¦ä¸€ä¸ª</p><p>Shiro æä¾›ä¸€äº›å¼€ç®±å³ç”¨çš„Realmå»å’Œä¸€äº›å®‰å…¨æ•°æ®æºå»ºç«‹è¿æ¥ï¼Œæ¯”å¦‚è¯´LDAP(è½»é‡çº§ç›®å½•è®¿é—®åè®®)ï¼Œå…³ç³»å‹æ•°æ®åº“(JDBC)ï¼Œæ–‡æœ¬é…ç½®æºå¦‚iniå’Œå±æ€§æ–‡ä»¶ç­‰ç­‰ã€‚å¦‚æœé»˜è®¤çš„Realmsä¸æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥æ’å…¥ä½ è‡ªå·±çš„é¢†åŸŸå®ç°å»è¡¨ç¤ºè‡ªå®šä¹‰çš„æ•°æ®æº</p><p>å°±åƒå…¶ä»–çš„å†…éƒ¨ç»„ä»¶,Shiroçš„ <code>SecurityManager</code>ç®¡ç†ç€å¦‚ä½•å°† Realms è·å–å®‰å…¨å’Œèº«ä»½æ•°æ®çš„è¡¨ç¤ºä¸º<code>Subject</code>å®ä¾‹</p></li></ul></blockquote><hr><p>##<a href="http://shiro.apache.org/architecture.html#detailed-architecture" target="_blank" rel="noopener">Detailed Architecture</a>(è¯¦ç»†çš„æ¶æ„)</p><p>The following diagram shows Shiroâ€™s core architectural concepts followed by short summaries of each:</p><p>ä¸‹é¢å±•ç¤ºäº†Shiroçš„æ ¸å¿ƒæ¶æ„æ¦‚å¿µï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªæ¦‚å¿µæœ‰ä¸€ä¸ªç®€çŸ­çš„æ€»ç»“</p><p><img src="/sunshine-carroll.github.io/2020/02/29/Shiro-Architecture/ShiroArchitecture.png" alt="ShiroArchitecture"></p><blockquote><ul><li><p><strong>Subject</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/subject/Subject.html" target="_blank" rel="noopener"><code>org.apache.shiro.subject.Subject</code></a>)<br>A security-specific â€˜viewâ€™ of the entity (user, 3rd-party service, cron job, etc) currently interacting with the software.</p></li><li><p><strong>Subject</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/subject/Subject.html" target="_blank" rel="noopener"><code>org.apache.shiro.subject.Subject</code></a>)</p><p>å½“å‰ä¸è½¯ä»¶äº¤äº’çš„å®ä½“(ç”¨æˆ·ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå®šæ—¶ä»»åŠ¡ç­‰ç­‰)çš„ä¸€ä¸ªç‰¹å®šçš„å®‰å…¨â€™è§†å›¾â€™</p></li><li><p><strong>SecurityManager</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/mgt/SecurityManager.html" target="_blank" rel="noopener">org.apache.shiro.mgt.SecurityManager</a>)<br>As mentioned above, the <code>SecurityManager</code> is the heart of Shiroâ€™s architecture. It is mostly an â€˜umbrellaâ€™ object that coordinates its managed components to ensure they work smoothly together. It also manages Shiroâ€™s view of every application user, so it knows how to perform security operations per user.</p></li><li><p><strong>SecurityManager</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/mgt/SecurityManager.html" target="_blank" rel="noopener">org.apache.shiro.mgt.SecurityManager</a>)</p><p>å¦‚ä¸Šæ‰€è¿°ï¼Œ<code>SecurityManager</code>æ—¶Shiroæ¶æ„çš„æ ¸å¿ƒ.é€šå¸¸æ˜¯åè°ƒå—ç®¡ç»„ä»¶ï¼Œç¡®ä¿ä»–ä»¬ä¸€èµ·å¹³ç¨³çš„å·¥ä½œçš„â€™ä¿æŠ¤ä¼â€™,ä»–ç®¡ç†ç€æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºç”¨æˆ·çš„è§†å›¾ï¼Œå› æ­¤ä»–çŸ¥é“å¦‚ä½•ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·æ‰§è¡Œå®‰å…¨çš„æ“ä½œ</p></li><li><p><strong>Authenticator</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/Authenticator.html" target="_blank" rel="noopener">org.apache.shiro.authc.Authenticator</a>)<br>The <code>Authenticator</code> is the component that is responsible for executing and reacting to authentication (log-in) attempts by users. When a user tries to log-in, that logic is executed by the <code>Authenticator</code>. The <code>Authenticator</code> knows how to coordinate with one or more <code>Realms</code> that store relevant user/account information. The data obtained from these <code>Realms</code> is used to verify the userâ€™s identity to guarantee the user really is who they say they are.</p></li><li><p><strong>Authenticator</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/Authenticator.html" target="_blank" rel="noopener">org.apache.shiro.authc.Authenticator</a>)</p><p><code>Authenticator</code>æ˜¯ä»¥æ‰§è¡Œå’Œååº”ç”¨æˆ·çš„è®¤è¯ï¼ˆç™»å½•ï¼‰ä¸ºèŒè´£çš„ç»„ä»¶ã€‚å½“ä¸€ä¸ªç”¨æˆ·è¯•å›¾ç™»å½•æ—¶ï¼Œè¿™ä¸ªé€»è¾‘å°±è¢«<code>Authenticator</code>æ‰§è¡Œã€‚<code>Authenticator</code>çŸ¥é“å¦‚ä½•ä¸å­˜å‚¨è€…ç”¨æˆ·/è´¦æˆ·ä¿¡æ¯çš„ä¸€ä¸ªæˆ–å¤šä¸ª<code>Realm</code>åä½œã€‚ç”±è¿™äº›<code>Realms</code>ç»´æŠ¤çš„æ•°æ®ç”¨äºéªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œä¿è¯ç”¨æˆ·çš„ç¡®æ˜¯ä»–ä»¬æ‰€è¯´çš„é‚£ä¸€ä¸ª</p></li><li><p><strong>Authorizer</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authz/Authorizer.html" target="_blank" rel="noopener">org.apache.shiro.authz.Authorizer</a>)<br>The <code>Authorizer</code> is the component responsible determining usersâ€™ access control in the application. It is the mechanism that ultimately says if a user is allowed to do something or not. Like the <code>Authenticator</code>, the <code>Authorizer</code> also knows how to coordinate with multiple back-end data sources to access role and permission information. The <code>Authorizer</code> uses this information to determine exactly if a user is allowed to perform a given action.</p></li><li><p><code>Authorizer</code>æ˜¯å¯¹ç¡®å®šåº”ç”¨ç¨‹åºä¸­ç”¨æˆ·çš„è®¿é—®æ§åˆ¶è´Ÿè´£çš„ç»„ä»¶ã€‚è¿™ä¸ªæœºåˆ¶æœ€ç»ˆåˆ¤æ–­ä¸€ä¸ªç”¨æˆ·å…è®¸æˆ–ä¸å…è®¸åšä¸€äº›äº‹ã€‚å°±åƒ<code>Authenticator</code>ï¼Œ<code>Authorizer</code> çŸ¥é“å¦‚ä½•ä½¿ç”¨å¤šä¸ªåå°æ•°æ®æºä¼ä¸šè®¿é—®è§’è‰²å’Œæƒé™ä¿¡æ¯ã€‚<code>Authorizer</code>ä½¿ç”¨è¿™äº›æ•°æ®å»æ­£ç¡®çš„ç¡®å®šä¸€ä¸ªç”¨æˆ·æ˜¯å¦å…è®¸æ‰§è¡Œä¸€ä¸ªç»™å®šçš„è¡Œä¸º</p></li><li><p><strong>SessionManager</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/session/mgt/SessionManager.html" target="_blank" rel="noopener">org.apache.shiro.session.mgt.SessionManager</a>)<br>The <code>SessionManager</code> knows how to create and manage user <code>Session</code> lifecycles to provide a robust Session experience for users in all environments. This is a unique feature in the world of security frameworks - Shiro has the ability to natively manage user Sessions in any environment, even if there is no Web/Servlet or EJB container available. By default, Shiro will use an existing session mechanism if available, (e.g. Servlet Container), but if there isnâ€™t one, such as in a standalone application or non-web environment, it will use its built-in enterprise session management to offer the same programming experience. The <code>SessionDAO</code> exists to allow any datasource to be used to persist sessions.</p></li><li><p><code>SessionManager</code>çŸ¥é“å¦‚ä½•åˆ›å»ºå’Œç®¡ç†ç”¨æˆ·<code>Session</code>çš„ç”Ÿå‘½å‘¨æœŸå¹¶åœ¨ä»»ä½•ç¯å¢ƒä¸‹æä¾›ç»™ç”¨æˆ·ä¸€ä¸ªå¥å£®çš„ä¼šè¯ä½“éªŒã€‚åœ¨å®‰å…¨æ¡†æ¶çš„ä¸–ç•Œä¸­è¿™æ˜¯ä¸ªç‹¬ç‰¹çš„ç‰¹æ€§â€“å³ä½¿ä¸åœ¨Web/Servletæˆ–EJBå®¹å™¨ä¸­ï¼ŒShiroå¤©ç„¶çš„æœ‰åœ¨ä»»ä½•ç¯å¢ƒä¸‹ç®¡ç†ç”¨æˆ·ä¼šè¯çš„èƒ½åŠ›ã€‚å¦‚æœæœ‰å¯ä»¥ä½¿ç”¨çš„ä¼šè¯æœºåˆ¶(å¦‚Servlet Container)ï¼ŒShiroé»˜è®¤ä¼šä½¿ç”¨å®ƒ,ä½†æ˜¯å¦‚æœæ²¡æœ‰ï¼Œå°±åƒç‹¬ç«‹çš„åº”ç”¨ç¨‹åºæˆ–éwebç¯å¢ƒä¸‹ï¼Œä»–ä¼šä½¿ç”¨ä»–å†…å»ºçš„ä¼ä¸šçº§ä¼šè¯ç®¡ç†ä»¥æä¾›ç›¸åŒçš„ç¼–ç¨‹ä½“éªŒã€‚<code>SessionDAO</code>ä¸ºå…è®¸ä»»ä½•ç”¨äºæŒä¹…åŒ–ä¼šè¯çš„æ•°æ®æºè€Œå­˜åœ¨</p></li><li><p><strong>CacheManager</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/cache/CacheManager.html" target="_blank" rel="noopener">org.apache.shiro.cache.CacheManager</a>)<br>The <code>CacheManager</code> creates and manages <code>Cache</code> instance lifecycles used by other Shiro components. Because Shiro can access many back-end data sources for authentication, authorization and session management, caching has always been a first-class  feature in the framework to improve performance while using these data sources. Any of the modern open-source and/or enterprise caching products can be plugged in to Shiro to provide a fast and efficient user-experience.</p></li><li><p><strong>CacheManager</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/cache/CacheManager.html" target="_blank" rel="noopener">org.apache.shiro.cache.CacheManager</a>)</p><p><code>CacheManager</code>åˆ›å»ºå’Œç®¡ç†è¢«å…¶ä»–Shiroç»„ä»¶ä½¿ç”¨çš„ç¼“å­˜å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ç”±äºShiro èƒ½å¤Ÿè®¿é—®è®¸å¤šç”¨æˆ·è®¤è¯ï¼Œæˆæƒå’Œä¼šè¯ç®¡ç†çš„åå°æ•°æ®ï¼Œåœ¨æ¡†æ¶ä¸­ç¼“å­˜é€šå¸¸æ˜¯åœ¨ä½¿ç”¨è¿™äº›æ•°æ®æºæ—¶æé«˜æ€§èƒ½çš„ä¸€ä¸ªä¼˜ç§€çš„ç‰¹æ€§ã€‚ä»»ä½•ä¸€ä¸ªç°ä»£çš„å¼€æºå’Œï¼ˆæˆ–ï¼‰ä¼ä¸šçº§ç¼“å­˜äº§å“èƒ½å¤ŸåµŒå…¥åˆ°Shiroä¸­ä»¥æé«˜å¿«ä¸”é«˜æ•ˆçš„ç”¨æˆ·ä½“éªŒ</p></li><li><p><strong>Cryptography</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/crypto/package-summary.html" target="_blank" rel="noopener">org.apache.shiro.crypto.*</a>)<br>Cryptography is a natural addition to an enterprise security framework. Shiroâ€™s <code>crypto</code> package contains easy-to-use and understand representations of crytographic Ciphers, Hashes (aka digests) and different codec implementations. All of the classes in this package are carefully designed to be very easy to use and easy to understand. Anyone who has used Javaâ€™s native cryptography support knows it can be a challenging animal to tame. Shiroâ€™s crypto APIs simplify the complicated Java mechanisms and make cryptography easy to use for normal mortal human beings.</p></li><li><p>å¯¹äºä¸€ä¸ªä¼ä¸šçº§å®‰å…¨æ¡†æ¶ï¼ŒåŠ å¯†æ˜¯ä¸€ä¸ªè‡ªç„¶è€Œç„¶çš„åŠŸèƒ½ã€‚Shiro çš„<code>crypto</code>åŒ…å«æ˜“äºä½¿ç”¨å’Œç†è§£çš„å¯†ç å­¦ä¸Šçš„åŠ å¯†å·¥å…·ï¼Œå“ˆå¸Œ(ä¼—æ‰€å‘¨çŸ¥çš„ä¿¡æ¯æ‘˜è¦ç®—æ³• ),å’Œä¸åŒçš„ç¼–ç è§£ç å™¨å®ç°.åœ¨è¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç±»ï¼Œéƒ½ä¸ºæ˜“äºç†è§£å’Œä½¿ç”¨è€Œè®¾è®¡ã€‚ä»»ä½•ä¸€ä¸ªç”¨è¿‡JavaåŸç”Ÿçš„åŠ å¯†æ”¯æŒçš„äººéƒ½çŸ¥é“,it can be a challenging animal to tameã€‚Shiroçš„crypto API ç®€åŒ–è¿™äº›å¤æ‚çš„Javaæœºåˆ¶å¹¶ä¸”è®©åŠ å¯†åŠŸèƒ½å¯¹æ­£å¸¸çš„æ™®é€šäººæ¥è¯´ä½¿ç”¨ç®€å•ã€‚</p></li><li><p><strong>Realms</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/realm/Realm.html" target="_blank" rel="noopener">org.apache.shiro.realm.Realm</a>)<br>As mentioned above, Realms act as the â€˜bridgeâ€™ or â€˜connectorâ€™ between Shiro and your applicationâ€™s security data. When it comes time to actually interact with security-related data like user accounts to perform authentication (login) and authorization (access control), Shiro looks up many of these things from one or more Realms configured for an application. You can configure as many <code>Realms</code> as you need (usually one per data source) and Shiro will coordinate with them as necessary for both authentication and authorization.</p></li><li><p><strong>Realms</strong> (<a href="http://shiro.apache.org/static/current/apidocs/org/apache/shiro/realm/Realm.html" target="_blank" rel="noopener">org.apache.shiro.realm.Realm</a>)</p><p>å¦‚ä¸Šæ‰€è¿°ï¼ŒRealm æ‰®æ¼”çš„Shiroå’Œä½ åº”ç”¨ç¨‹åºçš„å®‰å…¨æ•°æ®çš„â€™æ¡¥æ¢â€™æˆ–â€™è¿æ¥å™¨â€™ã€‚å½“åˆ°Shrioè¿è¡Œåˆ°ä¸å®‰å…¨ç›¸å…³çš„æ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œå¦‚ç”¨æˆ·è´¦æˆ·å»æ‰§è¡Œ è®¤è¯(ç™»å½•)ï¼Œæˆæƒ(è®¿é—®æ§åˆ¶)ï¼Œ Shiro ä»åº”ç”¨ç¨‹åºé…ç½®å¥½çš„ä¸€ä¸ªæˆ–å¤šä¸ªRealmä¸­æœå¯»è¿™äº›æ•°æ®ã€‚ä½ å¯ä»¥æŒ‰ä½ çš„éœ€è¦çš„Realmæ•°æ¥é…ç½®Realm(é€šå¸¸æ¯ä¸ªæ•°æ®æºä¸€ä¸ªRealm)å¹¶ä¸”Shiroä¼šæŒ‰éœ€ä¸ºè®¤è¯å’Œæˆæƒåè°ƒä»–ä»¬</p></li></ul></blockquote><hr><h2 id="The-SecurityManager"><a href="#The-SecurityManager" class="headerlink" title="The SecurityManager"></a>The <code>SecurityManager</code></h2><p>Because Shiroâ€™s API encourages a <code>Subject</code>-centric programming approach, most application developers will rarely, if ever, interact with the <code>SecurityManager</code>directly (framework developers however  sometimes find it useful). Even so, it is still important to know how the <code>SecurityManager</code> functions, especially when configuring one for an application.</p><p>ç”±äº Shiro çš„APIé¼“åŠ±ä¸€ä¸ªä»¥<code>Subject</code>ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ–¹å¼ï¼Œå¤§å¤šæ•°åº”ç”¨ç¨‹åºå¼€å‘è€…å°†å¾ˆå°‘çš„ï¼Œä¸<code>SecurityManager</code>äº¤äº’(æ¡†æ¶å¼€å‘è€…å´æœ‰æ—¶è®¤ä¸ºè¿™æ˜¯éå¸¸æœ‰ç”¨çš„)ã€‚å³ä½¿å¦‚æ­¤ï¼ŒçŸ¥é“<code>SecurityManager</code>çš„åŠŸèƒ½ä¾æ—§æ˜¯é‡è¦çš„,å°¤å…¶æ˜¯åœ¨é…ç½®ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ—¶å€™</p><h2 id="Design"><a href="#Design" class="headerlink" title="Design"></a><a href="http://shiro.apache.org/architecture.html#design" target="_blank" rel="noopener">Design</a></h2><p>As stated previously, the applicationâ€™s <code>SecurityManager</code> performs security operations and manages state for <em>all</em> application users. In Shiroâ€™s default <code>SecurityManager</code> implementations, this includes:</p><p>å¦‚å‰æ‰€è¿°,åº”ç”¨ç¨‹åºçš„<code>SecurityManager</code>æ‰§è¡Œå®‰å…¨æ“ä½œå¹¶ä¸”ä¸ºæ‰€æœ‰åº”ç”¨ç¨‹åºç”¨æˆ·ç®¡ç†çŠ¶æ€ã€‚åœ¨Shiroé»˜è®¤çš„<code>SecurityManager</code>å®ç°ä¸­ä»–åŒ…å«:</p><ul><li>Authentication  è®¤è¯</li><li>Authorization  æˆæƒ</li><li>Session Management ä¼šè¯ç®¡ç†</li><li>Cache Management ç¼“å­˜ç®¡ç†</li><li><a href="http://shiro.apache.org/realm.html" target="_blank" rel="noopener">Realm</a> coordination é¢†åŸŸåä½œ</li><li>Event propagation äº‹ä»¶ä¼ é€’</li><li>â€œRemember Meâ€ Services â€˜è®°ä½æˆ‘â€™ æœåŠ¡</li><li>Subject creation åˆ›å»ºSubject</li><li>Logout and more. ç™»å‡º ç­‰ç­‰</li></ul><p>But this is a lot of functionality to try to manage in a single component. And, making these things flexible and customizable would be very difficult if everything were lumped into a single implementation class.</p><p>ä½†æ˜¯æœ‰å¤§é‡çš„åŠŸèƒ½å°è¯•æ”¾åœ¨å•ä¸ªç»„ä»¶ä¸­ã€‚å¹¶ä¸”ï¼Œå¦‚æœæŠŠæ‰€æœ‰çš„ä¸œè¥¿é›†ä¸­åœ¨å•ä¸ªå®ç°ç±»ä¸­ï¼Œè®©è¿™äº›åŠŸèƒ½å˜å¾—çµæ´»å’Œå¯è‡ªå®šä¹‰å°†ä¼šå˜å¾—éå¸¸å›°éš¾ã€‚</p><p>To simplify configuration and enable flexible configuration/pluggability, Shiroâ€™s implementations are all highly modular in design - so modular in fact, that the SecurityManager implementation (and its class-hierarchy) does not do much at all. Instead, the <code>SecurityManager</code> implementations mostly act as a lightweight â€˜containerâ€™ component, delegating almost all behavior to nested/wrapped components. This â€˜wrapperâ€™ design is reflected in the detailed architecture diagram above.</p><p>ä¸ºäº†ç®€åŒ–é…ç½®å¹¶èƒ½å¤Ÿçµæ´»çš„é…ç½®åŒ–/æ’ä»¶åŒ–ï¼ŒShiroçš„å®ç°åœ¨è®¾è®¡ä¸Šéƒ½é«˜åº¦çš„æ¨¡å—åŒ–ã€‚äº‹å®ä¸Šç”±äºå¦‚æ­¤çš„æ¨¡å—åŒ–ï¼Œ<code>SecurityManager</code> çš„å®ç°(å’Œä»–çš„ç±»å±‚æ¬¡ç»“æ„)æ²¡æœ‰åšå¤ªå¤šçš„äº‹æƒ…ã€‚åè€Œ,<code>SecurityManager</code>çš„å®ç°æ‰®æ¼”è€…è½»é‡çº§â€™å®¹å™¨â€™ç»„ä»¶,å°†å¤§éƒ¨åˆ†è¡Œä¸ºå§”æ‰˜ç»™å†…åµŒçš„/åŒ…è£…çš„çš„ç»„ä»¶.è¿™ä¸ªâ€™åŒ…è£…å™¨â€™çš„è®¾è®¡ååº”åœ¨ä¸Šé¢çš„detailed architectureå›¾ä¸­</p><p>While the components actually execute the logic, the <code>SecurityManager</code> implementation knows how and when to coordinate the components for the correct behavior.</p><p>å½“ç»„ä»¶å®é™…æ‰§è¡Œé€»è¾‘æ—¶ï¼Œ<code>SecurityManager</code>çŸ¥é“å¦‚ä½•ä»¥åŠä½•æ—¶åè°ƒè¿™äº›ç»„ä»¶æ¥è¡¨ç°æ­£ç¡®çš„è¡Œä¸º</p><p>The <code>SecurityManager</code> implementations and the components are also JavaBeans compatible, which allows you (or a configuration mechanism) to easily customize the pluggable components via standard JavaBeans accessor/mutator methods (get<em>/set</em>). This means the Shiroâ€™s architectural modularity can translate into very easy configuration for custom behavior.</p><p><code>SecurityManager</code>çš„å®ç°å’Œç»„ä»¶éƒ½æ˜¯JavaBeanså…¼å®¹çš„,èƒ½å¤Ÿå…è®¸ä½ (æˆ–å…¶ä»–é…ç½®æœºåˆ¶)é€šè¿‡æ ‡å‡†JavaBeansçš„è®¿é—®å™¨/ä¿®æ”¹å™¨æ–¹æ³•(get/set)æ¥ç®€æ´çš„è‡ªå®šä¹‰è¿™äº›å¯æ’å…¥çš„ç»„ä»¶ã€‚è¿™æ„å‘³ç€ Shiroçš„æ¶æ„æ¨¡å—èƒ½å¦å˜åŒ–éå¸¸ç®€æ˜“çš„é…ç½®æ¥è‡ªå®šä¹‰è¡Œä¸ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Shiro </category>
          
          <category> Architecture </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shiro </tag>
            
            <tag> work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µå­ä¹¦é€šé“</title>
      <link href="/sunshine-carroll.github.io/2020/02/26/%E7%94%B5%E5%AD%90%E4%B9%A6%E9%80%9A%E9%81%93/"/>
      <url>/sunshine-carroll.github.io/2020/02/26/%E7%94%B5%E5%AD%90%E4%B9%A6%E9%80%9A%E9%81%93/</url>
      
        <content type="html"><![CDATA[<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><ul><li><a href="https://lingcoder.github.io/OnJava8/#/" target="_blank" rel="noopener">On Java 8</a> [^1]</li><li><a href="https://jiapengcai.gitbooks.io/effective-java/" target="_blank" rel="noopener">Effective Java 3</a> </li></ul><p>[^1]: ç›¸å½“äºã€ŠThinking in Javaã€‹çš„ç¬¬äº”ç‰ˆï¼Œæ˜¯ä¸€æœ¬è®²è¯­è¨€åŸºç¡€çš„ç»å…¸å…¥é—¨ä¹¦</p>]]></content>
      
      
      <categories>
          
          <category> resources </category>
          
      </categories>
      
      
        <tags>
            
            <tag> resources </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡æ¡£é€šé“</title>
      <link href="/sunshine-carroll.github.io/2020/02/26/%E6%96%87%E6%A1%A3%E9%80%9A%E9%81%93/"/>
      <url>/sunshine-carroll.github.io/2020/02/26/%E6%96%87%E6%A1%A3%E9%80%9A%E9%81%93/</url>
      
        <content type="html"><![CDATA[<p>##æŒä¹…å±‚</p><ul><li><a href="https://mybatis.org/mybatis-3/index.html" target="_blank" rel="noopener"><strong>Mybatis</strong></a>[^1]     <a href="https://mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="noopener">ä¸­æ–‡åœ°å€</a></li><li><a href="https://mp.baomidou.com/" target="_blank" rel="noopener"><strong>Mybatis-Plus</strong></a>[^2] å¯ä¸­è‹±åˆ‡æ¢</li></ul><h2 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h2><ul><li><h2 id="é¡¹ç›®æ„å»º-ä¾èµ–ç®¡ç†å·¥å…·"><a href="#é¡¹ç›®æ„å»º-ä¾èµ–ç®¡ç†å·¥å…·" class="headerlink" title="é¡¹ç›®æ„å»º,ä¾èµ–ç®¡ç†å·¥å…·"></a>é¡¹ç›®æ„å»º,ä¾èµ–ç®¡ç†å·¥å…·</h2></li></ul><p>##æ¶ˆæ¯æœºåˆ¶</p><p><a href><strong>hexo</strong></a></p><p>[^1]:    MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings. MyBatis eliminates almost all of the JDBC code and manual setting of parameters and retrieval of results. MyBatis can use simple XML or Annotations for configuration and map primitives, Map interfaces and Java POJOs (Plain Old Java Objects) to database records.<br>        MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚<br>[^2]:<a href="https://github.com/baomidou/mybatis-plus" target="_blank" rel="noopener">MyBatis-Plus</a>ï¼ˆMP for shortï¼‰is an powerful enhanced tool for <a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener">MyBatis</a> , Born To Simplify Development.<br>        MyBatiså¢å¼ºå·¥å…·,åœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><p>::: warning<br><em>here be dragons</em><br>:::</p>]]></content>
      
      
      <categories>
          
          <category> resources </category>
          
      </categories>
      
      
        <tags>
            
            <tag> resources </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¸½å·¢åŸç†</title>
      <link href="/sunshine-carroll.github.io/2020/02/02/%E9%B8%BD%E5%B7%A2%E5%8E%9F%E7%90%86/"/>
      <url>/sunshine-carroll.github.io/2020/02/02/%E9%B8%BD%E5%B7%A2%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="é¸½å·¢åŸç†"><a href="#é¸½å·¢åŸç†" class="headerlink" title="é¸½å·¢åŸç†"></a>é¸½å·¢åŸç†</h2><p>â€‹        å¦‚æœæœ‰$k+1$ä¸ªæˆ–æ›´å¤šçš„ç‰©ä½“æ”¾å…¥kä¸ªç›’å­ï¼Œåˆ™è‡³å°‘æœ‰ä¸€ä¸ªç›’å­åŒ…å«2ä¸ªæˆ–æ›´å¤šçš„ç‰©ä½“ã€‚</p><p>è¯æ˜ï¼š<br>            å‡è®¾æ²¡æœ‰ä¸€ä¸ªç›’å­ä¸­ç‰©ä½“å¤§äº1ä¸ªï¼Œé‚£ä¹ˆæ€»ç‰©ä½“æ•°â‰¤1Ã—k=kä¸ª,å’Œæ€»å…±æœ‰k+1ä¸ªç‰©ä½“çŸ›ç›¾ã€‚</p><hr><h2 id="å¹¿ä¹‰é¸½å·¢åŸç†"><a href="#å¹¿ä¹‰é¸½å·¢åŸç†" class="headerlink" title="å¹¿ä¹‰é¸½å·¢åŸç†"></a>å¹¿ä¹‰é¸½å·¢åŸç†</h2><p>â€‹            å¦‚æœ$N$ä¸ªç‰©ä½“æ”¾å…¥$K$ä¸ªç›’å­ï¼Œé‚£ä¹ˆè‡³å°‘ä¸€ä¸ªç›’å­åŒ…å«äº†$\lceil\frac{N}{K}\rceil$ä¸ªç‰©ä½“ã€‚</p><p>è¯æ˜ï¼š<br>            å‡å¦‚æ²¡æœ‰ä¸€ä¸ªç›’å­çš„ç‰©ä½“æ•°è¶…è¿‡$\lceil\frac{N}{K}\rceil$,é‚£ä¹ˆæ€»ç‰©ä½“æ•°æœ€å¤šæœ‰<br>$$<br>kï¼ˆ\lceil\frac{N}{K}\rceil-1ï¼‰&lt;kï¼ˆ\frac{N}{K}+1-1ï¼‰=N<br>$$<br>â€‹            è¿™å’Œæ€»ç‰©ä½“ä¸ªæ•°ä¸ºNäº’ç›¸çŸ›ç›¾</p><hr><h2 id="n-2-1-ä¸ªä»»æ„å®æ•°çš„å­åºåˆ—é—®é¢˜"><a href="#n-2-1-ä¸ªä»»æ„å®æ•°çš„å­åºåˆ—é—®é¢˜" class="headerlink" title="$n^2+1$ä¸ªä»»æ„å®æ•°çš„å­åºåˆ—é—®é¢˜"></a>$n^2+1$ä¸ªä»»æ„å®æ•°çš„å­åºåˆ—é—®é¢˜</h2><p>â€‹        æ¯ä¸ªç”±$n^2+1$ä¸ªä¸åŒå®æ•°æ„æˆçš„åºåˆ—éƒ½åŒ…å«ç€ä¸€ä¸ªé•¿ä¸ºn+1çš„ä¸¥æ ¼é€’å¢å­åºåˆ—æˆ–è€…ä¸¥æ ¼é€’å‡å­åºåˆ—ã€‚</p><p>è¯æ˜ï¼š<br>            è®¾$a_1,a_2,\cdots,a_{n^2+1}$æ˜¯$n^2+1$ä¸ªä¸åŒå®æ•°æ„æˆçš„åºåˆ—ï¼Œå¯¹ä¸åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªé¡¹$a_k$éƒ½æœ‰ä¸€ä¸ªæœ‰åºå¯¹$(i_k,d_k)$ï¼Œ$i_k$è¡¨ç¤ºä»$a_k$å¼€å§‹æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦,$d_k$è¡¨ç¤ºä»$a_k$å¼€å§‹æœ€é•¿é€’å‡å­åºåˆ—çš„é•¿åº¦.<br>            å¦‚æœæ¯ä¸ªç”±$n^2+1$ä¸ªä¸åŒå®æ•°æ„æˆçš„åºåˆ—ä¸å­˜åœ¨ä¸€ä¸ªé•¿ä¸ºn+1çš„ä¸¥æ ¼é€’å¢å­åºåˆ—æˆ–è€…ä¸¥æ ¼é€’å‡å­åºåˆ—ï¼Œé‚£ä¹ˆå­åºåˆ—çš„é•¿åº¦æœ€å¤šä¸ºnï¼Œæœ‰åºå¯¹$(i_k,d_k)$æœ‰$n^2$ç§å¯èƒ½ï¼Œä½†ä¸€å…±æœ‰$n+1$ä¸ªæœ‰åºå¯¹ï¼Œé‚£ä¹ˆå¿…å®šå­˜åœ¨$a_s$,$a_j$$s&lt;j$,ä½¿å¾—$(i_s,d_s)=(i_j,d_j)$,     å› ä¸ºåºåˆ—ä¸­å®æ•°çš„ä¸ªæ•°æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥$a_s&lt;a_j$æˆ–$a_s&gt;a_j$<br>            å¦‚æœ$a_s&lt;a_j$,é‚£ä¹ˆä»$a_j$å¼€å§‹é•¿åº¦ä¸º$i_j$çš„ä¸¥æ ¼é€’å¢å­åºåˆ—ä¸­åŠ ä¸Š$a_s$å°±æ„æˆçš„ä»$a_s$å¼€å§‹é•¿åº¦ä¸º$i_j+1=i_s+1$çš„ä¸¥æ ¼é€’å¢å­åºåˆ—ï¼Œè¿™ä¸ªä¸ä»$a_s$å¼€å§‹æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—ä¸º$i_s$çŸ›ç›¾ã€‚<br>            åŒç†ï¼Œå¦‚æœ$a_s&gt;a_j$,é‚£ä¹ˆä»$a_j$å¼€å§‹é•¿åº¦ä¸º$d_j$çš„ä¸¥æ ¼é€’å‡å­åºåˆ—ä¸­åŠ ä¸Š$a_s$å°±æ„æˆçš„ä»$a_s$å¼€å§‹é•¿åº¦ä¸º$d_j+1=d_s+1$çš„ä¸¥æ ¼é€’å‡å­åºåˆ—ï¼Œè¿™ä¸ªä¸ä»$a_s$å¼€å§‹æœ€é•¿ä¸¥æ ¼é€’å‡å­åºåˆ—ä¸º$d_s$çŸ›ç›¾ã€‚</p><hr><h2 id="æ‹‰å§†é½æ•°"><a href="#æ‹‰å§†é½æ•°" class="headerlink" title="æ‹‰å§†é½æ•°"></a>æ‹‰å§†é½æ•°</h2><p>â€‹        æ‹‰å§†é½æ•°æ˜¯$R(m,n)$ï¼ˆm,næ˜¯å¤§äºç­‰äº2çš„æ­£æ•´æ•°ï¼‰è¡¨ç¤ºï¼Œå¦‚æœä¸€ä¸ªæ™šä¼šä¸Šä¸¤ä¸ªäººä¸¤ä¸¤æ˜¯æœ‹å‹æˆ–æ•Œäººï¼Œé‚£ä¹ˆåœ¨ä¸€ä¸ªæ™šä¼šä¸Šä½¿å¾—mä¸ªäººä¸¤ä¸¤æ˜¯æœ‹å‹ï¼Œæˆ–nä¸ªäººä¸¤ä¸¤æ˜¯æ•Œäººæ‰€éœ€çš„æœ€å°äººæ•°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> discrete mathmatics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> counting </tag>
            
            <tag> discrete mathematics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡æ•°çš„åŸºç¡€</title>
      <link href="/sunshine-carroll.github.io/2020/02/01/%E8%AE%A1%E6%95%B0%E7%9A%84%E5%9F%BA%E7%A1%80/"/>
      <url>/sunshine-carroll.github.io/2020/02/01/%E8%AE%A1%E6%95%B0%E7%9A%84%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>##ä¹˜ç§¯è§„åˆ™</p><p>å½“ä¸€ä¸ªè¿‡ç¨‹ç”±ç‹¬ç«‹çš„ä»»åŠ¡ç»„æˆæ—¶å¯ä»¥ä½¿ç”¨ä¹˜ç§¯è§„åˆ™ã€‚<br>å‡è®¾ä¸€ä¸ªè¿‡ç¨‹å¯ä»¥è¢«åˆ†è§£ä¸ºä¸¤ä¸ªä»»åŠ¡ã€‚å¦‚æœå®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ–¹å¼æœ‰$n_1$ç§å¹¶ä¸”å¯¹äºæ¯ä¸ªå®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ–¹å¼ï¼Œå®Œæˆç¬¬äºŒä¸ªä»»åŠ¡çš„æ–¹å¼æœ‰$n_2$ç§ï¼Œé‚£ä¹ˆå®Œæˆè¿™ä¸ªè¿‡ç¨‹æœ‰$n_1n_2$ç§æ–¹å¼ã€‚</p><h2 id="THE-PRODUCT-RULE"><a href="#THE-PRODUCT-RULE" class="headerlink" title="THE PRODUCT RULE"></a>THE PRODUCT RULE</h2><p>â€‹        The product rule applies when a procedure is made up of separate tasks.<br>        Suppose that a procedure can be broken down into a sequence of two tasks. If there are $n_1$ ways to do the ï¬rst task and for each of these ways of doing the ï¬rst task, there are $n_2$ ways to do the second task, then there are$n_1n_2$ ways to do the procedure.</p><hr><h2 id="æ±‚å’Œæ³•åˆ™"><a href="#æ±‚å’Œæ³•åˆ™" class="headerlink" title="æ±‚å’Œæ³•åˆ™"></a>æ±‚å’Œæ³•åˆ™</h2><p>â€‹        å¦‚æœä¸€ä¸ªä»»åŠ¡èƒ½è¢«$n_1$ä¸­æ–¹å¼çš„ä¸€ç§æˆ–$n_2$ç§æ–¹å¼ä¸­çš„ä¸€ç§å®Œæˆã€‚åœ¨$n_1$ç§æ–¹å¼çš„é›†åˆä¸­æ²¡æœ‰ä¸€ä¸ªä¸$n_2$ç§æ–¹å¼çš„é›†åˆä¸­çš„å…ƒç´ ç›¸åŒã€‚é‚£ä¹ˆä¸€å…±æœ‰$n_1+n_2$ç§æ–¹å¼å®Œæˆè¿™ä¸ªä»»åŠ¡</p><p>##THE SUM RULE</p><p>â€‹        If a task can be done either in one of $n_1$ ways or in one of $n_2$ ways, where none of the set of $n_1$ ways is the same as any of the set of $n_2$ ways, then there are $n_1+n_2$  ways to do the task.</p><hr><h2 id="å‡æ³•æ³•åˆ™-ä¸¤ä¸ªé›†åˆçš„å®¹æ–¥åŸç†"><a href="#å‡æ³•æ³•åˆ™-ä¸¤ä¸ªé›†åˆçš„å®¹æ–¥åŸç†" class="headerlink" title="å‡æ³•æ³•åˆ™(ä¸¤ä¸ªé›†åˆçš„å®¹æ–¥åŸç†)"></a>å‡æ³•æ³•åˆ™(ä¸¤ä¸ªé›†åˆçš„å®¹æ–¥åŸç†)</h2><p>â€‹        å¦‚æœä¸€ä¸ªä»»åŠ¡èƒ½ç”¨$n_1$ç§æ–¹å¼æˆ–$n_2$ç§æ–¹å¼çš„å…¶ä¸­ä¸€ç§å®Œæˆï¼Œé‚£ä¹ˆå®Œæˆè¿™ä¸ªä»»åŠ¡çš„æ€»æ–¹æ³•æ•°ä¸º$n_1+n_2$å‡å»è¿™ä¸¤ç±»æ–¹æ³•ä¸­ç›¸åŒçš„æ–¹æ³•æ•°</p><h2 id="THE-SUBTRACTION-RULE"><a href="#THE-SUBTRACTION-RULE" class="headerlink" title="THE SUBTRACTION RULE"></a>THE SUBTRACTION RULE</h2><p>If a task can be done in either $n_1$ ways or $n_2$ ways, then the number of ways to do the task is $n_1 + n_2$ minus the number of ways to do the task that are common to the two different ways.<br>$$<br>| A_1âˆªA_2 | = | A_1 | + | A_2 | âˆ’ | A_1 âˆ© A_2 |<br>$$</p><hr><p>##é™¤æ³•æ³•åˆ™</p><p>â€‹        å¦‚æœä¸€ä¸ªä»»åŠ¡èƒ½ä½¿ç”¨ä¸€ä¸ªæœ‰nç§æ–¹å¼å®Œæˆ,å…¶ä¸­å¯¹äºæ¯ä¸€ç§æ–¹å¼wï¼Œåœ¨nç§æ–¹å¼ä¸­éƒ½æœ‰dä¸ªæ–¹å¼å’Œwæ–¹å¼ä¸€æ ·ã€‚é‚£ä¹ˆå®Œæˆè¿™ä¸ªä»»åŠ¡æœ‰æ–¹æ³•æ•°ä¸º$\frac{n}{d}$ </p><p>ç”¨é›†åˆè¯­è¨€æè¿°:<br>        If the ï¬nite set A is the union of n pairwise disjoint subsets each with d elements, then $n = \frac{| A |}{d}$.<br>        å¦‚æœä¸€ä¸ªæœ‰é™é›†Aæ˜¯nä¸ªäº’æ–¥çš„é›†åˆçš„å¹¶é›†,å…¶ä¸­æ¯ä¸ªé›†åˆéƒ½æœ‰dä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆ$n = \frac{| A |}{d}$</p><p>ç”¨å‡½æ•°è¯­è¨€æè¿°:<br>        If f is a function from A to B where A and B are ï¬nite sets, and that for every value $y âˆˆ B$ there are exactly d values $x âˆˆ A$ such that $f (x) = y$ (in which case, we say that f is d-to-one), then$ï½œBï½œ= \frac{| A |}{d}$.</p><p>â€‹        å¦‚æœ f æ˜¯ä¸€ä¸ªAåˆ°Bçš„å‡½æ•°ï¼ŒAï¼ŒBéƒ½ä¸ºæœ‰é™é›†,å¯¹äºä»»æ„ä¸€ä¸ª$y âˆˆ B$éƒ½æœ‰dä¸ª$x âˆˆ A$ ä½¿å¾—$f (x) = y$(åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç§°fæ˜¯dåˆ°1çš„),é‚£ä¹ˆ$ï½œBï½œ= \frac{| A |}{d}$</p><p>##The Division Rule</p><p>â€‹        There are $\frac{n}{d}$ ways to do a task if it can be done using a procedure that can be carried out in n ways, and for every way w, exactly d of the n ways correspond to way w.</p><h2 id="ä¸€äº›ç»“è®º"><a href="#ä¸€äº›ç»“è®º" class="headerlink" title="ä¸€äº›ç»“è®º"></a>ä¸€äº›ç»“è®º</h2><ol><li><p>ä»må…ƒç´ é›†åˆåˆ°nå…ƒç´ é›†åˆæœ‰å¤šå°‘ä¸ªå‡½æ•°â€”â€”â€“$n^m$</p><p>ä¸ºä»»æ„ä¸€ä¸ªå…ƒç´ xå±äºmæŒ‡æ´¾ä¸€ä¸ªå…ƒç´ yå±äºnæœ‰nç§æ–¹å¼ï¼Œæœ‰mä¸ªå…ƒç´ è¦æŒ‡æ´¾ï¼ŒæŒ‡æ´¾ç¬¬ä¸€ä¸ªæœ‰nç§æ–¹å¼ï¼Œåœ¨æŒ‡æ´¾ç¬¬ä¸€ä¸ªå…ƒç´ åæŒ‡æ´¾ç¬¬äºŒä¸ªå…ƒç´ æœ‰$nÃ—n$ç§æ–¹å¼,ä»¥æ­¤ç±»æ¨ä¸€å…±æœ‰$n^m$ç§æ–¹å¼</p></li><li><p>ä»må…ƒç´ é›†åˆåˆ°nå…ƒç´ é›†åˆæœ‰å¤šå°‘ä¸ªä¸€å¯¹ä¸€å‡½æ•°â€”â€”â€“$n(n-1)(n-2)\cdots(n-m+1)$ å…¶ä¸­$mâ‰¤n$å¦åˆ™ä¸å¯èƒ½å­˜åœ¨ä¸€å¯¹ä¸€å‡½æ•°.</p><p>æŒ‡æ´¾ç¬¬ä¸€ä¸ªæœ‰nç§æ–¹å¼ï¼Œåœ¨æŒ‡æ´¾ç¬¬ä¸€ä¸ªå…ƒç´ åæŒ‡æ´¾ç¬¬äºŒä¸ªå…ƒç´ æœ‰$nÃ—(n-1)$ç§æ–¹å¼,ä»¥æ­¤ç±»æ¨ä¸€å…±æœ‰$n(n-1)(n-2)\cdots(n-m+1)$ç§æ–¹å¼</p></li><li><p>ä»må…ƒç´ é›†åˆåˆ°nå…ƒç´ é›†åˆæœ‰å¤šå°‘ä¸ªéƒ¨åˆ†å‡½æ•°â€”â€“$(n+1)^m$<br>$$<br>\begin{pmatrix}<br>m\0<br>\end{pmatrix}Ã—1^mn^0+<br>\begin{pmatrix}<br>m\1<br>\end{pmatrix}<br>Ã—1^{m-1}n^{1}+\dots+<br>\begin{pmatrix}<br>m\m<br>\end{pmatrix}<br>Ã—1^{0}n^{m}=(1+n)^m<br>$$<br>äºŒé¡¹å¼å®šç†å¦‚ä¸‹<br>$$<br>(x+y)^n=\sum_{j=0}^{n}\begin{pmatrix}<br>n\j</p><h1 id="end-pmatrix-x-n-j-y-j"><a href="#end-pmatrix-x-n-j-y-j" class="headerlink" title="\end{pmatrix}x^{n-j}y^j"></a>\end{pmatrix}x^{n-j}y^j</h1><p>\begin{pmatrix}<br>n\0<br>\end{pmatrix}Ã—x^ny^0+<br>\begin{pmatrix}<br>n\1<br>\end{pmatrix}<br>Ã—x^{n-1}y^{1}+\dots+<br>\begin{pmatrix}<br>n\n<br>\end{pmatrix}<br>Ã—x^{0}y^{n}<br>$$<br>å½“xä¸º1,yä¸ºn,nä¸ºmæ—¶ï¼Œå°±æ˜¯må…ƒç´ é›†åˆåˆ°nå…ƒç´ é›†åˆéƒ¨åˆ†å‡½æ•°æ•°é‡çš„è¡¨è¾¾å¼</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> discrete mathematics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> counting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‰¯åºæ€§ï¼Œæ•°å­¦å½’çº³æ³•ï¼Œå¼ºå½’çº³æ³•ï¼Œç»“æ„å½’çº³æ³•</title>
      <link href="/sunshine-carroll.github.io/2020/01/29/%E8%89%AF%E5%BA%8F%E6%80%A7%EF%BC%8C%E6%95%B0%E5%AD%A6%E5%BD%92%E7%BA%B3%E6%B3%95%EF%BC%8C%E5%BC%BA%E5%BD%92%E7%BA%B3%E6%B3%95%EF%BC%8C%E7%BB%93%E6%9E%84%E5%BD%92%E7%BA%B3%E6%B3%95/"/>
      <url>/sunshine-carroll.github.io/2020/01/29/%E8%89%AF%E5%BA%8F%E6%80%A7%EF%BC%8C%E6%95%B0%E5%AD%A6%E5%BD%92%E7%BA%B3%E6%B3%95%EF%BC%8C%E5%BC%BA%E5%BD%92%E7%BA%B3%E6%B3%95%EF%BC%8C%E7%BB%93%E6%9E%84%E5%BD%92%E7%BA%B3%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="æ­£æ•´æ•°é›†åˆä¸Šçš„å…¬ç†ï¼ˆAxioms-for-Positive-Integersï¼‰"><a href="#æ­£æ•´æ•°é›†åˆä¸Šçš„å…¬ç†ï¼ˆAxioms-for-Positive-Integersï¼‰" class="headerlink" title="æ­£æ•´æ•°é›†åˆä¸Šçš„å…¬ç†ï¼ˆAxioms for Positive Integersï¼‰"></a>æ­£æ•´æ•°é›†åˆä¸Šçš„å…¬ç†ï¼ˆAxioms for Positive Integersï¼‰</h2><ol><li>æ•°1æ˜¯æ­£æ•´æ•°</li><li>å¦‚æœnæ˜¯æ­£æ•´æ•°é‚£ä¹ˆn+1(nçš„åç»§ä¹Ÿæ˜¯æ­£æ•´æ•°)</li><li>æ¯ä¸ªå¤§äº1çš„æ­£æ•´æ•°éƒ½æ˜¯ä¸€ä¸ªæ­£æ•´æ•°çš„åç»§</li><li>è‰¯åºæ€§(The Well-Ordering Property):æ­£æ•´æ•°é›†åˆçš„æ¯ä¸ªéç©ºå­é›†éƒ½æœ‰ä¸€ä¸ªæœ€å°å…ƒ</li></ol><h2 id="ä»‹ç»-introduction"><a href="#ä»‹ç»-introduction" class="headerlink" title="ä»‹ç»(introduction)"></a>ä»‹ç»(introduction)</h2><p>è‰¯åºæ€§å…¬ç†â€“&gt;æ•°å­¦å½’çº³æ³•â€“&gt;å¼ºå½’çº³æ³•â€“&gt;ç»“æ„å½’çº³æ³•</p><h3 id="æ•°å­¦å½’çº³æ³•"><a href="#æ•°å­¦å½’çº³æ³•" class="headerlink" title="æ•°å­¦å½’çº³æ³•"></a>æ•°å­¦å½’çº³æ³•</h3><p>####æè¿°</p><p>â€‹        å¾ˆå¤šå‘½é¢˜éƒ½æ–­è¨€ï¼ŒæŸä¸ªæ€§è´¨å¯¹æ‰€æœ‰æœ‰æ­£æ•´æ•°æ¥è¯´éƒ½ä¸ºçœŸã€‚æ•°å­¦å½’çº³æ³•æ˜¯è¯æ˜è¿™ç±»å‘½é¢˜çš„ä¸€ä¸ªæœ‰æ•ˆè¯æ˜æ–¹æ³•ã€‚é¦–å…ˆè¯æ˜å‘½é¢˜å¯¹äºæ­£æ•´æ•°1æˆç«‹ã€‚ç„¶åè¯æ˜è¿™ä¸ªå‘½é¢˜å¦‚æœå¯¹äºä¸€ä¸ªæ­£æ•´æ•°æˆç«‹ï¼Œé‚£ä¹ˆå¯¹äºä¸‹ä¸€ä¸ªæ­£æ•´æ•°ä¹Ÿå¿…ç„¶æˆç«‹ã€‚è¿™è¯æ˜æ–¹æ³•åŸºäºä¸‹é¢è¿™ä¸ªæ¨ç†è§„åˆ™ã€‚<br>$$<br>âˆ€nâˆˆZ^<em>,\ \ \ \ (P(1)âˆ§(âˆ€kâˆˆZ^</em>,P(k)â†’P(k+1))  â†’  âˆ€nP(n)<br>$$<br>ä¹Ÿå°±æ˜¯è¯´å¯¹äºä»»æ„æ­£æ•´æ•°n å¦‚æœ$P(1)$ä¸”$âˆ€kâˆˆZ^*,P(k)â†’P(k+1)$,é‚£ä¹ˆâˆ€nP(n)ä¹Ÿæˆç«‹ã€‚</p><h4 id="å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜çš„å‘½é¢˜"><a href="#å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜çš„å‘½é¢˜" class="headerlink" title="å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜çš„å‘½é¢˜"></a>å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜çš„å‘½é¢˜</h4><ol><li><p>å¯¹äºä¸€ä¸ªæ— é™é•¿çš„å¤šç±³è¯ºéª¨ç‰Œï¼Œæ¯å¼ å¤šç±³è¯ºéª¨ç‰Œéƒ½ç›´ç«‹ç€ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå¤šç±³è¯ºéª¨ç‰Œå€’äº†ï¼Œå¹¶ä¸”å¦‚æœä¸€å¼ å¤šç±³è¯ºéª¨ç‰Œå€’äº†ï¼Œä¸‹ä¸€å¼ å¤šç±³è¯ºéª¨ç‰Œä¹Ÿä¼šå€’ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å¤šç±³è¯ºéª¨ç‰Œéƒ½ä¼šå€’ã€‚</p></li><li><p>å‰nä¸ªæ­£æ•´æ•°ä¹‹å’Œä¸º$\frac{n(n-1)}{2}$</p></li><li><p>å‰nä¸ªæ­£å¥‡æ•°ä¹‹å’Œä¸º$n^2$</p></li><li><p>å«æœ‰nä¸ªå…ƒç´ çš„æœ‰é™é›†çš„å­é›†ä¸ªæ•°ä¸º$2^n$ï¼Œnä¸ºéè´Ÿæ•´æ•°(nonpositive integer)</p></li><li><p>å‡è®¾æˆ‘ä»¬ä¸€ç»„è®²åº§ï¼Œæ¯ä¸ªè®²åº§éƒ½æœ‰å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ã€‚å‡å¦‚è®²åº§ä¸€æ—¦å¼€å§‹å°±ä¼šæŒç»­åˆ°ç»“æŸï¼Œä¸¤ä¸ªè®²åº§ä¸èƒ½åŒæ—¶è¿›è¡Œï¼Œä¸€ä¸ªè®²åº§ç»“æŸåå¦ä¸€ä¸ªè®²åº§å°±å¼€å§‹ï¼Œæ¼”è®²å…åªæœ‰ä¸€ä¸ªï¼Œç›®çš„æ˜¯å°½å¯èƒ½å®‰æ’æ›´å¤šçš„è®²åº§ã€‚æ•°å­¦å½’çº³æ³•å¯ä»¥è¯æ˜æ¯ä¸€æ¬¡é€‰æ‹©ä¸å·²é€‰è®²åº§ç›¸å®¹çš„è®²åº§ä¸­ï¼Œç»“æŸæ—¶é—´æœ€æ—©çš„è®²åº§ã€‚å°±èƒ½å®‰æ’æ›´å¤šçš„è®²åº§ã€‚</p></li><li><p>åªè¦næ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œåˆ™$f(x)=x^n$ çš„å¯¼æ•°å°±ç­‰äº $nx^{n-1}$ï¼Œæ³¨æ„å‘½é¢˜æ˜¯å¾®ç§¯åˆ†ä¸­æ±‚å¯¼æ³•åˆ™ $f(x)=x^n$ çš„å¯¼æ•°ä¸º$nx^{n-1}$</p><p>çš„è®ºåŸŸä¸åŒï¼Œå…·ä½“çœ‹ä¸€ä¸‹é«˜ç­‰æ•°å­¦ä¹¦å°±çŸ¥é“äº†</p></li></ol><h4 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h4><p>â€‹        åœ¨é€»è¾‘å­¦ä¸­ï¼Œé€šè¿‡æ¨ç†è§„åˆ™ä»å‰æå¯¼å‡ºç»“è®ºçš„å«æ¼”ç»æ¨ç†ï¼Œå¯»æ‰¾ç»“è®ºæ¥æ”¯æŒè¯æ®çš„å«å½’çº³æ¨ç†ï¼Œæ•°å­¦è¯æ˜åŒ…æ‹¬ä½¿ç”¨äº†æ•°å­¦å½’çº³æ³•çš„è¯æ˜éƒ½æ˜¯æ¼”ç»æ¨ç†ã€‚è¿™ä¸ªæ˜¯æœ¯è¯­çš„å†²çªã€‚</p><p>â€‹        æ•°å­¦å½’çº³æ³•çš„åŸºç¡€æ­¥éª¤ä¸ä¸€å®šè¦ä»1å¼€å§‹ï¼Œæœ‰æ—¶å€™éœ€è¦è¯æ˜å¯¹äºä»»æ„çš„$n&gt;=b,P(n)$ä¸ºçœŸ,å…¶ä¸­nï¼Œbæ˜¯æ•´æ•°ï¼Œbå¯ä»¥æ˜¯æ­£æ•°è´Ÿæ•°æˆ–0</p><p>â€‹        æœ‰æ—¶å€™æ•°å­¦å½’çº³æ³•ä¸èƒ½ç›´æ¥è¯æ˜ä¸€ä¸ªç»“è®ºï¼Œä½†æ˜¯å¯ä»¥è¯æ˜ä¸€ä¸ªæ›´å¹¿çš„ç»“è®ºï¼Œä»è€Œå¾—åˆ°éœ€è¦è¯æ˜çš„ç»“è®ºï¼Œè¿™ä¸ªæ–¹æ³•å«å½’çº³è½½å…¥</p><h3 id="å¼ºå½’çº³æ³•"><a href="#å¼ºå½’çº³æ³•" class="headerlink" title="å¼ºå½’çº³æ³•"></a>å¼ºå½’çº³æ³•</h3><h4 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h4><p>â€‹        å¼ºå½’çº³æ³•å¯ä»¥ä½¿ç”¨åœ¨ç›´æ¥ä½¿ç”¨æ•°å­¦å½’çº³æ³•ä¸å®¹æ˜“è¯æ˜çš„å‘½é¢˜ä¸Šã€‚ä»–çš„åŸºç¡€æ­¥éª¤å’Œæ•°å­¦å½’çº³æ³•ç›¸åŒï¼Œé¦–å…ˆè¯æ˜$P(1)$ä¸ºçœŸï¼Œå½’çº³æ­¥éª¤ä¸åŒï¼Œå½’çº³æ­¥éª¤éœ€è¦è¯æ˜å¯¹äºä»»æ„ä¸å¤§äºkçš„æ­£æ•´æ•° j ,$P(j)$ä¸ºçœŸï¼Œé‚£ä¹ˆ$P(k+1)$ä¹Ÿä¸ºçœŸã€‚è¡¨ç¤ºä¸ºé€»è¾‘è¯­å¥å°±æ˜¯<br>$$<br>âˆ€nâˆˆZ^<em>,\ \ \ \ (P(1)âˆ§(âˆ€kâˆˆZ^</em>,P(1)âˆ§P(2)âˆ§..âˆ§P(k-1)âˆ§P(k)â†’P(k+1))  â†’  âˆ€nP(n)<br>$$</p><h4 id="å¼ºå½’çº³æ³•å¯ä»¥è¯æ˜çš„ä¸€äº›å‘½é¢˜"><a href="#å¼ºå½’çº³æ³•å¯ä»¥è¯æ˜çš„ä¸€äº›å‘½é¢˜" class="headerlink" title="å¼ºå½’çº³æ³•å¯ä»¥è¯æ˜çš„ä¸€äº›å‘½é¢˜"></a>å¼ºå½’çº³æ³•å¯ä»¥è¯æ˜çš„ä¸€äº›å‘½é¢˜</h4><ol><li>æ¯ä¸ªæ­£æ•´æ•°éƒ½å¯ä»¥å†™æˆç´ æ•°çš„ä¹˜ç§¯</li><li>å…·æœ‰næ¡è¾¹çš„ç®€å•å¤šè¾¹å½¢èƒ½å¤Ÿè¢«ä¸‰è§’å½¢åŒ–ä¸ºn-2åˆ†ä¸‰è§’å½¢ï¼Œnæ˜¯å¤§äºç­‰äº3çš„æ•´æ•°</li><li>$\sqrt2$æ˜¯æ— ç†æ•°(ç¬¬ä¸€ä¸ªè¢«å‘ç°çš„æ— ç†æ•°å°±æ˜¯$\sqrt2$,å¸Œå¸•ç´¢æ–¯ä¹Ÿå› æ­¤è¢«ä¸¢è¿›äº†çˆ±ç´æµ·)</li><li>ä»»æ„æ­£æ•´æ•°néƒ½å¯ä»¥å†™æˆ2çš„ä¸åŒæ¬¡å¹‚çš„å’Œ</li></ol><h4 id="ç»“æ„å½’çº³æ³•"><a href="#ç»“æ„å½’çº³æ³•" class="headerlink" title="ç»“æ„å½’çº³æ³•"></a>ç»“æ„å½’çº³æ³•</h4><p>##åº”ç”¨</p><p>##æ­£ç¡®æ€§è¯æ˜</p><p>###è‰¯åºæ€§(The Well-Ordering Property) â€“&gt; æ•°å­¦å½’çº³æ³•</p><p>â€‹        å…ˆçœ‹è‰¯åºæ€§å…¬ç†çš„é™ˆè¿°ï¼Œæ­£æ•´æ•°é›†åˆçš„æ¯ä¸ªéç©ºå­é›†éƒ½æœ‰ä¸€ä¸ªæœ€å°å…ƒã€‚éœ€è¦è¯æ˜çš„æ˜¯<br>å¯¹äºä»»æ„æ­£æ•´æ•°n å¦‚æœ$P(1)$ä¸”$âˆ€kâˆˆZ^*,P(k)â†’P(k+1)$ èƒ½å¤Ÿæ¨å‡ºâˆ€nP(n)ã€‚</p><hr><p>Proof 1:</p><p>â€‹        é¦–å…ˆå…ˆæ³¨æ„åˆ°æœ‰ä¸¤ä¸ªå‰æï¼Œç¬¬ä¸€ä¸ªæ˜¯P(1) â‰¡ T ,</p><p>â€‹                                                    ç¬¬äºŒä¸ªæ˜¯$âˆ€kâˆˆZ^*,P(k)â†’P(k+1)$  â‰¡ T</p><p>â€‹        å‡è®¾Sæ˜¯ä½¿å¾—P(n)ä¸ºå‡çš„å€¼çš„é›†åˆã€‚è¦è¯æ•°å­¦å½’çº³æ³•ä¸ºçœŸ$âˆ€nâˆˆZ^<em>,\ \ \ \ (P(1)âˆ§(âˆ€kâˆˆZ^</em>,P(k)â†’P(k+1))  â†’  âˆ€nP(n)$</p><p>å¯ä»¥è¯æ˜S = âˆ… æˆ–è€…è¯æ˜ S éç©ºä¸ºå‡ã€‚è¿™é‡Œæˆ‘ä»¬è¯æ˜ S éç©ºä¸ºå‡ã€‚</p><p>â€‹        å‡è®¾æ•°å­¦å½’çº³æ³•ç»“è®ºä¸ºå‡,ä¹Ÿå°±æ˜¯è¯´ç»“è®ºçš„å¦å®šä¸ºçœŸï¼Œå³$Â¬âˆ€nP(n) â‰¡ T$ </p><p>$Â¬âˆ€nP(n)$ â‰¡ âˆƒn,Â¬P(n) ä¹Ÿå°±æ˜¯è¯´é›†åˆSéç©ºã€‚Sæ˜¯æ­£æ•´æ•°é›†åˆçš„å­é›†ä¸”éç©ºï¼Œé‚£ä¹ˆæ ¹æ®è‰¯åºæ€§å…¬ç†ï¼ŒSå¿…å®šå­˜åœ¨æœ€å°å…ƒï¼Œå‡è®¾è¯¥æœ€å°å…ƒä¸ºmï¼Œé‚£ä¹ˆm-1 ä¸å±äºé›†åˆSã€‚</p><p>â€‹        å› æ­¤P(m-1) ä¸ºçœŸã€‚</p><p>â€‹        åˆå› ä¸º$âˆ€kâˆˆZ^*,P(k)â†’P(k+1)$ä¸ºçœŸï¼Œåˆ™$P(m-1)â†’P(m)$ ï¼Œ$P(m) â‰¡ T$ï¼Œè¿™ä¸$P(m) â‰¡ F$ çŸ›ç›¾ï¼Œæ‰€ä»¥$âˆ€nP(n)$</p><hr><p>å¯¹äºProof 1 çš„åˆ†æ</p><p>â€‹        é¦–å…ˆæˆ‘ä»¬å¸Œæœ›åœ¨å¯¹äºä»»æ„æ­£æ•´æ•°n å¦‚æœ$P(1)$å’Œ$âˆ€kâˆˆZ^*,P(k)â†’P(k+1)$éƒ½ä¸ºçœŸçš„å‰æä¸‹ï¼Œè¯æ˜$âˆ€nP(n)$ä¹Ÿä¸ºçœŸ.è¿™æ˜¯ç›´æ¥è¯æ˜çš„ä¸€ä¸ªä¾‹å­ã€‚</p><p>â€‹        éšåæˆ‘ä»¬å‘ç°$âˆ€nP(n)$  ç­‰ä»·äºSä¸ºç©º,è¿™ä¸€æ­¥å°†è¯æ˜$âˆ€nP(n)$ è½¬æ¢ä¸ºè¯æ˜ S ä¸ºç©ºé›†ã€‚ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å‡è®¾Séç©ºï¼Œå¹¶é€šè¿‡ä»–æ¥å¾—åˆ°ä¸€ä¸ªçŸ›ç›¾å¼(å³æ°¸è¿œä¸ºå‡çš„å‘½é¢˜)ã€‚å³P(m)ä¸ºçœŸå¹¶ä¸”P(m)ä¸ºå‡çš„çŸ›ç›¾ï¼Œè¿™æ˜¯å½’è°¬è¯æ˜æ³•çš„ä¸€ä¸ªä¾‹å­ã€‚</p><p>åé¢å¾—åˆ°äº†Séç©ºä¸ºå‡ï¼Œå³Sä¸ºç©ºä¸ºçœŸï¼Œå› ä¸ºSä¸ºç©ºâ†’$âˆ€nP(n)$ï¼ŒSä¸ºç©ºï¼Œäºæ˜¯$âˆ€nP(n)$ ä¸ºçœŸï¼Œè¿™ä¸ªæ˜¯å‡è¨€æ¨ç†çš„ä¸€ä¸ªä¾‹å­ã€‚</p><h3 id="æ•°å­¦å½’çº³æ³•â€“-gt-ç»“æ„å½’çº³æ³•"><a href="#æ•°å­¦å½’çº³æ³•â€“-gt-ç»“æ„å½’çº³æ³•" class="headerlink" title="æ•°å­¦å½’çº³æ³•â€“&gt;ç»“æ„å½’çº³æ³•"></a>æ•°å­¦å½’çº³æ³•â€“&gt;ç»“æ„å½’çº³æ³•</h3>]]></content>
      
      
      <categories>
          
          <category> discrete mathematics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> proof </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
